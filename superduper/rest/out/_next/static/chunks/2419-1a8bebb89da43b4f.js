"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2419],{80298:function(e,s,t){t.d(s,{Z:function(){return L}});var a=t(27573),n=t(7653),r=t(412),l=t(21091),i=t(13908),o=t(93296),d=t(1070),c=t(62692),h=t(36531),u=t(5772),p=t(7109),x=e=>{let{fileId:s}=e,t=(0,r.v9)(e=>e.environment.environmentLoadedValues),l=(0,r.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[o,d]=(0,n.useState)(null),[c,x]=(0,n.useState)(null),[j,g]=(0,n.useState)("");return((0,n.useEffect)(()=>{(async()=>{try{let e=await i.Z.get("".concat("".concat("","/db/artifact_store/get?file_id=").concat(s)),{responseType:"blob",headers:{Accept:"application/json",Authorization:(0,p.Z)(l),superduper_reverse_proxy:t.NEXT_PUBLIC_REST_API}}),a=new Blob([e.data],{type:e.headers["content-type"]}),n=window.URL.createObjectURL(a);if(d(n),x(e.headers["content-type"]),e.headers["content-type"].startsWith("text/")){let s=await new Response(e.data).text();g(s)}}catch(e){console.error("Error fetching file:",e)}})()},[s]),o)?c.startsWith("image/")?(0,a.jsx)("img",{src:o,alt:"File Preview",className:"max-w-sm"}):c.startsWith("text/")?(0,a.jsx)("pre",{className:"bg-gray-100 p-4 rounded-lg dark:bg-gray-800 whitespace-pre-wrap",children:(0,a.jsx)("code",{children:j})}):c.startsWith("audio/")?(0,a.jsxs)("audio",{controls:!0,children:[(0,a.jsx)("source",{src:o,type:c}),"Your browser does not support the audio element."]}):c.startsWith("video/")?(0,a.jsxs)("video",{controls:!0,children:[(0,a.jsx)("source",{src:o,type:c}),"Your browser does not support the video element."]}):(0,a.jsxs)("section",{className:"p-6 border-dashed border-2 border-gray-200 rounded-lg flex flex-col items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(f,{className:"h-10 w-10"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(0,a.jsx)("div",{className:"font-medium",children:"Uploaded Byte file"})})]}),(0,a.jsx)("a",{href:o,download:!0,className:"pl-2 pr-2",children:(0,a.jsxs)(h.z,{size:"sm",variant:"outline",children:[(0,a.jsx)(m,{className:"mr-2 h-4 w-4"}),"Download"]})})]}):(0,a.jsxs)("span",{children:["Loading Artifact...",(0,a.jsx)("br",{}),(0,a.jsx)(u.Z,{})]})};function m(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}function f(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"})]})}var j=t(85688),g=t(24776),v=t(86288),w=t(1930),y=t(97747);function N(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}function b(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 6h18"}),(0,a.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,a.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})}function k(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m9 18 6-6-6-6"})})}var _=function(){let e=(0,r.v9)(e=>e.environment.environmentLoadedValues),s=(0,r.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[t,u]=(0,n.useState)("bytes"),[m,f]=(0,n.useState)([]),[_,L]=(0,n.useState)(""),[C,z]=(0,n.useState)(!1),A=()=>{navigator.clipboard.writeText(_),z(!0),setTimeout(()=>z(!1),2e3)},E=(0,r.I0)(),F=(0,r.v9)(e=>e.uploadFiles.uploadFilesLoadedValues||[]),I=(0,r.v9)(e=>e.uploadFiles.uploadFilesLoadedValuesSchema||[]),S=(0,r.v9)(e=>e.uploadFiles.uploadFilesLoadedValuesComponent||[]),[B,U]=(0,n.useState)(null),[T,Z]=(0,n.useState)({success:!1,message:""}),D=(0,n.useRef)(null),V=async t=>{try{let a=await i.Z.get("".concat("".concat("","/db/artifact_store/get_artifact?file_id=").concat(t)),{responseType:"blob",headers:{accept:"application/json",Authorization:(0,p.Z)(s),superduper_reverse_proxy:e.NEXT_PUBLIC_REST_API}}),n=new Blob([a.data],{type:a.headers["content-type"]}),r=window.URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.setAttribute("download",t),document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(e){console.error("Error downloading file:",e)}},W=async a=>{if(!a){Z({success:!1,message:"Please select a file to upload."});return}Z({success:!0,message:"Uploading. Please wait patiently."});let n=new FormData;n.append("raw",a,a.name);try{let a=await i.Z.put("".concat("".concat("","/db/artifact_store/put")),n,{headers:{"Content-Type":"multipart/form-data",accept:"application/json",Authorization:(0,p.Z)(s),superduper_reverse_proxy:e.NEXT_PUBLIC_REST_API}});a.data?(console.log("FILE UPLOADED",a.data),Z({success:!0,message:"Successfully uploaded files"}),E((0,d.Xs)([...F,a.data.file_id])),E((0,d.nh)([...I,{_content:{file_id:a.data.file_id,datatype:t}}])),console.log("file uploading log",a.data.file_id),E((0,d.QL)([...S,{leaf_type:"blob",type_id:"blob",cls:"Artifact",module:"superduperdb/components/datatype",dict:{file_id:a.data.file_id}}])),o.ZP.success("Artifact uploaded successfully")):Z({success:!1,message:"Upload failed. Try again with proper datatype."})}catch(e){Z({success:!1,message:"Error uploading file."}),console.error("Error uploading file:",e)}},R=e=>()=>{V(e)},P=e=>()=>{console.log("Deleting:",e),E((0,d.Xs)(F.filter(s=>s!==e))),E((0,d.nh)(I.filter(s=>s._content.file_id!==e)))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Zb,{className:"w-full",children:[(0,a.jsx)(v.Ol,{className:"space-y-1",children:(0,a.jsx)(v.ll,{children:(0,a.jsx)(c.Z,{label:(0,a.jsx)("span",{className:"text-base font-semibold leading-7 text-gray-900",children:"Upload Artifacts"}),popoverheader:"",popovercontent:(0,a.jsx)("p",{children:"You can upload various artifacts, such as bytes, images, and videos, and reference them by artifact ID."})})})}),(0,a.jsx)(v.aY,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:"col-span-4 mt-4",children:(0,a.jsx)("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault();let s=e.dataTransfer.files[0];U(s),W(s)},ref:D,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),(0,a.jsx)("div",{className:"mx-auto mt-2"}),(0,a.jsxs)("div",{className:"mt-4 flex text-sm leading-6 text-gray-600",children:[(0,a.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500",children:[(0,a.jsx)("span",{children:"Upload an artifact"}),(0,a.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:e=>{U(e.target.files[0]),W(e.target.files[0])}})]}),(0,a.jsx)("p",{className:"pl-1",children:"or drag and drop"})]}),(0,a.jsx)("p",{className:"text-xs leading-5 text-gray-600",children:"Max filesize is 1024MB"}),T.message&&(0,a.jsx)("p",{className:"mt-2 text-sm ".concat(T.success?"text-green-500":"text-red-500"),children:T.message})]})})})})}),(0,a.jsx)(v.eW,{className:""})]}),F&&0!==F.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pt-2 mt-4 pb-4",children:(0,a.jsx)("label",{htmlFor:"component-type",className:"text-sm font-medium leading-6 text-gray-900",children:"Uploaded Artifacts"})}),(0,a.jsx)("div",{children:F.map((e,s)=>(0,a.jsx)(v.Zb,{className:"mb-4",children:(0,a.jsxs)(v.Ol,{className:"flex gap-2 items-start",children:[(0,a.jsxs)("div",{className:"grid gap-0.5",children:[(0,a.jsx)(v.ll,{className:"text-sm",children:(0,a.jsx)("span",{className:"flex justify-end w-full",children:(0,a.jsx)("span",{children:e})})}),(0,a.jsx)(v.SZ,{className:"text-[#666] text-xs leading-none",children:"Refer this artifact with the reference above"})]}),(0,a.jsxs)("div",{className:"flex ml-auto gap-1.5",children:[(0,a.jsxs)(g.Vq,{children:[(0,a.jsx)(g.hg,{asChild:!0,children:(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:()=>{L(e)},children:["View Uploaded File"," ",(0,a.jsx)(k,{className:"ml-1 h-4 w-4"})]})}),(0,a.jsxs)(g.cZ,{className:"sm:max-w-md",children:[(0,a.jsxs)(g.fK,{children:[(0,a.jsx)(g.$N,{children:"Artifact"}),(0,a.jsx)(g.Be,{children:"Refer this artifact with the reference"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"grid flex-1 gap-2",children:[(0,a.jsx)(y._,{htmlFor:"link",className:"sr-only",children:"Artifact Reference Id"}),(0,a.jsx)(w.I,{id:"link",value:"@artifact/".concat(e),readOnly:!0})]}),(0,a.jsxs)(h.z,{type:"button",size:"sm",className:"px-3",onClick:A,"aria-label":C?"Copied":"Copy",children:[(0,a.jsx)("span",{className:"sr-only",children:C?"Copied":"Copy"}),(0,a.jsx)(j.TIy,{className:"h-4 w-4"})]})]}),(0,a.jsx)(g.Be,{children:(0,a.jsx)(x,{fileId:e,className:"pb-2"})}),(0,a.jsx)(g.cN,{className:"sm:justify-start",children:(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:R(e),children:["Download",(0,a.jsx)(N,{className:"ml-2 w-4 h-4"})," ",(0,a.jsx)("span",{className:"sr-only",children:"Download"})]})})]})]}),(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:R(e),children:[(0,a.jsx)(N,{className:"w-4 h-4"})," ",(0,a.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:P(e),children:[(0,a.jsx)(b,{className:"h-4 w-4"})," ",(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})},s))})]})]})},L=()=>{let e=(0,r.v9)(e=>e.uploadFiles.uploadFilesLoadedValues||[]),[s,t]=(0,n.useState)(!1),[l,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{0===e.length||l||t(!0)},[e,l]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(h.z,{variant:"secondary",onClick:()=>{t(!s),i(!0)},children:["Upload Artifact",s?(0,a.jsx)(z,{className:"ml-2 h-4 w-4"}):(0,a.jsx)(C,{className:"ml-2 h-4 w-4"})]}),(s||!l&&0!==e.length)&&(0,a.jsx)("div",{className:"col-span-full mt-2",children:(0,a.jsx)(_,{})})]})};function C(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6"})})}function z(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m18 15-6-6-6 6"})})}},4867:function(e,s,t){t.d(s,{N:function(){return a}}),t(27573),t(81695),t(7653),t(412),t(88280),t(39e3),t(74531),t(74859);let a=e=>(e.displayName||e.name,e)},1070:function(e,s,t){t.d(s,{QL:function(){return l},Xs:function(){return n},nh:function(){return r}});var a=t(30479);let n=e=>s=>s({type:a.Tj,payload:e}),r=e=>s=>s({type:a.tX,payload:e}),l=e=>s=>s({type:a.bk,payload:e})}}]);