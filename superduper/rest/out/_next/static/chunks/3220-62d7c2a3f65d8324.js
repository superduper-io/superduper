"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3220],{83220:function(e,s,a){a.d(s,{Z:function(){return eR}});var t=a(27573),r=a(7653),n=a(13908),l=a(88146),i=a(5772),o=a(93296),d=a(61284),c=a(63130),u=a(36531),m=a(412),p=a(60855);function x(e){let{data:s}=e,a=(0,m.I0)(),n=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels)||[],[l,i]=(0,r.useState)(""),d=async()=>{if(!l){o.ZP.error("Please type a ComputeClass before adding.",{id:"no-input-toast"});return}if(n.includes(l)){o.ZP.error("This ComputeClass is already added! Add a new ComputeClass!");return}try{a((0,p.Lj)([...n,l])),i(""),o.ZP.success("Successfully added!")}catch(e){o.ZP.error("An error occurred. Please reload and try again!")}};return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Add ComputeClass"}),(0,t.jsx)("input",{type:"text",className:"mt-2 w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:l,onChange:e=>{i(e.target.value)},placeholder:"Type ComputeClass here..."}),(0,t.jsx)(u.z,{type:"button",className:"mt-2",onClick:d,children:"Add Now"})]})}var h=a(85688),v=a(4482),g=a(42502),f=a(64303),j=a(4216),y=a(18580);let b=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,y.cn)("w-full caption-bottom text-sm",a),...r})})});b.displayName="Table";let N=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,y.cn)("[&_tr]:border-b",a),...r})});N.displayName="TableHeader";let w=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,y.cn)("[&_tr:last-child]:border-0",a),...r})});w.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,y.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let C=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,y.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});C.displayName="TableRow";let P=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,y.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});P.displayName="TableHead";let L=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,y.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});L.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,y.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var k=a(95042),I=a(12900),_=a(7109),S=a(74859);let A=(e,s)=>[...e].sort((e,a)=>{for(let[t,r]of Object.entries(s)){let s=parseFloat(e.status.capacity[t]),n=parseFloat(a.status.capacity[t]);if(s!==n)return s<n?"asc"===r?-1:1:"asc"===r?1:-1}return 0});function E(e){let{nodegroupsStatus:s}=e,a=(0,m.v9)(e=>e.environment.environmentLoadedValues),l=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),y=(0,m.I0)(),E=(0,m.v9)(e=>e.nodegroups.nodeLoadedValues),R=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),U=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels)||[];(0,r.useEffect)(()=>{let e=async()=>{try{let e=(await n.Z.get("".concat("".concat(S.env.NEXT_PUBLIC_API,"/nodegroups?deployment=").concat(R)),{headers:{Accept:"application/json",Authorization:(0,_.Z)(l),superduper_reverse_proxy:S.env.NEXT_PUBLIC_API||a.NEXT_PUBLIC_API}})).data.items.map(e=>e.spec.extraComputeClass&&e.spec.extraComputeClass.length>0?e:{...e,spec:{...e.spec,extraComputeClass:[...new Set([...e.spec.extraComputeClass||[],"base"].filter(Boolean))]},status:{...e.status,reservation:{...e.status.reservation,state:"Idle"}}});y((0,p.NB)({items:e})),y((0,p.Bw)({items:e}))}catch(e){console.error("Error fetching API data:",e),o.ZP.error("Error fetching Node Groups data")}};E||e()},[]);let[T,B]=(0,r.useState)({numCPUs:"asc",numGPUs:"asc",memoryMB:"asc",ephemeralStorageMB:"asc"}),D=(e,s)=>{B(a=>({...a,[e]:s}))},[,F]=(0,r.useState)(),X=()=>F({}),[O,V]=(0,r.useState)(()=>U.length?U[U.length-1]:"base"),[z,M]=(0,r.useState)(0);(0,r.useEffect)(()=>{U.length&&(0===z?(V("base"),M(e=>e+1)):(V(U[U.length-1]),M(e=>e+1)))},[U]),(0,r.useEffect)(()=>{if(console.log("Sorting nodegroups with sortOrder:",T),null==E?void 0:E.items){let e=A(E.items,T);console.log("Sorted items:",e),y((0,p.NB)({items:e})),X()}},[T]);let W=async(e,s)=>{var a,t;(null==e?void 0:e.spec)||(e.spec={}),(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.extraComputeClass)||(e.spec.extraComputeClass=[]);let r=(null==e?void 0:null===(t=e.spec)||void 0===t?void 0:t.extraComputeClass)||[];if(r.includes(s)){try{for(let a=e.spec.extraComputeClass.length-1;a>=0;a--)e.spec.extraComputeClass[a]===s&&e.spec.extraComputeClass.splice(a,1);e.spec.exclusiveReservation=null,e.status.reservation.state="Idle";let a=E.items.map(s=>s.name===e.name?e:s);y((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is removed from ").concat(e.name,"!"),{icon:"❎",id:"updated-toast"}),X()}catch(e){o.ZP.error("An error occurred",{id:"updated-toast"})}return}try{e.spec.extraComputeClass=[...r,s],e.status.reservation.state="Shared";let a=E.items.map(s=>s.name===e.name?e:s);y((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is added to ").concat(e.name,"!"),{icon:"✅",id:"updated-toast"}),X()}catch(e){o.ZP.error("An error occurred. Please reload and try again!")}},q=async(e,s)=>{var a,t,r;if((null==e?void 0:e.spec)||(e.spec={}),(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.extraComputeClass)||(e.spec.extraComputeClass=[]),(null==e?void 0:null===(t=e.spec)||void 0===t?void 0:t.exclusiveReservation)||(e.spec.exclusiveReservation=null),((null==e?void 0:null===(r=e.spec)||void 0===r?void 0:r.exclusiveReservation)||null)===s){try{e.spec.exclusiveReservation=null,e.status.reservation.state="Shared";let a=E.items.map(s=>s.name===e.name?e:s);y((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is removed from ").concat(e.name,"!"),{icon:"❎",id:"updated-toast"}),X()}catch(e){o.ZP.error("An error occurred",{id:"updated-toast"})}return}try{e.spec.exclusiveReservation=s,e.spec.extraComputeClass=[s],e.status.reservation.state="Exclusive";let a=E.items.map(s=>s.name===e.name?e:s);y((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is exclusively added to ").concat(e.name,"! It will remove the reserved status from all other nodes."),{icon:"✅",id:"updated-toast"}),X()}catch(e){o.ZP.error("An error occurred. Please reload and try again!")}},G=e=>{try{var s;return"string"==typeof(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.exclusiveReservation)&&""!==e.spec.exclusiveReservation.trim()}catch(e){return console.error("Error in reserveDefineDisableOrNot:",e),!1}},Y=(e,s)=>{try{var a,t,r,n,l,i,o,d,c,u;if(null==e?void 0:null===(r=e.spec)||void 0===r?void 0:null===(t=r.extraComputeClass)||void 0===t?void 0:t.includes(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.exclusiveReservation)){if((null==e?void 0:null===(u=e.spec)||void 0===u?void 0:u.exclusiveReservation)===s)return!1;return!0}if((null==e?void 0:null===(n=e.spec)||void 0===n?void 0:n.exclusiveReservation)||!(null==e?void 0:null===(i=e.spec)||void 0===i?void 0:null===(l=i.extraComputeClass)||void 0===l?void 0:l.length))return!0;null==e||null===(c=e.spec)||void 0===c||null===(d=c.extraComputeClass)||void 0===d||d.includes(null==e?void 0:null===(o=e.spec)||void 0===o?void 0:o.exclusiveReservation)}catch(e){}return!1},K=(e,s)=>{try{if(1===U.length){o.ZP.error("At least one ComputeClass is required!",{id:"removed-toast"});return}let a=e.items.map(e=>{let a=JSON.parse(JSON.stringify(e));if(a.spec.exclusiveReservation===s&&(a.spec.exclusiveReservation=null),Array.isArray(a.spec.extraComputeClass)){let e=a.spec.extraComputeClass.indexOf(s);-1!==e&&a.spec.extraComputeClass.splice(e,1)}return a});y((0,p.NB)({items:a})),y((0,p.Lj)([...U.filter(e=>e!==s)])),V(U[U.length-1]),X(),(0,o.ZP)("Successfully removed!",{id:"removed-toast"})}catch(e){console.error("Error in handleRemoveComputeClassAndReservation:",e)}},[J,H]=(0,r.useState)("all"),$=e=>{H(e)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:E?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"-ml-4 mt-4 mb-2 bg-white px-4 py-2 sm:px-4",children:(0,t.jsxs)(f.mQ,{defaultValue:O,value:O,onValueChange:e=>V(e),className:"w-full",children:[(0,t.jsx)(f.dr,{children:(0,t.jsxs)("div",{className:"flex",children:[U.map(e=>(0,t.jsxs)(f.SP,{value:e,children:[e," ",(0,t.jsx)(c.Z,{onClick:()=>{K(E,e)},className:"-mr-1 h-4 w-4","aria-hidden":"true"})]},e)),(0,t.jsxs)(k.J2,{children:[(0,t.jsx)(k.xo,{asChild:!0,children:(0,t.jsx)(u.z,{className:"rounded-full",variant:"primary",children:(0,t.jsx)(Z,{className:"h-5 w-5"})})}),(0,t.jsxs)(k.yk,{className:"w-80",children:[(0,t.jsx)(d.xp,{asChild:!0,children:(0,t.jsx)(c.Z,{className:"ml-auto -mb-2 h-5 w-5 flex text-gray-400 cursor-pointer hover:text-gray-500","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium leading-none",children:"Add ComputeClass"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can select the compute class for the node later."})]}),(0,t.jsx)("div",{className:"grid gap-2",children:(0,t.jsx)(x,{data:E})})]})]})]})]})}),U.map(e=>(0,t.jsx)(f.nU,{value:e,children:(0,t.jsx)("div",{className:"container mx-auto px-0 py-2 w-full",children:(0,t.jsx)("div",{className:"border rounded-lg overflow-x-auto w-full",children:(0,t.jsxs)(b,{children:[(0,t.jsx)(N,{children:(0,t.jsxs)(C,{children:[(0,t.jsx)(P,{className:"text-center px-1",children:(0,t.jsx)(I.C,{variant:"outline",children:"Reserve"})}),(0,t.jsx)(P,{className:"text-center px-1",children:(0,t.jsx)(I.C,{variant:"outline",children:"Exclusive"})}),(0,t.jsx)(P,{children:(0,t.jsx)(I.C,{variant:"outline",children:"Node Name"})}),(0,t.jsx)(P,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"ghost",size:"sm",className:"px-0",children:["CPU",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:T.numCPUs,onValueChange:e=>D("numCPUs",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(P,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"ghost",size:"sm",className:"px-0",children:["GPU",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:T.numGPUs,onValueChange:e=>D("numGPUs",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(P,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"ghost",className:"px-0",size:"sm",children:["RAM",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:T.memoryMB,onValueChange:e=>D("memoryMB",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(P,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{className:"px-0",variant:"ghost",size:"sm",children:["Storage",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:T.ephemeralStorageMB,onValueChange:e=>D("ephemeralStorageMB",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(P,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{className:"px-0",variant:"ghost",size:"sm",children:["State",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:J,onValueChange:e=>$(e),children:[(0,t.jsx)(g.qB,{value:"all",children:"Show All"}),(0,t.jsx)(g.qB,{value:"IDLE",children:"IDLE"}),(0,t.jsx)(g.qB,{value:"SHARED",children:"SHARED"}),(0,t.jsx)(g.qB,{value:"EXCLUSIVE",children:"EXCLUSIVE"})]})})]})})]})}),(0,t.jsx)(w,{children:null==E?void 0:E.items.filter(e=>{let s=J.toLowerCase();return"all"===s||!["exclusive","idle","shared"].includes(s)||e.status.reservation.state.toLowerCase()===s}).map((s,a)=>{var r,n,l,i,o,d,c,u,m,p,x,h,g,f,y,b,N;return(0,t.jsxs)(C,{children:[(0,t.jsx)(L,{className:"text-center",children:(0,t.jsx)(j.X,{id:e,onCheckedChange:()=>{W(s,e)},checked:null==s?void 0:null===(n=s.spec)||void 0===n?void 0:null===(r=n.extraComputeClass)||void 0===r?void 0:r.includes(e),defaultChecked:null==s?void 0:null===(i=s.spec)||void 0===i?void 0:null===(l=i.extraComputeClass)||void 0===l?void 0:l.includes(e),disabled:G(s)})}),(0,t.jsx)(L,{className:"text-center",children:(0,t.jsx)(j.X,{id:e+e,onCheckedChange:()=>{q(s,e)},checked:(null==s?void 0:null===(o=s.spec)||void 0===o?void 0:o.exclusiveReservation)===e,defaultChecked:(null==s?void 0:null===(d=s.spec)||void 0===d?void 0:d.exclusiveReservation)===e,disabled:Y(s,e)})}),(0,t.jsx)(L,{children:null==s?void 0:s.name.replace(/\.compute\.internal/g,"")}),(0,t.jsx)(L,{className:"text-center",children:null==s?void 0:null===(u=s.status)||void 0===u?void 0:null===(c=u.capacity)||void 0===c?void 0:c.numCPUs}),(0,t.jsx)(L,{className:"text-center",children:null==s?void 0:null===(p=s.status)||void 0===p?void 0:null===(m=p.capacity)||void 0===m?void 0:m.numGPUs}),(0,t.jsxs)(L,{className:"text-center",children:[null==s?void 0:null===(h=s.status)||void 0===h?void 0:null===(x=h.capacity)||void 0===x?void 0:x.memoryMB,"MB"]}),(0,t.jsxs)(L,{className:"text-center",children:[(parseInt(String(null==s?void 0:null===(f=s.status)||void 0===f?void 0:null===(g=f.capacity)||void 0===g?void 0:g.ephemeralStorageMB),10)/1024).toFixed(2),"GB"]}),(0,t.jsx)(L,{className:"text-center",children:(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("span",{className:"",children:(null==s?void 0:null===(y=s.spec)||void 0===y?void 0:y.exclusiveReservation)?(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-black px-2 py-1 text-xs font-medium text-white ring-1 ring-inset ring-black/20",children:[(0,t.jsx)(v.pn,{children:(0,t.jsxs)(v.u,{children:[(0,t.jsx)(v.aJ,{children:"EXCLUSIVE"}),(0,t.jsx)(v._v,{children:(0,t.jsx)("p",{children:"The whole node is dedicated to a single computeclass."})})]})}),(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-white dark:text-white flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"})})})})]}):(null==s?void 0:null===(N=s.spec)||void 0===N?void 0:null===(b=N.extraComputeClass)||void 0===b?void 0:b.length)?(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20",children:[(0,t.jsx)(v.pn,{children:(0,t.jsxs)(v.u,{children:[(0,t.jsx)(v.aJ,{children:"SHARED"}),(0,t.jsx)(v._v,{children:(0,t.jsx)("p",{children:"The node has been allocated to one or more computeclasses."})})]})}),(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-yellow-500 dark:text-yellow-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})})})})]}):(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:[(0,t.jsx)(v.pn,{children:(0,t.jsxs)(v.u,{children:[(0,t.jsx)(v.aJ,{children:"IDLE"}),(0,t.jsx)(v._v,{children:(0,t.jsx)("p",{children:"The node is not allocated to any jobs and is available for use."})})]})}),(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsxs)("div",{role:"status",children:[(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-green-500 dark:text-green-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}),(0,t.jsx)("span",{className:"sr-only",children:"..."})]})})]})})})})]},a)})})]})})})},e))]})})}):(0,t.jsx)("div",{className:"mt-2 ml-4",children:(0,t.jsx)(i.Z,{})})})})}function Z(e){return(0,t.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M5 12h14"}),(0,t.jsx)("path",{d:"M12 5v14"})]})}var R=a(87420),U=a(34611),T=a(75355),B=a.n(T),D=a(80923),F=a(34209),X=a(23611),O=a(2187),V=e=>{let{workerdata:s}=e,a=(0,m.I0)(),n=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),[l,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)({groupName:s.groupName||"",computeClass:s.computeClass||"",replicaCount:s.replicaCount||0}),u=(0,r.useRef)(d);(0,r.useEffect)(()=>{B()(d,u.current)||(h(),u.current=d)},[d,l,s]);let p=n.items.find(e=>"ray"===e.name),x=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),h=()=>{console.log("submittedData RAY:",d);try{if(""===d.groupName&&""===d.computeClass&&0===d.replicaCount){o.ZP.error("Please update the Ray Worker parameters to save changes!");return}if(""!==d.groupName){let e={...p,spec:{...p.spec,rayParams:{...p.spec.rayParams,workers:p.spec.rayParams.workers.map(e=>e.groupName===s.groupName||""===e.groupName?{groupName:d.groupName,computeClass:d.computeClass,replicaCount:d.replicaCount}:e)}}},t=n.items.map(s=>"ray"===s.name?e:s);console.log("Updated data:",t),a((0,U.Gi)({items:[...t]}))}o.ZP.success("Ray Worker Params Updated!",{id:"unique-toast-id"})}catch(e){o.ZP.error("Something is wrong! Please try again.",{id:"rayWorkerParams"})}},v=e=>{let{name:s,value:a}=e.target;c(e=>({...e,[s]:a}))},g=e=>{let s=parseInt(d.replicaCount,10)||0;c(a=>({...a,[e]:Math.max(s-1,1)}))},f=e=>{let s=parseInt(d.replicaCount,10)||0;c(a=>({...a,[e]:s+1}))};return(0,t.jsx)(t.Fragment,{children:l&&(0,t.jsxs)("div",{className:"mt-4 pt-4 rounded-2xl border-4 border-dashed border-gray-900/25 px-6 py-10",children:[(0,t.jsx)("div",{className:"space-y-12",children:(0,t.jsx)("div",{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Worker Group"}),(0,t.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,t.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 outline ring-2 ring-indigo-500",onClick:()=>{try{if(""===s.groupName&&""===s.computeClass&&0===s.replicaCount){let e={...p,spec:{...p.spec,rayParams:{...p.spec.rayParams,workers:p.spec.rayParams.workers.slice(0,-1)}}},s=n.items.map(s=>"ray"===s.name?e:s);a((0,U.Gi)({items:s})),i(!1),o.ZP.success("Removed the worker!",{id:"rayWorkerParams"})}else if(1===p.spec.rayParams.workers.length)o.ZP.error("You cannot delete the last worker!",{id:"rayWorkerParams"});else if(""!==s.groupName){let e=p.spec.rayParams.workers.filter(e=>e.groupName!==s.groupName),t={...p,spec:{...p.spec,rayParams:{...p.spec.rayParams,workers:[...e]}}},r=n.items.map(e=>"ray"===e.name?t:e);a((0,U.Gi)({items:r})),i(!1),o.ZP.success("".concat(s.groupName," removed!"),{id:"rayWorkerParams"})}}catch(e){o.ZP.error("Something is wrong! Please reload and try again.",{id:"rayWorkerParams"})}},children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)(F.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]})})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(D.Z,{label:"Group Name",popoverheader:"Name of the Group",popovercontent:(0,t.jsx)("p",{children:"Please provide the name of your Ray worker group. It is the specific group name you want to add."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"groupName",value:d.groupName,onChange:v,type:"text",placeholder:"Type your group name",autoComplete:"groupName",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(D.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run in a particular node! If you want a custom label first add labels in a node!"})}),(0,t.jsx)("div",{className:"mt-2",children:x&&(0,t.jsx)("select",{name:"computeClass",value:d.computeClass,onChange:v,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[...x].reverse().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(D.Z,{label:"Number of workers",popoverheader:"Number of workers",popovercontent:(0,t.jsx)("p",{children:"Please provide the number of workers. It represents the number of replicas for your database."})}),(0,t.jsxs)("div",{className:"flex items-center justify-left mt-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>g("replicaCount"),className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mr-4",children:(0,t.jsx)(X.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,t.jsx)("input",{disabled:!0,name:"replicaCount",value:d.replicaCount,onChange:v,className:"w-16 text-center block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("button",{type:"button",onClick:()=>f("replicaCount"),className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ml-4",children:(0,t.jsx)(O.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})]})})]})})},z=e=>{var s,a,n,l,i,d,c,u,p,x,h,v,g;let{data:f}=e,j=(0,m.I0)(),y=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),b=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),[N,w]=(0,r.useState)({computeClass:(null==f?void 0:null===(n=f.spec)||void 0===n?void 0:null===(a=n.rayParams)||void 0===a?void 0:null===(s=a.head)||void 0===s?void 0:s.computeClass)||"",name:(null==f?void 0:null===(d=f.spec)||void 0===d?void 0:null===(i=d.rayParams)||void 0===i?void 0:null===(l=i.image)||void 0===l?void 0:l.name)||"",tag:(null==f?void 0:null===(p=f.spec)||void 0===p?void 0:null===(u=p.rayParams)||void 0===u?void 0:null===(c=u.image)||void 0===c?void 0:c.tag)||""}),C=(0,r.useRef)(N);(0,r.useEffect)(()=>{B()(N,C.current)||(P(),C.current=N)},[N]);let P=()=>{let{name:e,tag:s,computeClass:a}=N;f.spec||(f.spec={}),f.spec.rayParams||(f.spec.rayParams={}),f.spec.rayParams.head||(f.spec.rayParams.head={}),f.spec.rayParams.image.name=e,f.spec.rayParams.image.tag=s,f.spec.rayParams.head.computeClass=a;let t=y.items.map(e=>e.name===f.name?f:e);j((0,U.Gi)({items:t})),o.ZP.success("Ray Parameters Updated!",{id:"rayParams"})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mt-4 pt-4 rounded-2xl border-4 border-dashed border-gray-900/25 px-6 py-10",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Ray Head"}),b&&(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(D.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run in a specific node! For custom labels, add them to a node first."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("select",{name:"computeClass",value:N.computeClass,onChange:e=>{let{name:s,value:a}=e.target;w(e=>({...e,[s]:a}))},className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[...b].reverse().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})})]}),(null==f?void 0:null===(h=f.spec)||void 0===h?void 0:null===(x=h.rayParams)||void 0===x?void 0:x.workers)&&(null==f?void 0:null===(g=f.spec)||void 0===g?void 0:null===(v=g.rayParams)||void 0===v?void 0:v.workers.map((e,s)=>(0,t.jsx)(V,{workerdata:e},s))),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"mt-6 flex items-center justify-center gap-x-6",children:(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("button",{type:"button",onClick:()=>{f.spec||(f.spec={}),f.spec.rayParams||(f.spec.rayParams={}),f.spec.rayParams.workers||(f.spec.rayParams.workers=[]),f.spec.rayParams.workers.push({groupName:"workergroup_".concat(f.spec.rayParams.workers.length+1),computeClass:b.length>0?b[b.length-1]:"",replicaCount:1});let e=y.items.map(e=>e.name===f.name?f:e);j((0,U.Gi)({items:e}))},className:"rounded-full bg-indigo-600 p-2 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:(0,t.jsx)(O.Z,{className:"h-5 w-5","aria-hidden":"true"})})})})}),(0,t.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,t.jsx)("div",{className:"mt-0 ml-8 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsx)("div",{className:"sm:col-span-5",children:(0,t.jsx)(D.Z,{label:"Add Ray Workers",popoverheader:"Add Ray Workers",popovercontent:(0,t.jsx)("p",{children:"Please click on the plus button to add ray workers. You can add multiple ray workers."})})})})})]})},M=e=>{var s,a;let{data:n,paramsName:l}=e;if(n.name.includes("ray"))return(0,t.jsx)(z,{data:n});let i=(0,m.I0)(),d=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),c=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),[u,p]=(0,r.useState)({computeClass:(null==n?void 0:null===(a=n.spec)||void 0===a?void 0:null===(s=a[l])||void 0===s?void 0:s.computeClass)||""}),x=(0,r.useRef)(u);(0,r.useEffect)(()=>{B()(u,x.current)||(h(),x.current=u)},[u]);let h=()=>{try{let{computeClass:e}=u;n.spec||(n.spec={}),n.spec[l]||(n.spec[l]={}),n.spec[l].computeClass=e;let s=c.items.map(e=>e.name===n.name?n:e);i((0,U.Gi)({items:s})),o.ZP.success("Parameters Updated!",{id:"paramsName"})}catch(e){o.ZP.error("Something went wrong! Please try again.",{id:"paramsName"})}};return d?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(D.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run on a specific node! For custom labels, add them to a node first."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("select",{name:"computeClass",value:u.computeClass,onChange:e=>{let{name:s,value:a}=e.target;p(e=>({...e,[s]:a}))},className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[...d].reverse().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})})}):null},W=e=>{let{deployment:s,icon:a,description:r,children:n}=e;return(0,t.jsxs)("li",{className:"relative flex items-center space-x-4 py-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,t.jsx)(a,{className:"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600","aria-hidden":"true"}),(0,t.jsx)("h2",{className:"min-w-0 text-sm font-semibold leading-6 text-gray-900",children:(0,t.jsx)("a",{href:"#",className:"flex gap-x-2",children:(0,t.jsxs)("span",{className:"whitespace-nowrap text-gray-900",children:[s.name,(0,t.jsx)("span",{className:"text-base text-rose-500",children:"*️"})]})})})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400",children:[(0,t.jsx)("p",{className:"whitespace-nowrap truncate",children:r}),(0,t.jsx)("br",{})]})]}),n]},s.name)},q=a(70694),G=a(96764),Y=e=>{let{deployment:s,children:a}=e;return(0,t.jsxs)(q.yo,{children:[(0,t.jsx)(q.aM,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"outline",children:["Edit Params"," ",(0,t.jsx)(G.Z,{className:"ml-2 -mr-0.5 h-5 w-5 flex-none text-gray-400","aria-hidden":"true"})]})}),(0,t.jsxs)(q.ue,{className:"overflow-auto",children:[(0,t.jsxs)(q.Tu,{children:[(0,t.jsxs)(q.bC,{children:["Edit ",s.name," values"]}),(0,t.jsx)(q.Ei,{children:"You can update these values and click update. These are current default values. If there is no value to update then it will be empty."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4 overflow-visible",children:a})]})]})},K=a(74859);let J=e=>e.items.filter(e=>{if("true"===K.env.NEXT_PUBLIC_SNOWFLAKE){var s,a;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.category)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0}).sort((e,s)=>e.name<s.name?-1:e.name>s.name?1:0).map(e=>(0,t.jsx)(W,{deployment:e,icon:(null==e?void 0:e.icon)||R.Z,description:(null==e?void 0:e.description)||"".concat(e.name," is a service of superduper required to run the application."),children:(0,t.jsx)(Y,{deployment:e,children:(0,t.jsx)(M,{data:e,paramsName:"".concat(e.name,"Params")})})},e.id));var H=()=>{let e=(0,m.v9)(e=>e.environment.environmentLoadedValues),s=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),a=(0,m.I0)(),l=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),o=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),d=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name);return((0,r.useEffect)(()=>{let t=async()=>{try{let t=await n.Z.get("".concat("".concat(K.env.NEXT_PUBLIC_API,"/charts?deployment=").concat(d)),{headers:{Accept:"application/json",Authorization:(0,_.Z)(s),superduper_reverse_proxy:K.env.NEXT_PUBLIC_API||e.NEXT_PUBLIC_API}});console.log("Charts API data:",t.data),a((0,U.Gi)(t.data))}catch(e){console.error("Error fetching Services API data")}};o||t()},[o,a]),o||l)?(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"bg-white px-2 py-5 sm:px-2",children:(0,t.jsxs)("ul",{role:"list",className:"divide-y divide-red/5",children:[o&&J(o)," "]})})}):(0,t.jsxs)("div",{className:"mt-2 ml-4",children:[(0,t.jsx)(i.Z,{})," "]})},$=a(59260),Q=a(33453),ee=a(49904);let es=e=>s=>s({type:ee.s,payload:e});var ea=a(68321),et=a(9551),er=a(72940),en=e=>{var s,a,n,l,i,d,c,u,p,x,h,v,g;let{data:f}=e,j=(0,m.I0)(),y=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),[b,N]=(0,r.useState)(!1),w=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),[C,P]=(0,r.useState)({database:(null==f?void 0:null===(n=f.spec)||void 0===n?void 0:null===(a=n.mongodbParams)||void 0===a?void 0:null===(s=a.auth)||void 0===s?void 0:s.database)||"",username:(null==f?void 0:null===(d=f.spec)||void 0===d?void 0:null===(i=d.mongodbParams)||void 0===i?void 0:null===(l=i.auth)||void 0===l?void 0:l.username)||"",password:(null==f?void 0:null===(p=f.spec)||void 0===p?void 0:null===(u=p.mongodbParams)||void 0===u?void 0:null===(c=u.auth)||void 0===c?void 0:c.password)||"",replicaCount:(null==f?void 0:null===(h=f.spec)||void 0===h?void 0:null===(x=h.mongodbParams)||void 0===x?void 0:x.replicaCount)||0,computeClass:(null==f?void 0:null===(g=f.spec)||void 0===g?void 0:null===(v=g.mongodbParams)||void 0===v?void 0:v.computeClass)||""}),L=(0,r.useRef)(C),k=(0,r.useRef)(y);(0,r.useEffect)(()=>{B()(C,L.current)&&B()(y,k.current)||(console.log(),I(),L.current=C,k.current=y)},[C,y,ea.V]);let I=()=>{try{let{database:e,username:s,password:a,replicaCount:t,computeClass:r}=C;f.spec.mongodbParams.auth.database=e,f.spec.mongodbParams.auth.username=s,f.spec.mongodbParams.auth.password=a,f.spec.mongodbParams.replicaCount=t,f.spec.mongodbParams.computeClass=r;let n=y.items.map(e=>e.name===f.name?f:e);j((0,U.Gi)({items:n})),o.ZP.success("MongoDB Params Updated!",{id:"unique-toast-id"})}catch(e){o.ZP.error("Something is wrong! Please try again.")}},_=e=>{let{name:s,value:a}=e.target;P(e=>({...e,[s]:a}))};return(0,t.jsxs)("div",{className:"overflow-visible",children:[w&&y&&(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run in a particular node! If you want a custom label first add labels in a node!"})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("select",{name:"computeClass",value:C.computeClass,onChange:_,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,t.jsx)("option",{value:"",children:"Select ComputeClass"}),[...w].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Database Name",popoverheader:"Name of the Database",popovercontent:(0,t.jsx)("p",{children:"Please provide the name of your database. It is the specific database you want to connect to."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"database",value:C.database,onChange:_,type:"text",placeholder:"Type your database name",autoComplete:"database-name",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Username",popoverheader:"Database Username",popovercontent:(0,t.jsx)("p",{children:"Please provide your username here. It is used to connect to your database from your cluster."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"username",value:C.username,onChange:_,type:"text",placeholder:"Type your database username",autoComplete:"username",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Password",popoverheader:"Database Password",popovercontent:(0,t.jsx)("p",{children:"Please provide your password here. It is used to authenticate connections to your database."})}),(0,t.jsxs)("div",{className:"mt-2 relative",children:[(0,t.jsx)("input",{id:"password",value:C.password,onChange:_,type:b?"text":"password",placeholder:"Type your database password",autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pr-10"}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>N(!b),className:"text-gray-400 hover:text-gray-500",children:b?(0,t.jsx)(et.Z,{className:"h-5 w-5","aria-hidden":"true"}):(0,t.jsx)(er.Z,{className:"h-5 w-5","aria-hidden":"true"})})})]})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Replica Count",popoverheader:"Replica Count",popovercontent:(0,t.jsx)("p",{children:"Please provide the replica count. It represents the number of replicas for your database."})}),(0,t.jsxs)("div",{className:"flex items-center justify-left mt-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{P(e=>({...e,replicaCount:Math.max(e.replicaCount-1,1)}))},className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mr-4",children:(0,t.jsx)(X.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,t.jsx)("input",{disabled:!0,name:"replicaCount",value:C.replicaCount,onChange:_,type:"number",className:"w-16 text-center block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("button",{type:"button",onClick:()=>{P(e=>({...e,replicaCount:e.replicaCount+1}))},className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ml-4",children:(0,t.jsx)(O.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})]})})]})},el=()=>{let e=(0,m.I0)(),s=(0,m.v9)(e=>e.deployment.deploymentLoadedValues),a=a=>{let{name:t,value:r}=a.target;e(es({...s,databackendType:"haveDatabase",[t]:r}))};return(0,t.jsx)(t.Fragment,{children:s?(0,t.jsx)("div",{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Database Connection URI",popoverheader:"Database Connection URI",popovercontent:(0,t.jsx)("p",{children:"Here you put the connection string to your database. So, that we can connect to it. It's the full connection string."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"database_uri",name:"databaseURI",type:"text",placeholder:"<your-database-uri>",autoComplete:"database_uri",value:s.databaseURI,onChange:a,className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Metadata Store URI",popoverheader:"Metadata Store URI",popovercontent:(0,t.jsx)("p",{children:"Here you put a connection string of your database. So, that it could be used as metadata store. Otherwise, you can use the same as metadata store."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"metadata-store-uri",name:"metadataStoreURI",type:"text",placeholder:"<your-database-uri>",autoComplete:"metadata-store-uri",value:s.metadataStoreURI,onChange:a,className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Artifact Store URI",popoverheader:"Artifact Store URI",popovercontent:(0,t.jsx)("p",{children:"Artifact Store is a place where we store the artifacts. You can use the same as artifact store."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"artifact_database_uri",name:"artifactStoreURI",type:"text",placeholder:"<your-database-uri>",autoComplete:"artifact_database_uri",value:s.artifactStoreURI,onChange:a,className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})})]})}):(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(i.Z,{})})})};function ei(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter(Boolean).join(" ")}var eo=()=>{var e;let s=(0,m.I0)(),a=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),n=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),l=(0,m.v9)(e=>e.deployment.deploymentLoadedValues),[o,d]=(0,r.useState)("deployDatabase"),[c,u]=(0,r.useState)({databaseURI:"",databaseType:"",metadataStoreURI:"",artifactStoreURI:""});return(0,r.useEffect)(()=>{s(es({databackendType:o,...c}))},[c,o,s,a]),(0,t.jsx)(t.Fragment,{children:l&&n?(0,t.jsxs)("div",{children:[(0,t.jsxs)($.E,{value:l.databackendType,onChange:d,children:[(0,t.jsx)($.E.Label,{className:"text-base font-semibold leading-6 text-gray-900"}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4",children:[{id:"deployDatabase",title:"Deploy a database",description:"We can deploy a database for you, and you can start using it right away.",users:"Deploy database",disabled:!1,active:!0},{id:"haveDatabase",title:"Connect existing database",description:"If you have a database, select this option and add the uri below.",users:"Host existing data",disabled:!1,active:!1}].map(e=>(0,t.jsx)($.E.Option,{disabled:e.disabled,value:e.id,className:e=>{let{checked:s,active:a}=e;return ei(s?"border-transparent":"border-gray-300",a?"border-indigo-600 ring-2 ring-indigo-600":"","relative flex cursor-pointer rounded-lg border bg-white p-4 shadow-sm focus:outline-none")},children:s=>{let{checked:a,active:r}=s;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex flex-1",children:(0,t.jsxs)("span",{className:"flex flex-col",children:[(0,t.jsx)($.E.Label,{as:"span",className:"block text-sm font-medium text-gray-900",children:e.title}),(0,t.jsx)($.E.Description,{as:"span",className:"mt-1 flex items-center text-sm text-gray-500",children:e.description}),(0,t.jsx)($.E.Description,{as:"span",className:"mt-6 text-sm font-medium text-gray-900",children:e.users})]})}),(0,t.jsx)(Q.Z,{className:ei(a?"":"invisible","h-5 w-5 text-indigo-600"),"aria-hidden":"true"}),(0,t.jsx)("span",{className:ei(r?"border":"border-2",a?"border-indigo-600":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"),"aria-hidden":"true"})]})}},e.id))})]}),(0,t.jsx)("br",{}),"deployDatabase"===o&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)("label",{htmlFor:"database-type",className:"block text-sm font-medium leading-6 text-gray-900",children:"Select Database"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("select",{id:"database-type",name:"databaseType",autoComplete:"database-type",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",value:c.databaseType,onChange:e=>{let{name:s,value:a}=e.target;u(e=>({...e,[s]:a}))},children:[(0,t.jsx)("option",{value:"",children:"Select Database"}),(null==a?void 0:a.items)&&(null==a?void 0:a.items.filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)==="databases"}).map(e=>e.name).map(e=>(0,t.jsx)("option",{value:e,children:e.toLowerCase()},e)))]})}),a&&"mongodb"==c.databaseType&&(null==a?void 0:null===(e=a.items)||void 0===e?void 0:e.map((e,s)=>(0,t.jsx)(t.Fragment,{children:"mongodb"==e.name&&(0,t.jsx)(en,{data:e},s)})))]})}),"haveDatabase"===o&&(0,t.jsx)(el,{})]}):(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(i.Z,{})})})},ed=a(64520),ec=a(81695),eu=a(72513),em=a(98348),ep=e=>{var s,a;let{data:n}=e,l=(0,m.I0)(),i=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),o=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),[d,c]=(0,r.useState)({computeClass:(null==n?void 0:null===(a=n.spec)||void 0===a?void 0:null===(s=a.monitoringParams)||void 0===s?void 0:s.computeClass)||""}),u=(0,r.useRef)(d);(0,r.useEffect)(()=>{B()(d,u.current)||(p(),u.current=d)},[d]),(0,m.v9)(e=>e.nodegroups.nodeLoadedValues);let p=()=>{if(i&&i.items){var e,s;let a=(e=i.items,s=d.computeClass,function e(a){if(Array.isArray(a))return a.map(s=>e(s));if("object"!=typeof a||null===a)return a;for(let t in a)a[t]=e(a[t]),"computeClass"===t&&(a[t]=s);return a}(e));l((0,U.Gi)({items:a}))}else console.error("chartsgroups or chartsgroups.items is undefined")};return(0,t.jsx)("div",{children:o&&(0,t.jsx)("div",{className:"mt-1 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Select Default ComputeClass for services",popoverheader:"Select Default ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the default compute class for all of the services and databases. If you have workloads that have unique hardware requirements, such as performing machine learning or AI tasks, needing specific CPU platforms and architecture, or needing performance isolation among users, Superduper offers compute classes. These compute classes are a curated subset of the infrastructure machine types. You can assign a compute class to a workload to ensure that it runs on the right type of machine."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("select",{name:"computeClass",value:d.computeClass,onChange:e=>{let{name:s,value:a}=e.target;c(e=>({...e,[s]:a}))},className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,t.jsx)("option",{value:"",children:"Select Default ComputeClass for services"},"defaults"),o&&o.length>0?[...o].map(e=>e&&(0,t.jsx)("option",{value:e,children:e},e)):[(0,t.jsx)("option",{value:"default",children:"default"},"default")]]})})]})})})},ex=a(45696),eh=a.n(ex);function ev(e){let s=new Set;return e&&Array.isArray(e.items)?(e.items.forEach(e=>{var a,t,r,n,l,i;let{spec:o={}}=e;if(null===(a=o.jupyterhubParams)||void 0===a?void 0:a.image){let{name:e,tag:a}=o.jupyterhubParams.image;s.add("".concat(e,":").concat(a))}if(null===(t=o.restParams)||void 0===t?void 0:t.image){let{name:e,tag:a}=o.restParams.image;s.add("".concat(e,":").concat(a))}if(null===(r=o.vectorsearchParams)||void 0===r?void 0:r.image){let{name:e,tag:a}=o.vectorsearchParams.image;s.add("".concat(e,":").concat(a))}if(null===(n=o.rayParams)||void 0===n?void 0:n.image){let{name:e,tag:a}=o.rayParams.image;s.add("".concat(e,":").concat(a))}if(null===(l=o.cdcParams)||void 0===l?void 0:l.image){let{name:e,tag:a}=o.cdcParams.image;s.add("".concat(e,":").concat(a))}if(null===(i=o.schedulerParams)||void 0===i?void 0:i.image){let{name:e,tag:a}=o.schedulerParams.image;s.add("".concat(e,":").concat(a))}}),Array.from(s)):(console.warn("Data is undefined or data.items is not an array"),[])}var eg=e=>{var s,a;let{data:n}=e,l=(0,m.I0)(),i=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),d=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),[c,u]=(0,r.useState)({computeClass:(null==n?void 0:null===(a=n.spec)||void 0===a?void 0:null===(s=a.monitoringParams)||void 0===s?void 0:s.computeClass)||""});return(0,t.jsx)("div",{children:d&&(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(D.Z,{label:"Update Default Image",popoverheader:"Update Default Image",popovercontent:(0,t.jsx)("p",{children:"Please select the default Docker image for all services. All our services use the same Docker image."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"imageandtag",value:ev(i)&&ev(i).length>0?ev(i)[0]:"Enter image and tag",onChange:e=>{u(s=>({...s,[e.target.name]:e.target.value}));try{let{value:s}=e.target,{name:a,tag:t}=function(e){let s=e.indexOf(":");return -1===s?{name:e,tag:"latest"}:{name:e.substring(0,s),tag:e.substring(s+1)}}(s),r=i.items.map(e=>{for(let s of Object.keys(e.spec))s.endsWith("Params")&&e.spec[s].image&&(e.spec[s].image.name=a,e.spec[s].image.tag=t);return e});console.log("Updated items:",r),l((0,U.Gi)({items:r})),o.ZP.success("Image parameters updated successfully!",{id:"updateImageParams"})}catch(e){o.ZP.error("Something went wrong! Please try again.",{id:"updateImageParamsError"}),console.error("Update failed:",e)}},className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:ev(i)&&ev(i).length>0?ev(i)[0]:"Enter image and tag"})})]})})})},ef=a(13333),ej=a(95417),ey=a(37727),eb=a(82869);let eN=e=>s=>s({type:eb.I,payload:e});var ew=a(74859),eC=e=>{let{data:s}=e,a=(0,m.I0)(),[n,l]=(0,r.useState)([]),i=(0,r.useRef)(null),d=(0,m.v9)(e=>e.extraEnvVars),c=(e,s,t)=>{let r=[...d];r[e][s]=t.target.value,a(eN(eh()(r)))};(0,r.useEffect)(()=>{var e;let s=[...d],t=((e=ew.env.NEXT_PUBLIC_API_DEFAULT_ENV)?e.split(",").map(e=>e.trim()):(console.error("NEXT_PUBLIC_API_DEFAULT_ENV is not defined or empty."),[])).filter(e=>!s.some(s=>s.name===e));t.length>0&&(t.forEach(e=>{s.push({name:e,value:""})}),a(eN(eh()(s))))},[a,d]);let p=e=>{let s=d.filter((s,a)=>a!==e);a(eN(eh()(s))),l(n.filter((s,a)=>a!==e))},x=e=>{l(s=>{let a=[...s];return a[e]=!a[e],a})};return d&&Array.isArray(d)?(0,t.jsxs)("div",{children:[d.map((e,s)=>(0,t.jsx)("div",{className:"relative mt-5 grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-8",children:(0,t.jsxs)("div",{className:"sm:col-span-1 grid grid-cols-2 gap-x-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(D.Z,{label:"Key",popoverheader:"Key",popovercontent:(0,t.jsx)("p",{children:"Enter the key for the environment variable."})}),(0,t.jsx)("input",{name:"name-".concat(s),value:e.name,onChange:e=>c(s,"name",e),className:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter key"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(D.Z,{label:"Value",popoverheader:"Value",popovercontent:(0,t.jsx)("p",{children:"Enter the value for the environment variable."})}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-4 w-3xl max-w-md",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{name:"value-".concat(s),value:e.value,type:n[s]?"text":"password",onChange:e=>c(s,"value",e),placeholder:"Enter value",className:"block w-3xl rounded-md border-0 py-1.5 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>x(s),children:n[s]?(0,t.jsx)(et.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,t.jsx)(er.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),(0,t.jsx)(u.z,{variant:"ghost",onClick:()=>p(s),className:"bg-black text-white hover:bg-red-500 hover:text-white dark:hover:bg-red-900 px-2",children:(0,t.jsx)(ef.Z,{className:"h-4 w-4"})})]})]})]})},s)),(0,t.jsxs)("div",{className:"flex space-x-4 mt-4",children:[(0,t.jsxs)(u.z,{onClick:()=>{a(eN(eh()([...d,{name:"",value:""}]))),l([...n,!1])},children:[(0,t.jsx)(ej.Z,{className:"mr-2 h-4 w-4"}),"Add Secret"]}),(0,t.jsxs)(u.z,{onClick:()=>i.current.click(),children:[(0,t.jsx)(ey.Z,{className:"mr-2 h-4 w-4"}),"Upload Secret File"]}),(0,t.jsx)("input",{ref:i,type:"file",onChange:e=>{let s=e.target.files[0];try{if(s){let e=new FileReader;e.onload=e=>{let s=e.target.result.split("\n").map(e=>{let[s,a]=e.split("=").map(e=>e.trim());return{name:s,value:a}}).filter(e=>e.name&&e.value);a(eN(eh()([...d,...s]))),l(e=>[...e,...Array(s.length).fill(!1)])},e.readAsText(s)}}catch(e){console.error(e),o.ZP.error("Failed to parse the file. Please try again with .env or .txt format.")}},style:{display:"none"}})]})]}):null},eP=a(76741),eL=a(11952);let ek=e=>s=>s({type:eL.e,payload:e});var eI=a(74859);function e_(e){try{if(e&&Array.isArray(e.items))return e.items.map(e=>e.status.uid);if(e&&(null==e?void 0:e.status)&&(null==e?void 0:e.status.uid))return[e.status.uid]}catch(e){console.error("Error processing payload:",e)}return[]}var eS=e=>{let{data:s}=e,a=(0,m.I0)(),[l,i]=(0,r.useState)([]),d=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),c=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[p,x]=(0,r.useState)([]),h=(0,m.v9)(e=>e.environment.environmentLoadedValues),v=(0,r.useRef)(null),g=(0,m.v9)(e=>e.extraEnvVars),f=(0,m.v9)(e=>e.secrets),j=(e,s,t)=>{let r=[...g];r[e][s]=t.target.value,a(eN(eh()(r)))};(0,r.useEffect)(()=>{function e(e){let s=[...g],t=e.filter(e=>!s.some(s=>s.name===e));t.length>0&&(t.forEach(e=>{s.push({name:e,value:""})}),a(eN(eh()(s))))}let s=s=>(console.error("Error occurred:",s),console.log("Using fallback logic. Returning an empty array."),e([]),[]),t=async()=>{try{let s="".concat(eI.env.NEXT_PUBLIC_API,"/secrets?deployment=").concat(d),t=await n.Z.get(s,{headers:{Accept:"application/json",Authorization:(0,_.Z)(c),superduper_reverse_proxy:eI.env.NEXT_PUBLIC_API||h.NEXT_PUBLIC_API}});console.log("Secrets retrieved successfully:",t.data);let r=function(e){try{if(e&&Array.isArray(e.items))return e.items.map(e=>e.name)}catch(e){console.error("Error processing payload:",e)}return[]}(t.data),l=e_(t.data);return a(ek([l])),x(r),e(r),r}catch(e){return s(e)}};(async()=>{console.log("Final secrets array:",await t())})()},[]);let y=async e=>{try{let s={headers:{Accept:"application/json",Authorization:(0,_.Z)(c),superduper_reverse_proxy:eI.env.NEXT_PUBLIC_API||h.NEXT_PUBLIC_API}},t=g[e];if(t){let e="".concat(eI.env.NEXT_PUBLIC_API,"/secrets/").concat(t.name,"?deployment=").concat(d);try{let a=await n.Z.delete(e,s);console.log("API Response:",a.data)}catch(e){console.error("Failed to delete secret ".concat(t.name,":"),e),o.ZP.error("Error removing secret: ".concat(t.name));return}}let r=g.filter((s,a)=>a!==e),u=eh()(r);a(eN(u)),i(l.filter((s,a)=>a!==e))}catch(e){console.error("Unexpected error in removing secrets:",e),o.ZP.error("An unexpected error occurred. Please try again.")}},b=e=>{i(s=>{let a=[...s];return a[e]=!a[e],a})},N=async()=>{try{let e=g||[];console.log("Updated environment variables:",e);let s={headers:{Accept:"application/json",Authorization:(0,_.Z)(c),superduper_reverse_proxy:eI.env.NEXT_PUBLIC_API||h.NEXT_PUBLIC_API}};for(let t of e){if(!t.value||"hidden"===t.value){console.log("Skipping variable: ".concat(t.name," with value: ").concat(t.value));continue}if(console.log("Processing variable: ".concat(t.name," with value: ").concat(t.value)),p.includes(t.name))try{let e="".concat(eI.env.NEXT_PUBLIC_API,"/secrets/").concat(t.name,"?deployment=").concat(d),r={name:t.name,spec:{stringData:{[t.name]:t.value},type:"Opaque"}},l=await n.Z.put(e,r,s);console.log("Response:",l.data);let i=e_(l.data);a(ek([...f[0],...i])),console.log("Response:",l.data)}catch(e){console.error("Error updating secret:",e),o.ZP.error("Failed to update secret: ".concat(t.name))}else try{let e="".concat(eI.env.NEXT_PUBLIC_API,"/secrets?deployment=").concat(d),r={name:t.name,spec:{stringData:{[t.name]:t.value},type:"Opaque"}},l=await n.Z.post(e,r,s);console.log("Response:",l.data);let i=e_(l.data);a(ek([...f[0],...i])),x([...p,t.name]),console.log("Response:",l.data)}catch(e){console.error("Error creating secret:",e),o.ZP.error("Failed to create secret: ".concat(t.name))}}o.ZP.success("Environment variables saved successfully!")}catch(e){console.error("Error saving environment variables:",e),o.ZP.error("Failed to save environment variables. Please try again.")}};return g&&Array.isArray(g)?(0,t.jsxs)("div",{children:[g.map((e,s)=>(0,t.jsx)("div",{className:"relative mt-5 grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-8",children:(0,t.jsxs)("div",{className:"sm:col-span-1 grid grid-cols-2 gap-x-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(D.Z,{label:"Key",popoverheader:"Key",popovercontent:(0,t.jsx)("p",{children:"Enter the key for the environment variable."})}),(0,t.jsx)("input",{name:"name-".concat(s),value:e.name,onChange:e=>j(s,"name",e),className:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter key"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(D.Z,{label:"Value",popoverheader:"Value",popovercontent:(0,t.jsx)("p",{children:"Enter the value for the environment variable."})}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-4 w-3xl max-w-md",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{name:"value-".concat(s),value:e.value,type:l[s]?"text":"password",onChange:e=>j(s,"value",e),placeholder:"Enter value",className:"block w-3xl rounded-md border-0 py-1.5 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>b(s),children:l[s]?(0,t.jsx)(et.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,t.jsx)(er.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),(0,t.jsx)(u.z,{variant:"ghost",onClick:()=>y(s),className:"bg-black text-white hover:bg-red-500 hover:text-white dark:hover:bg-red-900 px-2",children:(0,t.jsx)(ef.Z,{className:"h-4 w-4"})})]})]})]})},s)),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-6",children:[(0,t.jsxs)(u.z,{onClick:()=>{a(eN(eh()([...g,{name:"",value:""}]))),i([...l,!1])},children:[(0,t.jsx)(ej.Z,{className:"mr-2 h-4 w-4"}),"Add Secret"]}),(0,t.jsxs)(u.z,{onClick:()=>v.current.click(),children:[(0,t.jsx)(ey.Z,{className:"mr-2 h-4 w-4"}),"Upload Secret File"]}),(0,t.jsxs)(u.z,{onClick:N,className:"ml-auto bg-green-500 hover:bg-green-600 text-white px-6 py-2 w-64",children:[(0,t.jsx)(eP.Z,{className:"mr-2 h-5 w-5"}),"Save Secrets"]}),(0,t.jsx)("input",{ref:v,type:"file",onChange:e=>{let s=e.target.files[0];try{if(s){let e=new FileReader;e.onload=e=>{let s=e.target.result.split("\n").map(e=>{let[s,a]=e.split("=").map(e=>e.trim());return{name:s,value:a}}).filter(e=>e.name&&e.value);a(eN(eh()([...g,...s]))),i(e=>[...e,...Array(s.length).fill(!1)])},e.readAsText(s)}}catch(e){console.error(e),o.ZP.error("Failed to parse the file. Please try again with .env or .txt format.")}},style:{display:"none"}})]})]}):null};a(87625),a(2854),a(45246);var eA=a(46346),eE=a(58991),eZ=a(74859);function eR(){let e=(0,m.v9)(e=>e.environment.environmentLoadedValues),s=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),a=(0,m.v9)(e=>e.secrets),i=(0,ec.useRouter)(),d=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),c=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),u=(0,m.v9)(e=>e.nodegroups.nodeLoadedValues),p=(0,m.v9)(e=>e.deployment.deploymentLoadedValues),x=(0,m.v9)(e=>e.extraEnvVars),[v,g]=(0,r.useState)("Something went wrong while creating the deployment. Please try again later."),[f,j]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),L=async()=>{let t;try{if("true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE&&(null==p?void 0:p.databaseURI)===""){o.ZP.error("Database URI is missing.",{duration:5e3});return}window.scrollTo({top:0,behavior:"smooth"});let r={name:d,spec:{fake:!!d.startsWith("fake"),dataEndpoints:{artifactStore:{backendType:"",connectionURI:(null==p?void 0:p.artifactStoreURI)||""},dataStore:{backendType:"",connectionURI:(null==p?void 0:p.databaseURI)||""},metadataStore:{backendType:"",connectionURI:(null==p?void 0:p.metadataStoreURI)||""},extraEnvVars:"true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE?[]:x||[]},nodeGroupList:u.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.extraComputeClass)&&e.spec.extraComputeClass.length>0}),secrets:"true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE&&a||[],serviceList:c.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{if("true"===eZ.env.NEXT_PUBLIC_SNOWFLAKE){var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:e.name)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0}).filter(e=>{let{name:s}=e;return!("mongodb"===s&&((null==p?void 0:p.artifactStoreURI)||(null==p?void 0:p.databaseURI)||(null==p?void 0:p.metadataStoreURI)))})}};P(!0),console.log("\uD83D\uDC49 REQUEST DATA",r);let l={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:(0,_.Z)(s),superduper_reverse_proxy:eZ.env.NEXT_PUBLIC_API||e.NEXT_PUBLIC_API}};j(!0),t=o.ZP.loading("Deployment in progress...",{duration:1/0}),await new Promise(e=>setTimeout(e,3e3));let i=await n.Z.post("".concat("".concat(eZ.env.NEXT_PUBLIC_API,"/deployments")),r,l);console.log("RESULT:",i.data),await new Promise(e=>setTimeout(e,5e3)),o.ZP.dismiss(t),window.location.assign("/webui?deployment=done&query=1m"),o.ZP.success("Deployment successful!",{icon:"\uD83D\uDE80",duration:5e3})}catch(e){var r,l;t&&o.ZP.dismiss(t),e.response&&"true"===eZ.env.NEXT_PUBLIC_SNOWFLAKE&&200!==e.response.status&&400!==e.response.status?(console.error("Deployment Form Submission Error:",e.response.data),g((null===(r=e.response)||void 0===r?void 0:r.data)||e.message)):(console.error("Deployment Form Submission Error:",e),g((null===(l=e.response)||void 0===l?void 0:l.data)||e.message)),w(!0),o.ZP.error("Deployment failed. Please try again.",{duration:5e3})}finally{P(!1),j(!1),b(!1)}},k=async()=>{let t;try{if("true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE&&(null==p?void 0:p.databaseURI)===""){o.ZP.error("Database URI is missing.",{duration:5e3});return}let r={name:d,spec:{fake:!!d.startsWith("fake"),dataEndpoints:{artifactStore:{backendType:"",connectionURI:(null==p?void 0:p.artifactStoreURI)||""},dataStore:{backendType:"",connectionURI:(null==p?void 0:p.databaseURI)||""},metadataStore:{backendType:"",connectionURI:(null==p?void 0:p.metadataStoreURI)||""},extraEnvVars:"true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE?[]:x||[]},nodeGroupList:u.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.extraComputeClass)&&e.spec.extraComputeClass.length>0}),secrets:"true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE&&a||[],serviceList:c.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{if("true"===eZ.env.NEXT_PUBLIC_SNOWFLAKE){var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:e.name)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0}).filter(e=>{let{name:s}=e;return!("mongodb"===s&&((null==p?void 0:p.artifactStoreURI)||(null==p?void 0:p.databaseURI)||(null==p?void 0:p.metadataStoreURI)))})}};console.log("\uD83D\uDC49 REQUEST DATA",r),j(!0),t=o.ZP.loading("Retrying deployment...",{duration:1/0}),await new Promise(e=>setTimeout(e,5e3));let l={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:(0,_.Z)(s),superduper_reverse_proxy:eZ.env.NEXT_PUBLIC_API||e.NEXT_PUBLIC_API}},m=await n.Z.post("".concat("".concat(eZ.env.NEXT_PUBLIC_API,"/deployments")),r,l);console.log("RESULT:",m.data),await new Promise(e=>setTimeout(e,5e3)),o.ZP.dismiss(t),o.ZP.success("Deployment is successful.",{duration:5e3}),i.push("/webui?deployment=done&query=1m",void 0,{shallow:!1}),b(!1)}catch(e){if(t&&o.ZP.dismiss(t),e.response&&200!==e.response.status&&400!==e.response.status)console.error("Deployment Form Submission Error:",e.response.data),i.push("/webui?deployment=done&query=1m",void 0,{shallow:!1}),o.ZP.success("Deployment successful!",{icon:"\uD83D\uDE80",duration:5e3});else{var r;console.error("Deployment Form Submission Error:",e),g((null===(r=e.response)||void 0===r?void 0:r.data)||e.message),w(!0),o.ZP.error("Deployment retry failed. Please try again.",{duration:5e3})}}finally{j(!1),b(!1)}};return f?(0,t.jsx)(eE.Z,{}):(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"pb-2",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Step 1: Set Compute Classes"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"ComputeClass enables users to influence the scheduling of Services on nodes based on specific criteria such as hardware capabilities, geographic location, or other custom requirements."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E,{}),(0,t.jsx)(ep,{}),(0,t.jsx)("br",{})]}),(0,t.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Step 2: Add Databackend"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"At first you have to add a database to your deployment. You can update the parameters below. We will deploy and handle the rest."}),(0,t.jsx)("br",{}),"true"!==eZ.env.NEXT_PUBLIC_SNOWFLAKE?(0,t.jsx)(eo,{}):(0,t.jsx)(el,{})]}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"pb-4",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Step 3: Define Parameters"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Update the services you want to install on your deployment. You can click on the service to edit the configuration."}),(0,t.jsxs)("div",{style:{marginLeft:"-1.5rem!important"},children:[(0,t.jsx)(eg,{}),"true"==eZ.env.NEXT_PUBLIC_SNOWFLAKE?(0,t.jsx)(eS,{}):(0,t.jsx)(eC,{}),(0,t.jsx)(H,{})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,t.jsx)(l.default,{href:"/webui",children:(0,t.jsx)("button",{type:"button",className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"})}),(0,t.jsxs)(ed.aR,{children:[(0,t.jsx)(ed.vW,{className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Start Deployment"}),(0,t.jsxs)(ed._T,{children:[(0,t.jsxs)(ed.fY,{children:[(0,t.jsx)(ed.f$,{children:"Start creating deployment now..."}),(0,t.jsx)(ed.yT,{children:"This will create a deployment and it will take some time to finish. Please be patient. Do you want to continue?"})]}),(0,t.jsxs)(ed.xo,{children:[(0,t.jsx)(ed.le,{children:"Cancel"}),(0,t.jsx)(ed.OL,{onClick:()=>{b(!0),L()},children:"Continue"})]})]})]})]}),(0,t.jsx)(ed.aR,{open:y,children:(0,t.jsx)(ed._T,{children:(0,t.jsxs)(ed.fY,{children:[(0,t.jsx)(ed.f$,{children:"Started deployment process..."}),(0,t.jsx)(ed.yT,{children:"This initiates a deployment process that may take some time. Please wait patiently. You'll be redirected to the dashboard once it's complete."}),(0,t.jsx)("br",{}),(0,t.jsx)(em.O,{})]})})}),(0,t.jsx)(ed.aR,{open:N,children:(0,t.jsxs)(ed._T,{children:[(0,t.jsxs)(ed.fY,{children:[(0,t.jsx)(ed.f$,{children:"Deployment Failed"}),(0,t.jsx)(ed.yT,{children:(0,t.jsxs)(eu.bZ,{variant:"destructive",children:[(0,t.jsx)(h.LPM,{className:"h-4 w-4"}),(0,t.jsx)(eu.Cd,{children:"Error"}),(0,t.jsx)(eA.x,{className:"scrollbar-visible h-[200px] w-full mt-2 pr-4",children:(0,t.jsx)(eu.X,{children:v})})]})})]}),(0,t.jsxs)(ed.xo,{children:[(0,t.jsx)(ed.le,{onClick:()=>{w(!1),b(!1)},children:"Cancel"}),(0,t.jsx)(ed.OL,{onClick:()=>{b(!0),w(!1),k()},children:"Retry Now"})]})]})})]})]})}},87625:function(e,s,a){a.d(s,{Z:function(){return R}});var t=a(27573),r=a(7653),n=a(64544),l=a(45034),i=a(97370),o=a(903),d=a(12900),c=a(13908),u=a(93296),m=a(412),p=a(81695),x=a(98348),h=a(85688),v=a(88623),g=a(38983),f=a(87354),j=a(18580),y=a(36531),b=a(42502);let N=[{label:"Off",value:0},{label:"30s",value:3e4},{label:"1m",value:6e4},{label:"2m",value:12e4},{label:"5m",value:3e5},{label:"10m",value:6e5}];function w(){let e=(0,p.useRouter)(),s=(0,p.useSearchParams)(),[a,n]=(0,r.useState)(N[0]),[l,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=s.get("query");if(e){let s=N.find(s=>s.label.toLowerCase()===e.toLowerCase());s&&n(s)}},[s]),(0,r.useEffect)(()=>{if(a.value>0){let e=setInterval(()=>{let e=new URL(window.location.href);e.searchParams.set("query",a.label),window.history.replaceState(null,"",e.toString()),window.location.reload()},a.value);return()=>clearInterval(e)}},[a,e]);let o=e=>{n(e),i(!1);let s=new URL(window.location.href);s.searchParams.set("query",e.label),window.history.replaceState(null,"",s.toString())};return(0,t.jsxs)(b.h_,{open:l,onOpenChange:i,children:[(0,t.jsx)(b.$F,{asChild:!0,children:(0,t.jsxs)(y.z,{variant:"outline",role:"combobox","aria-expanded":l,className:"w-[150px] justify-between bg-background text-sm font-normal",children:[(0,t.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),a.label,(0,t.jsx)(g.Z,{className:"ml-auto h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(b.AW,{className:"w-[150px]",children:N.map(e=>(0,t.jsxs)(b.Xi,{onSelect:()=>o(e),children:[(0,t.jsx)(f.Z,{className:(0,j.cn)("mr-2 h-4 w-4",a.value===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})}var C=a(64520),P=a(72513),L=a(1930),k=a(97747),I=a(87191),_=a(24776),S=a(7109),A=a(13333),E=a(74859);function Z(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter(Boolean).join(" ")}function R(){var e,s;let a=(0,m.v9)(e=>e.environment.environmentLoadedValues),[v,g]=(0,r.useState)("Something went wrong while creating the deployment. Please try again later."),f=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[j,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),[R,U]=(0,r.useState)(!1),[T,B]=(0,r.useState)(!1),D=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),F=(0,m.v9)(e=>e.deploymentAPI.deploymentAPILoadedValues),X=(null==F?void 0:null===(e=F.status)||void 0===e?void 0:e.phase)||"Unknown",O=(null==F?void 0:null===(s=F.status)||void 0===s?void 0:s.message)||"",V=(null==F?void 0:F.name)||D,z=(0,p.useRouter)(),[M,W]=(0,r.useState)(""),[q,G]=(0,r.useState)(!1),Y=async()=>{try{if(V!==M){console.error("No deployment name found"),u.ZP.error("Your typed name is not matched with the deployment name. Type it carefully.",{id:"delete-deployment"});return}N(!0),y(!1);let e=await c.Z.delete("".concat("".concat(E.env.NEXT_PUBLIC_API,"/deployments/").concat(D)),{headers:{Accept:"application/json",Authorization:(0,S.Z)(f),superduper_reverse_proxy:E.env.NEXT_PUBLIC_API||a.NEXT_PUBLIC_API}});console.log("Deployments API data:",e.data),200===e.status?(console.log("Deployment deleted successfully"),E.env.NEXT_PUBLIC_APPLICATION_URL?z.push("/webui/deployment?deleted=true"):z.push("/webui?deleted=true"),u.ZP.success("Deployment deleted process is running..."),E.env.NEXT_PUBLIC_APPLICATION_URL?window.location.assign("/webui/deployment?deleted=true"):window.location.assign("/webui?deleted=true")):(console.error("Error deleting deployment:",e.data),u.ZP.error("Error deleting deployment",{id:"delete-deployment"}),N(!1),U(!0),g(null==e?void 0:e.data))}catch(s){var e;console.error("Error deleting deployment:",s),N(!1),g((null===(e=s.response)||void 0===e?void 0:e.data)||s.message),U(!0)}};return(0,t.jsxs)(t.Fragment,{children:[V&&(0,t.jsxs)("div",{className:"pb-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{id:"message-heading",className:"text-2xl mb-2 font-semibold text-gray-900",children:"Deployment"}),(0,t.jsx)("div",{className:"mb-2 mr-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("span",{onClick:()=>{window.location.reload()},className:"flex items-center rounded-full bg-white p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,t.jsx)("span",{className:"sr-only",children:"Reload"}),(0,t.jsx)(i.Z,{className:"h-5 w-5","aria-hidden":"true"})]})}),(0,t.jsx)(w,{})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center sm:w-0 sm:flex-1",children:(0,t.jsx)("div",{className:"flex items-center gap-x-6",children:(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"mt-1 truncate text-base text-gray-500",children:[(0,t.jsx)(d.C,{className:"text-base truncate",children:V}),O&&(0,t.jsxs)(C.aR,{children:[(0,t.jsx)(C.vW,{asChild:!0,children:(0,t.jsx)(d.C,{variant:"outline",className:"ml-2 text-base truncate",children:O.length>24?O.slice(0,24)+"...  [Show More]":O})}),(0,t.jsxs)(C._T,{children:[(0,t.jsxs)(C.fY,{children:[(0,t.jsxs)(C.f$,{children:["Status of ",(0,t.jsx)("strong",{children:V})]}),(0,t.jsx)(C.yT,{children:(0,t.jsxs)(P.bZ,{children:[(0,t.jsx)(h.WCv,{className:"h-4 w-4"}),(0,t.jsx)(P.Cd,{children:"Status"}),(0,t.jsx)(P.X,{children:O})]})})]}),(0,t.jsxs)(C.xo,{children:[(0,t.jsx)(C.le,{children:"Cancel"}),(0,t.jsx)(C.OL,{children:"Continue"})]})]})]})]})})})}),(0,t.jsxs)("div",{className:"mt--6 flex items-center justify-between sm:ml-6 sm:mt-0 sm:flex-shrink-0 sm:justify-start gap-x-2",children:[!X&&(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:["Running",(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsxs)("div",{role:"status",children:[(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-green-500 dark:text-green-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}),(0,t.jsx)("span",{className:"sr-only",children:"..."})]})})]}),X&&(null==X?void 0:X.toLowerCase())==="running"&&(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:["Running",(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsxs)("div",{role:"status",children:[(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-green-500 dark:text-green-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}),(0,t.jsx)("span",{className:"sr-only",children:"..."})]})})]}),X&&(null==X?void 0:X.toLowerCase())==="pending"&&(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20",children:["Pending",(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsxs)("svg",{"aria-hidden":"true",className:"w-4 h-4 me-0 text-gray-200 animate-spin dark:text-white-600 fill-yellow-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})})]}),X&&(null==X?void 0:X.toLowerCase())==="deploying"&&(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20",children:["Deploying",(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsxs)("svg",{"aria-hidden":"true",className:"w-4 h-4 me-0 text-gray-200 animate-spin dark:text-white-600 fill-yellow-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})})]}),X&&(null==X?void 0:X.toLowerCase())==="failed"&&(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20",children:["Failed",(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-red-500 dark:text-red-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M2 12a10 10 0 1 1 20 0 10 10 0 0 1-20 0Zm7.7-3.7a1 1 0 0 0-1.4 1.4l2.3 2.3-2.3 2.3a1 1 0 1 0 1.4 1.4l2.3-2.3 2.3 2.3a1 1 0 0 0 1.4-1.4L13.4 12l2.3-2.3a1 1 0 0 0-1.4-1.4L12 10.6 9.7 8.3Z"})})})})]}),(0,t.jsxs)(n.v,{as:"div",className:"relative ml-3 inline-block text-left",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(n.v.Button,{className:"-my-2 flex items-center rounded-full bg-white p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open options"}),(0,t.jsx)(o.Z,{className:"h-5 w-5","aria-hidden":"true"})]})}),(0,t.jsx)(l.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,t.jsx)(n.v.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,t.jsxs)("div",{className:"py-1",children:[!0!==E.env.NEXT_PUBLIC_SNOWFLAKE&&(0,t.jsx)(n.v.Item,{children:e=>{let{active:s}=e;return(0,t.jsx)("a",{href:"#",onClick:()=>y(!0),className:Z(s?"bg-gray-100 text-gray-900":"text-gray-700","flex justify-between px-4 py-2 text-sm"),children:(0,t.jsx)("span",{children:"Delete Deployment"})})}}),(0,t.jsx)(n.v.Item,{children:e=>{let{active:s}=e;return(0,t.jsx)("div",{className:Z(s?"bg-gray-100 text-gray-900":"text-gray-700","flex justify-between px-4 py-2 text-sm"),onClick:()=>G(!0),children:(0,t.jsx)("span",{children:"View Deployment in JSON"})})}}),(0,t.jsx)(n.v.Item,{children:e=>{let{active:s}=e;return(0,t.jsx)("a",{href:"mailto:support@superduper.io",className:Z(s?"bg-gray-100 text-gray-900":"text-gray-700","flex justify-between px-4 py-2 text-sm"),children:(0,t.jsx)("span",{children:"Contact Support"})})}})]})})})]})]})]})]}),(0,t.jsxs)(C.aR,{open:j,children:[(0,t.jsx)(C.vW,{}),(0,t.jsxs)(C._T,{children:[(0,t.jsxs)(C.fY,{children:[(0,t.jsx)(C.f$,{children:"Are you absolutely sure?"}),(0,t.jsx)(C.yT,{children:"This action cannot be undone. This will permanently delete your deployment and remove your data. Be aware!"}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,t.jsxs)(k._,{htmlFor:"deployment-name",children:["Type the deployment name: ",(0,t.jsx)("strong",{children:V})]}),(0,t.jsx)(L.I,{type:"text",id:"deployment-name",placeholder:"Type the deployment name",value:M,onChange:e=>{W(e.target.value)},className:"border border-gray-300 rounded-md p-2"})]})]}),(0,t.jsxs)(C.xo,{children:[(0,t.jsx)(C.le,{onClick:()=>y(!1),children:"Cancel"}),(0,t.jsxs)(C.OL,{onClick:()=>{Y()},variant:"destructive",className:"gap-2 bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[(0,t.jsx)(A.Z,{className:"w-5 h-5"}),"Delete Deployment"]})]})]})]}),(0,t.jsx)(C.aR,{open:b,children:(0,t.jsx)(C._T,{children:(0,t.jsxs)(C.fY,{children:[(0,t.jsx)(C.f$,{children:"Delete Deployment..."}),(0,t.jsx)(C.yT,{children:"This initiates a delete deployment process that may take some time. Please wait patiently. You'll be redirected to the dashboard once it's complete."}),(0,t.jsx)("br",{}),(0,t.jsx)(x.O,{})]})})}),(0,t.jsx)(C.aR,{open:R,children:(0,t.jsxs)(C._T,{children:[(0,t.jsxs)(C.fY,{children:[(0,t.jsx)(C.f$,{children:"Delete Deployment Failed"}),(0,t.jsx)(C.yT,{children:(0,t.jsxs)(P.bZ,{variant:"destructive",children:[(0,t.jsx)(h.LPM,{className:"h-4 w-4"}),(0,t.jsx)(P.Cd,{children:"Error"}),(0,t.jsx)(P.X,{children:v})]})})]}),(0,t.jsxs)(C.xo,{children:[(0,t.jsx)(C.le,{onClick:()=>{U(!1),N(!1)},children:"Cancel"}),(0,t.jsx)(C.OL,{onClick:()=>{N(!0),U(!1),Y()},children:"Retry Now"})]})]})}),(0,t.jsx)(_.Vq,{open:q,onOpenChange:()=>G(!1),children:(0,t.jsxs)(_.cZ,{className:"sm:max-w-[768px]",children:[(0,t.jsxs)(_.fK,{children:[(0,t.jsx)(_.$N,{children:"View the Deployment"}),(0,t.jsx)(_.Be,{children:"This is the deployment data in JSON format."})]}),(0,t.jsx)(I.Z,{data:F}),(0,t.jsx)(_.cN,{})]})})]})}},2854:function(e,s,a){a.d(s,{Z:function(){return K}});var t=a(27573),r=a(7653),n=a(412),l=a(5772),i=a(22392);a(40020),a(19234),a(83346);var o=a(16800),d=a(64303),c=a(63052),u=a(36531);function m(){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-[50vh] gap-4",children:[(0,t.jsx)("div",{className:"bg-red-100 dark:bg-red-900 rounded-full p-4",children:(0,t.jsx)(x,{className:"h-8 w-8 text-red-500 dark:text-red-400"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold",children:"The dashboard is not yet reachable now!"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"We couldn't load the requested resource right now. Please try again in a few moments."})]}),(0,t.jsxs)(u.z,{className:"mt-4",variant:"outline",onClick:()=>{window.location.reload()},children:[(0,t.jsx)(p,{className:"mr-2 h-4 w-4"}),"Reload"]})]})}function p(e){return(0,t.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),(0,t.jsx)("path",{d:"M21 3v5h-5"}),(0,t.jsx)("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),(0,t.jsx)("path",{d:"M8 16H3v5"})]})}function x(e){return(0,t.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}),(0,t.jsx)("path",{d:"M12 9v4"}),(0,t.jsx)("path",{d:"M12 17h.01"})]})}var h=a(86288),v=a(72513),g=a(46065),f=a(7109),j=a(74859);function y(e){let{selectedPod:s}=e,[a,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[u,m]=(0,r.useState)(!1),p=(0,n.v9)(e=>e.environment.environmentLoadedValues),x=(0,n.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),y=(0,n.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name);(0,r.useEffect)(()=>{(async()=>{try{c(!0);let e=await fetch("".concat("".concat(j.env.NEXT_PUBLIC_API,"/logs/").concat(s,"\n?deployment=").concat(y)),{headers:{Accept:"application/json",Authorization:(0,f.Z)(x),superduper_reverse_proxy:j.env.NEXT_PUBLIC_API||p.NEXT_PUBLIC_API}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=(await e.json()).payload;if(!a)throw Error("Invalid data structure received from the API");let t=b(a);l(t),o(null),m(!1)}catch(e){console.error("Error fetching logs:",e),o(e instanceof Error?e.message:"An unknown error occurred")}finally{c(!1)}})()},[s]);let b=e=>"string"!=typeof e?(console.error("Invalid payload type:",typeof e),[]):e.split("\n").filter(Boolean).map(e=>{let s=e.replace(/\s{2,}/g," "),a=s.match(/^\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/),t=a?a[0]:"",r=a?s.slice(t.length).trim():s.trim(),n=r.match(/\b(INFO|WARNING|ERROR|SUCC|E)\b/i),l=n?n[1].toUpperCase():"",i=n?r.slice(l.length).trim().replace(/\s{2,}/g," "):r;return{timestamp:t,level:l,message:i}});return d?(0,t.jsx)(h.Zb,{className:"w-full max-w-6xl mx-auto p-4",children:(0,t.jsx)("p",{className:"text-center",children:"Loading logs..."})}):(0,t.jsxs)("div",{className:"w-full max-w-6xl mx-auto mt-2",children:[i&&(0,t.jsxs)(v.bZ,{variant:"destructive",className:"mb-4",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4"}),(0,t.jsx)(v.Cd,{children:"Error"}),(0,t.jsxs)(v.X,{children:["Failed to fetch logs: ",i,"."]})]}),(0,t.jsx)(h.Zb,{className:"bg-black text-green-400 p-4 font-mono text-sm overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-y-auto h-[600px]",children:0===a.length?(0,t.jsx)("p",{className:"text-center",children:"No logs available."}):a.map((e,s)=>(0,t.jsxs)("div",{className:"mb-2",children:[e.timestamp&&(0,t.jsx)("span",{className:"text-blue-400",children:e.timestamp}),e.level&&(0,t.jsxs)("span",{className:"font-bold ".concat(function(e){switch(e.toUpperCase()){case"DEBUG":return"text-gray-400";case"TRACE":return"text-purple-400";case"WARNING":case"WARN":return"text-yellow-400";case"INFO":return"text-cyan-400";case"SUCC":case"SUCCESS":return"text-green-400";case"E":case"ERROR":return"text-rose-400";case"CRITICAL":case"FATAL":return"text-red-600";default:return"text-gray-200"}}(e.level)),children:[" ",e.level]}),(0,t.jsx)("span",{className:"ml-2",dangerouslySetInnerHTML:{__html:e.message.replace(/\u001B\[1m/g,'<span class="font-bold">').replace(/\u001B\[22m/g,"</span>").replace(/\u001B\[32m/g,'<span class="text-green-400">').replace(/\u001B\[37m/g,'<span class="text-white">').replace(/\u001B\[39m/g,"</span>").replace(/\[37m/g,'<span class="text-white">').replace(/\[39m/g,"</span>").replace(/\[1m/g,'<span class="font-bold">').replace(/\[22m/g,"</span>").replace(/\[32m/g,'<span class="text-green-400">')}})]},s))})})]})}var b=a(74859);function N(e){try{var s,a,t;if(e&&(null==e?void 0:e.status)&&(null==e?void 0:null===(s=e.status)||void 0===s?void 0:s.podRefList))return null==e?void 0:null===(t=e.status)||void 0===t?void 0:null===(a=t.podRefList)||void 0===a?void 0:a.map(e=>e.name);return[]}catch(e){return[]}}var w=e=>{var s,a;let{data:l}=e,u=(0,n.v9)(e=>e.environment.environmentLoadedValues),p=(0,n.v9)(e=>e.deploymentAPI.deploymentAPILoadedValues),[x,h]=(0,r.useState)("".concat(JSON.stringify(l,null,"	"))),[v,g]=(0,r.useState)(N(l)||[]),[f,j]=(0,r.useState)(v[0]),[w,C]=(0,r.useState)([{label:"Last 5 minutes",value:5},{label:"Last 15 minutes",value:15},{label:"Last 30 minutes",value:30},{label:"Last 1 hour",value:60},{label:"Last 6 hours",value:360},{label:"Last 12 hours",value:720},{label:"Last 24 hours",value:1440},{label:"Last 2 days",value:2880},{label:"Last 3 days",value:4320},{label:"Last 7 days",value:10080},{label:"Last 14 days",value:20160},{label:"Last 30 days",value:43200}]),[P,L]=(0,r.useState)(w[0].value);(0,r.useEffect)(()=>{g(N(l)||[])},[l]);let k=e=>{h(e)},I=(0,r.useRef)(null),_=async()=>{try{I.current.editor.selectAll();let e=I.current.editor.getSelectedText();await navigator.clipboard.writeText(e),console.log("Text copied to clipboard:",e)}catch(e){console.error("Unable to copy text to clipboard:",e)}},S=e=>{j(e)},[A,E]=(0,r.useState)(!1),[Z,R]=(0,r.useState)(!0),U=b.env.NEXT_PUBLIC_GRAFANA_DASHBOARD||u.NEXT_PUBLIC_GRAFANA_DASHBOARD||"/grafana/";return p?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(d.mQ,{defaultValue:"log",className:"w-full",children:[(0,t.jsxs)(d.dr,{className:"grid w-full grid-cols-3",children:[f&&"true"==b.env.NEXT_PUBLIC_SNOWFLAKE&&(0,t.jsx)(d.SP,{value:"log",children:"Logs"}),f&&"true"!==b.env.NEXT_PUBLIC_SNOWFLAKE&&(0,t.jsx)(d.SP,{value:"monitoring",children:"Logs"}),(0,t.jsx)(d.SP,{value:"status",children:"Status"}),(0,t.jsx)(d.SP,{value:"specs",children:"Specs"})]}),f&&"true"==b.env.NEXT_PUBLIC_SNOWFLAKE&&(0,t.jsxs)(d.nU,{value:"log",children:[(0,t.jsxs)("div",{className:"relative mt-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-start",children:(0,t.jsx)("span",{className:"bg-white pr-3 text-base font-semibold leading-6 text-gray-900",children:"Logs"})})]}),(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsxs)(c.Ph,{value:f,onValueChange:S,children:[(0,t.jsx)(c.i4,{className:"w-3/6 mt-4 mb-2",children:(0,t.jsx)(c.ki,{placeholder:"Select a pod for log"})}),(0,t.jsx)(c.Bw,{children:(0,t.jsxs)(c.DI,{children:[(0,t.jsx)(c.n5,{children:"Select a pod for log"}),v&&v.map((e,s)=>(0,t.jsx)(c.Ql,{value:e,children:e},s))]})})]})}),(0,t.jsx)("div",{children:(0,t.jsx)(y,{selectedPod:f})})]}),f&&"true"!==b.env.NEXT_PUBLIC_SNOWFLAKE&&(0,t.jsxs)(d.nU,{value:"monitoring",children:[(0,t.jsxs)("div",{className:"relative mt-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-start",children:(0,t.jsx)("span",{className:"bg-white pr-3 text-base font-semibold leading-6 text-gray-900",children:"Logs"})})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)(c.Ph,{value:f,onValueChange:S,children:[(0,t.jsx)(c.i4,{className:"w-3/6 mt-4 mb-2",children:(0,t.jsx)(c.ki,{placeholder:"Select a pod for log"})}),(0,t.jsx)(c.Bw,{children:(0,t.jsxs)(c.DI,{children:[(0,t.jsx)(c.n5,{children:"Select a pod for log"}),v&&v.map((e,s)=>(0,t.jsx)(c.Ql,{value:e,children:e},s))]})})]}),(0,t.jsxs)(c.Ph,{value:P,onValueChange:e=>{L(e)},children:[(0,t.jsx)(c.i4,{className:"w-3/6 mt-4 mb-2",children:(0,t.jsx)(c.ki,{placeholder:"Select a pod for log"})}),(0,t.jsx)(c.Bw,{children:(0,t.jsxs)(c.DI,{children:[(0,t.jsx)(c.n5,{children:"Select a time"}),w.map((e,s)=>(0,t.jsx)(c.Ql,{value:e.value,children:e.label},s))]})})]})]}),(0,t.jsx)("div",{children:Z&&!A?(0,t.jsx)("iframe",{title:"External Website",allowFullScreen:!0,src:"".concat(U,"d-solo/logs/container-logs?orgId=1&theme=dark&panelId=2&refresh=&from=now-").concat(P,"m&to=now&var-pod=").concat(f,"&var-namespace=").concat(u.NEXT_PUBLIC_GRAFANA_NAMESPACE||b.env.NEXT_PUBLIC_GRAFANA_NAMESPACE,"&var-container=&var-logs_type=&var-logs_source"),width:"100%",height:"400px",onLoad:()=>{E(!1)},onError:()=>{E(!0)},className:"mt-2",style:{overflow:"auto",borderRadius:"10px"}}):(0,t.jsx)(m,{})})]}),(0,t.jsxs)(d.nU,{value:"status",children:[(0,t.jsxs)("div",{className:"relative mt-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-start",children:(0,t.jsx)("span",{className:"bg-white pr-3 text-base font-semibold leading-6 text-gray-900",children:"Status"})})]}),(0,t.jsxs)("div",{className:"relative overflow-visible mt-4",children:[(0,t.jsx)("div",{className:"absolute bottom-8 right-5 z-50",children:(0,t.jsx)("span",{onClick:_,children:(0,t.jsx)(o.Z,{popoverheader:"Click to copy"})})}),(0,t.jsx)(i.default,{ref:I,className:"block w-full rounded-md border-2 py-1.5 text-gray-900 shadow-lg ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600",placeholder:"Placeholder Text",mode:"json",theme:"github",name:"blah2",onChange:k,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:"".concat(JSON.stringify(l,null,"	")),setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1,wrap:!0},height:"400px",width:"100%"})]})]}),(0,t.jsxs)(d.nU,{value:"specs",children:[(0,t.jsxs)("div",{className:"relative mt-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-start",children:(0,t.jsx)("span",{className:"bg-white pr-3 text-base font-semibold leading-6 text-gray-900",children:"Specs"})})]}),(0,t.jsxs)("div",{className:"relative overflow-visible mt-4",children:[(0,t.jsx)("div",{className:"absolute bottom-8 right-5 z-50",children:(0,t.jsx)("span",{onClick:_,children:(0,t.jsx)(o.Z,{popoverheader:"Click to copy"})})}),(0,t.jsx)(i.default,{ref:I,className:"block w-full rounded-md border-2 py-1.5 text-gray-900 shadow-lg ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600",placeholder:"Placeholder Text",mode:"json",theme:"github",name:"blah2",onChange:k,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:"".concat(JSON.stringify((null==p?void 0:null===(s=p.spec)||void 0===s?void 0:s.serviceList)&&(null==p?void 0:null===(a=p.spec)||void 0===a?void 0:a.serviceList.filter(e=>(null==e?void 0:e.name.toLowerCase())===(null==l?void 0:l.name.toLowerCase()))),null,"	")),setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1,wrap:!0},height:"400px",width:"100%"})]})]})]})}):null},C=a(70694),P=a(95042),L=a(12900),k=a(53511),I=a(3078),_=a(85688);function S(e){return(0,t.jsxs)("svg",{...e,"aria-hidden":"true",className:"w-4 h-4 me-0 text-gray-200 animate-spin dark:text-white-600 fill-yellow-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})}let A={running:{bgColor:"bg-green-50",textColor:"text-green-700",ringColor:"ring-green-600/20",icon:(0,t.jsx)(function(e){return(0,t.jsx)("svg",{...e,className:"w-4 h-4 me-0 text-green-500 dark:text-green-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})})},{}),label:"Running"},pending:{bgColor:"bg-yellow-50",textColor:"text-yellow-700",ringColor:"ring-yellow-600/20",icon:(0,t.jsx)(S,{}),label:"Pending"},unknown:{bgColor:"bg-yellow-50",textColor:"text-yellow-700",ringColor:"ring-yellow-600/20",icon:(0,t.jsx)(S,{}),label:"Unknown"},failed:{bgColor:"bg-red-50",textColor:"text-red-700",ringColor:"ring-red-600/20",icon:(0,t.jsx)(function(e){return(0,t.jsx)("svg",{...e,className:"w-4 h-4 me-0 text-red-500 dark:text-red-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M2 12a10 10 0 1 1 20 0 10 10 0 0 1-20 0Zm7.7-3.7a1 1 0 0 0-1.4 1.4l2.3 2.3-2.3 2.3a1 1 0 1 0 1.4 1.4l2.3-2.3 2.3 2.3a1 1 0 0 0 1.4-1.4L13.4 12l2.3-2.3a1 1 0 0 0-1.4-1.4L12 10.6 9.7 8.3Z"})})},{}),label:"Failed"}},E=e=>{let s=A[(null==e?void 0:e.toLowerCase())||"unknown"];return s?(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md ".concat(s.bgColor," px-2 py-1 text-xs font-medium ").concat(s.textColor," ring-1 ring-inset ").concat(s.ringColor),children:[s.label,(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:s.icon})})]}):null};var Z=a(32966),R=a(6850),U=a(74859);function T(e){let{url:s}=e;return(console.log("DeploymentLink",s),s)?s.toLowerCase().includes("endpoints provisioning in progress... check back in a few minutes")?(0,t.jsxs)(u.z,{variant:"outline",disabled:!0,children:["Endpoint Provisioning",(0,t.jsx)(Z.Z,{className:"ml-0.5 -mr.5 h-5 w-5","aria-hidden":"true"})]}):(0,t.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsxs)(u.z,{variant:"outline",children:["Open",(0,t.jsx)(R.Z,{className:"ml-0.5 -mr.5 h-5 w-5","aria-hidden":"true"})]})}):null}let B=e=>{var s,a,r;let{deployment:n,token:l,env:i}=e;if((null==n?void 0:null===(a=n.status)||void 0===a?void 0:null===(s=a.phase)||void 0===s?void 0:s.toLowerCase())!=="running")return null;let o=null==n?void 0:null===(r=n.name)||void 0===r?void 0:r.toLowerCase(),d=[{condition:o.includes("ray"),url:U.env.NEXT_PUBLIC_RAY_DASHBOARD||i.NEXT_PUBLIC_RAY_DASHBOARD},{condition:o.includes("jupyter"),url:"".concat(U.env.NEXT_PUBLIC_JUPYTER_NOTEBOOK||i.NEXT_PUBLIC_JUPYTER_NOTEBOOK,"?superduper_token=").concat(l)},{condition:o.includes("monitoring"),url:U.env.NEXT_PUBLIC_GRAFANA_DASHBOARD||i.NEXT_PUBLIC_GRAFANA_DASHBOARD},{condition:o.includes("rest"),url:"".concat("http://localhost:8000","docs")},{condition:o.includes("apiserver"),url:U.env.NEXT_PUBLIC_APISERVER||i.NEXT_PUBLIC_APISERVER},{condition:o.includes("appui"),url:U.env.NEXT_PUBLIC_APPUI||i.NEXT_PUBLIC_APPUI},{condition:o.includes("webui"),url:U.env.NEXT_PUBLIC_WEBUI||i.NEXT_PUBLIC_WEBUI},{condition:o.includes("proxy"),url:U.env.NEXT_PUBLIC_PROXY||i.NEXT_PUBLIC_PROXY}];return(0,t.jsx)(t.Fragment,{children:d.map((e,s)=>e.condition&&e.url&&(0,t.jsx)(T,{url:e.url},s))})};var D=a(74859);let F=e=>{let{url:s,token:a,identifier:r}=e;return s?s.toLowerCase().includes("endpoints provisioning in progress... check back in a few minutes")?(0,t.jsxs)(u.z,{variant:"outline",disabled:!0,children:["Endpoint Provisioning",(0,t.jsx)(Z.Z,{className:"ml-0.5 -mr.5 h-5 w-5","aria-hidden":"true"})]}):(0,t.jsx)(t.Fragment,{children:s&&(0,t.jsx)("a",{href:"true"==D.env.NEXT_PUBLIC_SNOWFLAKE?(e=>{let s=window.location.origin;return"".concat(s,"/webui/").concat(e,"/")})(r):"".concat(s,"?superduper_token=").concat(a),target:"_blank",rel:"noopener noreferrer",children:(0,t.jsxs)(u.z,{variant:"outline",children:["Open",(0,t.jsx)(R.Z,{className:"ml-0.5 -mr-0.5 h-5 w-5","aria-hidden":"true"})]})})}):null};var X=e=>{var s;let{deployment:a,token:r,env:n,endpointData:l}=e,i=null==a?void 0:null===(s=a.name)||void 0===s?void 0:s.toLowerCase();return l&&null!==l.items&&void 0!==l.items?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(F,{identifier:i,token:r,url:function(e,s){for(let a of e.items)if(a.serviceName.toLowerCase()===s){for(let e of a.endpoints)if(e.ingressURL&&e.protocol)return"".concat(e.protocol,"://").concat(e.ingressURL)}return null}(l,i)},i)}):null};let O=e=>{if("object"==typeof e){if("computeClass"in e)return e.computeClass;for(let s of Object.values(e)){let e=O(s);if(void 0!==e)return e}console.log("No computeClass found in the object:",e)}},V=(e,s)=>{var a,t;let r=null==s?void 0:null===(t=s.spec)||void 0===t?void 0:null===(a=t.serviceList)||void 0===a?void 0:a.find(s=>s.name.toLowerCase()===e.toLowerCase());return(null==r?void 0:r.spec)?O(r.spec):void 0};function z(e){return(0,t.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z"}),(0,t.jsx)("path",{d:"M10 21.9V14L2.1 9.1"}),(0,t.jsx)("path",{d:"m10 14 11.9-6.9"}),(0,t.jsx)("path",{d:"M14 19.8v-8.1"}),(0,t.jsx)("path",{d:"M18 17.5V9.4"})]})}var M=a(80923);let W=()=>(0,t.jsx)("div",{className:"mx-auto max-w-7xl pr-4 pt-5 pb-0 sm:pr-6 lg:pr-8",children:(0,t.jsx)("div",{className:"mx-auto flex max-w-2xl items-center justify-between gap-x-8 lg:mx-0 lg:max-w-none",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)("div",{className:"bg-black rounded-lg p-2",children:(0,t.jsx)(z,{className:"w-6 h-6 text-gray-300"})}),(0,t.jsxs)("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:["Services",(0,t.jsx)(M.Z,{label:"",popoverheader:"",popovercontent:(0,t.jsx)("p",{children:"Services are the microservices that are running in the cluster that make superduper works!"})})]})]})})});var q=a(46346),G=a(74859);let Y=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter(Boolean).join(" ")};var K=()=>{let e=(0,n.v9)(e=>e.environment.environmentLoadedValues),s=(0,n.v9)(e=>e.environment.environmentLoadedValues.endpointData),[a,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(0),c=(0,n.v9)(e=>{var s,a;return null==e?void 0:null===(a=e.userInfo)||void 0===a?void 0:null===(s=a.userInfoLoadedValues)||void 0===s?void 0:s.token}),m=(0,n.v9)(e=>e.chartsgroups.chartsLoadedValues),p=(0,n.v9)(e=>e.deploymentAPI.deploymentAPILoadedValues);return(0,r.useEffect)(()=>{let e=setTimeout(()=>i(!1),5e3);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{c&&d(e=>e+1)},[c]),m||e||c||(a?(0,t.jsx)(l.Z,{}):(0,t.jsx)(k.Z,{header:"No Services Found",message:""})),(0,t.jsxs)("div",{children:[(0,t.jsx)(W,{}),(0,t.jsxs)(q.x,{className:"max-w-7xl whitespace-nowrap",children:[m&&e&&c&&(0,t.jsx)("div",{className:"bg-white px-4 py-5 sm:px-6",children:(0,t.jsx)("ul",{role:"list",className:"divide-y divide-red/5",children:m.items.map(a=>{var n,l,i,o,d,m,x;return(0,t.jsx)(r.Fragment,{children:a.name&&(0,t.jsxs)("li",{className:"relative flex items-center space-x-4 py-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,t.jsx)("div",{className:Y((null==a?void 0:null===(l=a.status)||void 0===l?void 0:null===(n=l.phase)||void 0===n?void 0:n.toLowerCase())==="running"?"text-green-400 bg-green-400/10":(null==a?void 0:null===(o=a.status)||void 0===o?void 0:null===(i=o.phase)||void 0===i?void 0:i.toLowerCase())==="failed"?"text-rose-400 bg-rose-400/10":"text-yellow-400 bg-yellow-400/10","flex-none rounded-full p-1"),children:(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-current"})}),(0,t.jsx)("h2",{className:"min-w-0 text-sm font-semibold leading-6 text-gray-900",children:(0,t.jsxs)(P.J2,{children:[(0,t.jsx)(P.xo,{asChild:!0,children:(0,t.jsxs)("div",{className:"flex",children:[a.name,"\xa0\xa0",(0,t.jsx)(_.jnn,{className:"h-4 w-4 mt-1"})]})}),(0,t.jsx)(P.yk,{className:"w-80",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium leading-none",children:"Pods Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"See the status of the pods"})]}),(0,t.jsx)("div",{className:"grid gap-2",children:null==a?void 0:null===(m=a.status)||void 0===m?void 0:null===(d=m.podRefList)||void 0===d?void 0:d.map(e=>{var s;return(0,t.jsxs)("div",{className:"grid grid-cols-3 items-center gap-4",children:[(0,t.jsx)(L.C,{className:"col-span-2 h-8",children:e.name}),E(null==e?void 0:null===(s=e.lifecycle)||void 0===s?void 0:s.phase)]},e.name)})})]})})]})})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400",children:[(0,t.jsx)("p",{className:"whitespace-nowrap",children:"ComputeClass:"}),(0,t.jsx)("button",{type:"button",className:"inline-flex items-center rounded-full bg-white px-2.5 py-1 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:V(a.name,p)||"No ComputeClass"})]})]}),"true"==G.env.NEXT_PUBLIC_API_DISABLE_ENV_LINK?(0,t.jsx)(X,{deployment:a,token:c,env:e,endpointData:s}):(0,t.jsx)(B,{deployment:a,token:c,env:e,endpointData:s}),E(null==a?void 0:null===(x=a.status)||void 0===x?void 0:x.phase),(0,t.jsxs)(C.yo,{children:[(0,t.jsx)(C.aM,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"outline",children:["Show More ",(0,t.jsx)(I.Z,{})]})}),(0,t.jsxs)(C.ue,{className:"overflow-auto w-[800px] sm:w-[800px] sm:max-w-none",children:[(0,t.jsxs)(C.Tu,{children:[(0,t.jsxs)(C.bC,{children:["More info about ",a.name]}),(0,t.jsx)(C.Ei,{children:"Here is the information regarding the services."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4 overflow-visible",children:(0,t.jsx)(w,{data:a})}),(0,t.jsx)(C.FF,{children:(0,t.jsx)(C.sw,{asChild:!0,children:(0,t.jsx)(u.z,{type:"submit",children:"Close Now"})})})]})]})]})},a.name)})})}),(0,t.jsx)(q.B,{orientation:"horizontal"})]})]})}},72513:function(e,s,a){a.d(s,{Cd:function(){return d},X:function(){return c},bZ:function(){return o}});var t=a(27573),r=a(7653),n=a(85145),l=a(18580);let i=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,...n}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(i({variant:r}),a),...n})});o.displayName="Alert";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});d.displayName="AlertTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...r})});c.displayName="AlertDescription"},4216:function(e,s,a){a.d(s,{X:function(){return o}});var t=a(27573),r=a(7653),n=a(92999),l=a(85688),i=a(18580);let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(l.nQG,{className:"h-4 w-4"})})})});o.displayName=n.fC.displayName},42502:function(e,s,a){a.d(s,{$F:function(){return d},AW:function(){return u},Xi:function(){return m},_x:function(){return c},h_:function(){return o},qB:function(){return p}});var t=a(27573),r=a(7653),n=a(49002),l=a(85688),i=a(18580);let o=n.fC,d=n.xz;n.ZA,n.Uv,n.Tr;let c=n.Ee;r.forwardRef((e,s)=>{let{className:a,inset:r,children:o,...d}=e;return(0,t.jsxs)(n.fF,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...d,children:[o,(0,t.jsx)(l.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=n.tu.displayName;let u=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,t.jsx)(n.Uv,{children:(0,t.jsx)(n.VY,{ref:s,sideOffset:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});u.displayName=n.VY.displayName;let m=r.forwardRef((e,s)=>{let{className:a,inset:r,...l}=e;return(0,t.jsx)(n.ck,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...l})});m.displayName=n.ck.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:o,...d}=e;return(0,t.jsxs)(n.oC,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(l.nQG,{className:"h-4 w-4"})})}),r]})}).displayName=n.oC.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...o}=e;return(0,t.jsxs)(n.Rk,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(l.jXb,{className:"h-4 w-4 fill-current"})})}),r]})});p.displayName=n.Rk.displayName,r.forwardRef((e,s)=>{let{className:a,inset:r,...l}=e;return(0,t.jsx)(n.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...l})}).displayName=n.__.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.Z0.displayName},63052:function(e,s,a){a.d(s,{Bw:function(){return x},DI:function(){return d},Ph:function(){return o},Ql:function(){return v},i4:function(){return u},ki:function(){return c},n5:function(){return h}});var t=a(27573),r=a(7653),n=a(85688),l=a(66240),i=a(18580);let o=l.fC,d=l.ZA,c=l.B4,u=r.forwardRef((e,s)=>{let{className:a,children:r,...o}=e;return(0,t.jsxs)(l.xz,{ref:s,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[r,(0,t.jsx)(l.JO,{asChild:!0,children:(0,t.jsx)(n.jnn,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.xz.displayName;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.u_,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.g8U,{})})});m.displayName=l.u_.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.$G,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.v4q,{})})});p.displayName=l.$G.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...o}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsxs)(l.VY,{ref:s,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...o,children:[(0,t.jsx)(m,{}),(0,t.jsx)(l.l_,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(p,{})]})})});x.displayName=l.VY.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})});h.displayName=l.__.displayName;let v=r.forwardRef((e,s)=>{let{className:a,children:r,...o}=e;return(0,t.jsxs)(l.ck,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.wU,{children:(0,t.jsx)(n.nQG,{className:"h-4 w-4"})})}),(0,t.jsx)(l.eT,{children:r})]})});v.displayName=l.ck.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.Z0.displayName},4482:function(e,s,a){a.d(s,{_v:function(){return c},aJ:function(){return d},pn:function(){return i},u:function(){return o}});var t=a(27573),r=a(7653),n=a(23098),l=a(18580);let i=n.zt,o=n.fC,d=n.xz,c=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,t.jsx)(n.VY,{ref:s,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})});c.displayName=n.VY.displayName},58991:function(e,s,a){a.d(s,{Z:function(){return f}});var t=a(27573),r=a(7653),n=a(12198),l=a(34527),i=a(82440),o=a(66465),d=a(53896),c=a(86288),u=a(13908),m=a(81695),p=a(7109),x=a(412),h=a(70790),v=a(74859);let g=[{key:"initializing",icon:n.Z,label:"Initializing",duration:3e3},{key:"building",icon:l.Z,label:"Building",duration:3e3},{key:"deploying",icon:i.Z,label:"Deploying",duration:3e3},{key:"success",icon:o.Z,label:"Success",duration:3e3}];function f(){let[e,s]=(0,r.useState)("initializing"),[a,n]=(0,r.useState)(0),l=(0,x.v9)(e=>e.environment.environmentLoadedValues),i=(0,x.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),o=(0,m.useRouter)(),f=(0,x.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),j=async e=>(await u.Z.get(e,{headers:{Accept:"application/json",Authorization:(0,p.Z)(i),superduper_reverse_proxy:v.env.NEXT_PUBLIC_API||l.NEXT_PUBLIC_API}})).data,{data:y,error:b}=(0,h.ZP)("".concat("".concat(v.env.NEXT_PUBLIC_API,"/deployments/").concat(f)),"".concat("".concat(v.env.NEXT_PUBLIC_API,"/deployments/").concat(f,"/")),j,{refreshInterval:0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});(0,r.useEffect)(()=>{y&&o.push("/webui?deployment=done&query=1m",void 0,{shallow:!0})},[y]),(0,r.useEffect)(()=>{N()},[]);let N=()=>{s("initializing"),n(0)};return(0,r.useEffect)(()=>{if("success"===e)return;let a=g.find(s=>s.key===e),t=g.findIndex(s=>s.key===e);n(0);let r=setInterval(()=>{n(e=>{let s=e+100/(a.duration/100);return s>=100?100:s})},100),l=setTimeout(()=>{t<g.length-1?s(g[t+1].key):s("success")},a.duration);return()=>{clearInterval(r),clearTimeout(l)}},[e]),(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen w-full bg-background",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/10 to-transparent h-96 pointer-events-none"}),(0,t.jsxs)(c.Zb,{className:"w-full max-w-6xl shadow-lg relative -mt-20",children:[(0,t.jsxs)(c.Ol,{className:"text-center space-y-2",children:[(0,t.jsx)(c.ll,{className:"text-4xl font-extrabold tracking-tight",children:"Deployment Status"}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Tracking progress of your deployment"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"w-full md:w-1/3 md:border-r md:pr-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Deployment Stages"}),(0,t.jsx)("ul",{className:"space-y-6",children:g.map(s=>{let a=s.icon,r=s.key===e,n=g.findIndex(s=>s.key===e)>g.findIndex(e=>e.key===s.key);return(0,t.jsxs)("li",{className:"flex items-center space-x-3 ".concat(r?"text-primary font-medium":n?"text-green-600":"text-muted-foreground"),children:[(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:s.label}),n&&(0,t.jsx)(d.Z,{className:"w-4 h-4 text-green-600"})]},s.key)})})]}),(0,t.jsxs)("div",{className:"w-full md:w-2/3 md:pl-8 flex flex-col items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Progress"}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center mb-8",children:["success"===e?(0,t.jsx)(d.Z,{className:"text-green-500 w-24 h-24 mb-4"}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("svg",{className:"w-24 h-24",viewBox:"0 0 100 100",children:[(0,t.jsx)("circle",{className:"text-gray-200",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:"42",cx:"50",cy:"50"}),(0,t.jsx)("circle",{className:"text-primary",strokeWidth:"8",strokeDasharray:264,strokeDashoffset:264-a/100*264,strokeLinecap:"round",stroke:"url(#gradient)",fill:"transparent",r:"42",cx:"50",cy:"50"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"hsl(var(--primary))"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"hsl(var(--primary))"})]})})]}),(0,t.jsxs)("span",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl font-semibold",children:[Math.round(a),"%"]})]}),(0,t.jsx)("p",{className:"text-center text-lg font-medium mt-4",children:(()=>{switch(e){case"initializing":return"Deployment ongoing, initializing...";case"building":return"Deployment ongoing, building files...";case"deploying":return"Deployment ongoing, finalizing production setup...";case"success":return"Deployment ongoing, almost live!";default:return"Deployment ongoing, wrapping up..."}})()})]})]})]})})]})]})}},87191:function(e,s,a){a.d(s,{Z:function(){return d}});var t=a(27573),r=a(7653),n=a(22392);a(40020),a(19234),a(83346);var l=a(412),i=a(24017),o=a(93296);function d(e){let{data:s,height:a="300px"}=e,d=(0,l.I0)(),[c,u]=(0,r.useState)(JSON.stringify(s,null,"	"));return(0,r.useRef)(null),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.default,{className:"block w-full rounded-md border-2 py-1.5 text-gray-900 shadow-lg ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600",placeholder:"Stack result JSON here...",mode:"json",theme:"github",name:"blah2",onChange:e=>{try{u(e),d((0,i.q7)(JSON.parse(e)))}catch(e){o.ZP.error("Error updating...",{id:"stack-update-error"})}},fontSize:13,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:c,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1,wrap:!0},height:a,width:"100%"})})}},53511:function(e,s,a){a.d(s,{Z:function(){return r}});var t=a(27573);function r(e){let{header:s,message:a}=e;return(0,t.jsx)("div",{className:"flex min-h-[40vh] flex-col items-center justify-center bg-background px-4 py-12 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md text-center",children:[(0,t.jsx)(n,{className:"mx-auto h-12 w-12 text-primary"}),(0,t.jsx)("h2",{className:"mt-4 text-xl font-bold tracking-tight text-foreground sm:text-xl",children:s||"UNKNOWN"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:a||"Status: UNKNOWN"})]})})}function n(e){return(0,t.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M12 20h.01"}),(0,t.jsx)("path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}),(0,t.jsx)("path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69"}),(0,t.jsx)("path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523"}),(0,t.jsx)("path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643"}),(0,t.jsx)("path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764"}),(0,t.jsx)("path",{d:"m2 2 20 20"})]})}},34611:function(e,s,a){a.d(s,{Gi:function(){return r}});var t=a(58108);let r=e=>s=>s({type:t.a6,payload:e})},60855:function(e,s,a){a.d(s,{Bw:function(){return n},Lj:function(){return l},NB:function(){return r}});var t=a(59625);let r=e=>s=>s({type:t.qJ,payload:e}),n=e=>s=>{let a=new Set;(null==e?void 0:e.items)&&Array.isArray(e.items)&&e.items.forEach(e=>{var s,t,r;(null==e?void 0:null===(t=e.status)||void 0===t?void 0:null===(s=t.reservation)||void 0===s?void 0:s.computeClassList)&&Array.isArray(e.status.reservation.computeClassList)&&e.status.reservation.computeClassList.forEach(e=>{a.add(e)});let n=(null==e?void 0:null===(r=e.spec)||void 0===r?void 0:r.extraComputeClass)||[];Array.isArray(n)&&n.forEach(e=>{a.add(e)})});let r=Array.from(a);return r.includes("base")&&(r=["base",...Array.from(a).filter(e=>"base"!==e)]),s({type:t.Ou,payload:r})},l=e=>s=>{let a=e;return e.includes("base")&&(a=["base",...e.filter(e=>"base"!==e)]),s({type:t.Ou,payload:a})}}}]);