"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2895],{4867:function(e,s,t){t.d(s,{N:function(){return a}}),t(27573),t(81695),t(7653),t(412),t(88280),t(39e3),t(74531),t(74859);let a=e=>(e.displayName||e.name,e)},33597:function(e,s,t){t.d(s,{Z:function(){return _}});var a=t(27573),l=t(7653),n=t(21091),r=t(13908),i=t(93296),o=t(412),c=t(1070),d=t(80923),h=t(36531),p=t(5772),u=t(7109),x=e=>{let{fileId:s}=e;(0,o.v9)(e=>e.environment.environmentLoadedValues);let t=(0,o.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[n,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[x,j]=(0,l.useState)("");return((0,l.useEffect)(()=>{(async()=>{try{let e=await r.Z.get("".concat("".concat("http://localhost:8000","/db/artifact_store/get?file_id=").concat(s)),{responseType:"blob",headers:{Accept:"application/json",Authorization:(0,u.Z)(t),superduper_reverse_proxy:"http://localhost:8000"}}),a=new Blob([e.data],{type:e.headers["content-type"]}),l=window.URL.createObjectURL(a);if(i(l),d(e.headers["content-type"]),e.headers["content-type"].startsWith("text/")){let s=await new Response(e.data).text();j(s)}}catch(e){console.error("Error fetching file:",e)}})()},[s]),n)?c.startsWith("image/")?(0,a.jsx)("img",{src:n,alt:"File Preview",className:"max-w-sm"}):c.startsWith("text/")?(0,a.jsx)("pre",{className:"bg-gray-100 p-4 rounded-lg dark:bg-gray-800 whitespace-pre-wrap",children:(0,a.jsx)("code",{children:x})}):c.startsWith("audio/")?(0,a.jsxs)("audio",{controls:!0,children:[(0,a.jsx)("source",{src:n,type:c}),"Your browser does not support the audio element."]}):c.startsWith("video/")?(0,a.jsxs)("video",{controls:!0,children:[(0,a.jsx)("source",{src:n,type:c}),"Your browser does not support the video element."]}):(0,a.jsxs)("section",{className:"p-6 border-dashed border-2 border-gray-200 rounded-lg flex flex-col items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(f,{className:"h-10 w-10"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(0,a.jsx)("div",{className:"font-medium",children:"Uploaded Byte file"})})]}),(0,a.jsx)("a",{href:n,download:!0,className:"pl-2 pr-2",children:(0,a.jsxs)(h.z,{size:"sm",variant:"outline",children:[(0,a.jsx)(m,{className:"mr-2 h-4 w-4"}),"Download"]})})]}):(0,a.jsxs)("span",{children:["Loading Artifact...",(0,a.jsx)("br",{}),(0,a.jsx)(p.Z,{})]})};function m(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}function f(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"})]})}var j=t(85688),g=t(24776),v=t(86288),w=t(1930),y=t(97747);function N(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}function b(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 6h18"}),(0,a.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,a.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})}function k(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m9 18 6-6-6-6"})})}var _=function(){(0,o.v9)(e=>e.environment.environmentLoadedValues);let e=(0,o.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[s,t]=(0,l.useState)("bytes"),[p,m]=(0,l.useState)([]),[f,_]=(0,l.useState)(""),[L,C]=(0,l.useState)(!1),z=()=>{navigator.clipboard.writeText(f),C(!0),setTimeout(()=>C(!1),2e3)},F=(0,o.I0)(),Z=(0,o.v9)(e=>e.uploadFiles.uploadFilesLoadedValues||[]),D=(0,o.v9)(e=>e.uploadFiles.uploadFilesLoadedValuesSchema||[]),A=(0,o.v9)(e=>e.uploadFiles.uploadFilesLoadedValuesComponent||[]),[S,U]=(0,l.useState)(null),[V,B]=(0,l.useState)({success:!1,message:""}),I=(0,l.useRef)(null),W=async s=>{try{let t=await r.Z.get("".concat("".concat("http://localhost:8000","/db/artifact_store/get_artifact?file_id=").concat(s)),{responseType:"blob",headers:{accept:"application/json",Authorization:(0,u.Z)(e),superduper_reverse_proxy:"http://localhost:8000"}}),a=new Blob([t.data],{type:t.headers["content-type"]}),l=window.URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.setAttribute("download",s),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(e){console.error("Error downloading file:",e)}},E=async t=>{if(!t){B({success:!1,message:"Please select a file to upload."});return}B({success:!0,message:"Uploading. Please wait patiently."});let a=new FormData;a.append("raw",t,t.name);try{let t=await r.Z.put("".concat("".concat("http://localhost:8000","/db/artifact_store/put")),a,{headers:{"Content-Type":"multipart/form-data",accept:"application/json",Authorization:(0,u.Z)(e),superduper_reverse_proxy:"http://localhost:8000"}});t.data?(console.log("FILE UPLOADED",t.data),B({success:!0,message:"Successfully uploaded files"}),F((0,c.Xs)([...Z,t.data.file_id])),F((0,c.nh)([...D,{_content:{file_id:t.data.file_id,datatype:s}}])),console.log("file uploading log",t.data.file_id),F((0,c.QL)([...A,{leaf_type:"blob",type_id:"blob",cls:"Artifact",module:"superduperdb/components/datatype",dict:{file_id:t.data.file_id}}])),i.ZP.success("Artifact uploaded successfully")):B({success:!1,message:"Upload failed. Try again with proper datatype."})}catch(e){B({success:!1,message:"Error uploading file."}),console.error("Error uploading file:",e)}},R=e=>()=>{W(e)},T=e=>()=>{console.log("Deleting:",e),F((0,c.Xs)(Z.filter(s=>s!==e))),F((0,c.nh)(D.filter(s=>s._content.file_id!==e)))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Zb,{className:"w-full",children:[(0,a.jsx)(v.Ol,{className:"space-y-1",children:(0,a.jsx)(v.ll,{children:(0,a.jsx)(d.Z,{label:(0,a.jsx)("span",{className:"text-base font-semibold leading-7 text-gray-900",children:"Upload Artifacts"}),popoverheader:"",popovercontent:(0,a.jsx)("p",{children:"You can upload various artifacts, such as bytes, images, and videos, and reference them by artifact ID."})})})}),(0,a.jsx)(v.aY,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:"col-span-4 mt-4",children:(0,a.jsx)("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault();let s=e.dataTransfer.files[0];U(s),E(s)},ref:I,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.Z,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),(0,a.jsx)("div",{className:"mx-auto mt-2"}),(0,a.jsxs)("div",{className:"mt-4 flex text-sm leading-6 text-gray-600",children:[(0,a.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500",children:[(0,a.jsx)("span",{children:"Upload an artifact"}),(0,a.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:e=>{U(e.target.files[0]),E(e.target.files[0])}})]}),(0,a.jsx)("p",{className:"pl-1",children:"or drag and drop"})]}),(0,a.jsx)("p",{className:"text-xs leading-5 text-gray-600",children:"Max filesize is 1024MB"}),V.message&&(0,a.jsx)("p",{className:"mt-2 text-sm ".concat(V.success?"text-green-500":"text-red-500"),children:V.message})]})})})})}),(0,a.jsx)(v.eW,{className:""})]}),Z&&0!==Z.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pt-2 mt-4 pb-4",children:(0,a.jsx)("label",{htmlFor:"component-type",className:"text-sm font-medium leading-6 text-gray-900",children:"Uploaded Artifacts"})}),(0,a.jsx)("div",{children:Z.map((e,s)=>(0,a.jsx)(v.Zb,{className:"mb-4",children:(0,a.jsxs)(v.Ol,{className:"flex gap-2 items-start",children:[(0,a.jsxs)("div",{className:"grid gap-0.5",children:[(0,a.jsx)(v.ll,{className:"text-sm",children:(0,a.jsx)("span",{className:"flex justify-end w-full",children:(0,a.jsx)("span",{children:e})})}),(0,a.jsx)(v.SZ,{className:"text-[#666] text-xs leading-none",children:"Refer this artifact with the reference above"})]}),(0,a.jsxs)("div",{className:"flex ml-auto gap-1.5",children:[(0,a.jsxs)(g.Vq,{children:[(0,a.jsx)(g.hg,{asChild:!0,children:(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:()=>{_(e)},children:["View Uploaded File"," ",(0,a.jsx)(k,{className:"ml-1 h-4 w-4"})]})}),(0,a.jsxs)(g.cZ,{className:"sm:max-w-md",children:[(0,a.jsxs)(g.fK,{children:[(0,a.jsx)(g.$N,{children:"Artifact"}),(0,a.jsx)(g.Be,{children:"Refer this artifact with the reference"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"grid flex-1 gap-2",children:[(0,a.jsx)(y._,{htmlFor:"link",className:"sr-only",children:"Artifact Reference Id"}),(0,a.jsx)(w.I,{id:"link",value:"@artifact/".concat(e),readOnly:!0})]}),(0,a.jsxs)(h.z,{type:"button",size:"sm",className:"px-3",onClick:z,"aria-label":L?"Copied":"Copy",children:[(0,a.jsx)("span",{className:"sr-only",children:L?"Copied":"Copy"}),(0,a.jsx)(j.TIy,{className:"h-4 w-4"})]})]}),(0,a.jsx)(g.Be,{children:(0,a.jsx)(x,{fileId:e,className:"pb-2"})}),(0,a.jsx)(g.cN,{className:"sm:justify-start",children:(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:R(e),children:["Download",(0,a.jsx)(N,{className:"ml-2 w-4 h-4"})," ",(0,a.jsx)("span",{className:"sr-only",children:"Download"})]})})]})]}),(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:R(e),children:[(0,a.jsx)(N,{className:"w-4 h-4"})," ",(0,a.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,a.jsxs)(h.z,{size:"sm",variant:"outline",onClick:T(e),children:[(0,a.jsx)(b,{className:"h-4 w-4"})," ",(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})},s))})]})]})}},1070:function(e,s,t){t.d(s,{QL:function(){return r},Xs:function(){return l},nh:function(){return n}});var a=t(30479);let l=e=>s=>s({type:a.Tj,payload:e}),n=e=>s=>s({type:a.tX,payload:e}),r=e=>s=>s({type:a.bk,payload:e})}}]);