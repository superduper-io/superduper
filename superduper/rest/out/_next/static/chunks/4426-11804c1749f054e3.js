"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4426],{28251:function(e,s,a){var t=a(27573);a(7653);var r=a(80923),n=a(5772),l=a(4429),i=a(412);s.Z=()=>{let e=(0,i.I0)(),s=(0,i.v9)(e=>e.deployment.deploymentLoadedValues),a=a=>{let{name:t,value:r}=a.target;e((0,l.a)({...s,databackendType:"haveDatabase",[t]:r}))};return(0,t.jsx)(t.Fragment,{children:s?(0,t.jsx)("div",{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(r.Z,{label:"Database Connection URI",popoverheader:"Database Connection URI",popovercontent:(0,t.jsx)("p",{children:"Here you put the connection string to your database. So, that we can connect to it. It's the full connection string."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"database_uri",name:"databaseURI",type:"text",placeholder:"<your-database-uri>",autoComplete:"database_uri",value:s.databaseURI,onChange:a,className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(r.Z,{label:"Metadata Store URI",popoverheader:"Metadata Store URI",popovercontent:(0,t.jsx)("p",{children:"Here you put a connection string of your database. So, that it could be used as metadata store. Otherwise, you can use the same as metadata store."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"metadata-store-uri",name:"metadataStoreURI",type:"text",placeholder:"<your-database-uri>",autoComplete:"metadata-store-uri",value:s.metadataStoreURI,onChange:a,className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(r.Z,{label:"Artifact Store URI",popoverheader:"Artifact Store URI",popovercontent:(0,t.jsx)("p",{children:"Artifact Store is a place where we store the artifacts. You can use the same as artifact store."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"artifact_database_uri",name:"artifactStoreURI",type:"text",placeholder:"<your-database-uri>",autoComplete:"artifact_database_uri",value:s.artifactStoreURI,onChange:a,className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})})]})}):(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(n.Z,{})})})}},56511:function(e,s,a){a.d(s,{Z:function(){return C}});var t=a(27573),r=a(7653),n=a(59260),l=a(33453),i=a(80923),o=a(5772),d=a(4429),c=a(412),u=a(23611),m=a(2187),p=a(34611),x=a(93296),h=a(75355),v=a.n(h),g=a(68321),f=a(9551),y=a(72940),j=e=>{var s,a,n,l,o,d,h,j,b,N,C,w,P;let{data:I}=e,E=(0,c.I0)(),_=(0,c.v9)(e=>e.chartsgroups.chartsLoadedValues),[A,S]=(0,r.useState)(!1),Z=(0,c.v9)(e=>e.nodegroups.nodeUniqueLabels),[L,U]=(0,r.useState)({database:(null==I?void 0:null===(n=I.spec)||void 0===n?void 0:null===(a=n.mongodbParams)||void 0===a?void 0:null===(s=a.auth)||void 0===s?void 0:s.database)||"",username:(null==I?void 0:null===(d=I.spec)||void 0===d?void 0:null===(o=d.mongodbParams)||void 0===o?void 0:null===(l=o.auth)||void 0===l?void 0:l.username)||"",password:(null==I?void 0:null===(b=I.spec)||void 0===b?void 0:null===(j=b.mongodbParams)||void 0===j?void 0:null===(h=j.auth)||void 0===h?void 0:h.password)||"",replicaCount:(null==I?void 0:null===(C=I.spec)||void 0===C?void 0:null===(N=C.mongodbParams)||void 0===N?void 0:N.replicaCount)||0,computeClass:(null==I?void 0:null===(P=I.spec)||void 0===P?void 0:null===(w=P.mongodbParams)||void 0===w?void 0:w.computeClass)||""}),k=(0,r.useRef)(L),T=(0,r.useRef)(_);(0,r.useEffect)(()=>{v()(L,k.current)&&v()(_,T.current)||(console.log(),R(),k.current=L,T.current=_)},[L,_,g.V]);let R=()=>{try{let{database:e,username:s,password:a,replicaCount:t,computeClass:r}=L;I.spec.mongodbParams.auth.database=e,I.spec.mongodbParams.auth.username=s,I.spec.mongodbParams.auth.password=a,I.spec.mongodbParams.replicaCount=t,I.spec.mongodbParams.computeClass=r;let n=_.items.map(e=>e.name===I.name?I:e);E((0,p.Gi)({items:n})),x.ZP.success("MongoDB Params Updated!",{id:"unique-toast-id"})}catch(e){x.ZP.error("Something is wrong! Please try again.")}},D=e=>{let{name:s,value:a}=e.target;U(e=>({...e,[s]:a}))};return(0,t.jsxs)("div",{className:"overflow-visible",children:[Z&&_&&(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(i.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run in a particular node! If you want a custom label first add labels in a node!"})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("select",{name:"computeClass",value:L.computeClass,onChange:D,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,t.jsx)("option",{value:"",children:"Select ComputeClass"}),[...Z].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(i.Z,{label:"Database Name",popoverheader:"Name of the Database",popovercontent:(0,t.jsx)("p",{children:"Please provide the name of your database. It is the specific database you want to connect to."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"database",value:L.database,onChange:D,type:"text",placeholder:"Type your database name",autoComplete:"database-name",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(i.Z,{label:"Username",popoverheader:"Database Username",popovercontent:(0,t.jsx)("p",{children:"Please provide your username here. It is used to connect to your database from your cluster."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"username",value:L.username,onChange:D,type:"text",placeholder:"Type your database username",autoComplete:"username",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(i.Z,{label:"Password",popoverheader:"Database Password",popovercontent:(0,t.jsx)("p",{children:"Please provide your password here. It is used to authenticate connections to your database."})}),(0,t.jsxs)("div",{className:"mt-2 relative",children:[(0,t.jsx)("input",{id:"password",value:L.password,onChange:D,type:A?"text":"password",placeholder:"Type your database password",autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pr-10"}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>S(!A),className:"text-gray-400 hover:text-gray-500",children:A?(0,t.jsx)(f.Z,{className:"h-5 w-5","aria-hidden":"true"}):(0,t.jsx)(y.Z,{className:"h-5 w-5","aria-hidden":"true"})})})]})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-8",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(i.Z,{label:"Replica Count",popoverheader:"Replica Count",popovercontent:(0,t.jsx)("p",{children:"Please provide the replica count. It represents the number of replicas for your database."})}),(0,t.jsxs)("div",{className:"flex items-center justify-left mt-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{U(e=>({...e,replicaCount:Math.max(e.replicaCount-1,1)}))},className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mr-4",children:(0,t.jsx)(u.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,t.jsx)("input",{disabled:!0,name:"replicaCount",value:L.replicaCount,onChange:D,type:"number",className:"w-16 text-center block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("button",{type:"button",onClick:()=>{U(e=>({...e,replicaCount:e.replicaCount+1}))},className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ml-4",children:(0,t.jsx)(m.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})]})})]})},b=a(28251);function N(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter(Boolean).join(" ")}var C=()=>{var e;let s=(0,c.I0)(),a=(0,c.v9)(e=>e.chartsgroups.chartsLoadedValues),i=(0,c.v9)(e=>e.nodegroups.nodeUniqueLabels),u=(0,c.v9)(e=>e.deployment.deploymentLoadedValues),[m,p]=(0,r.useState)("deployDatabase"),[x,h]=(0,r.useState)({databaseURI:"",databaseType:"",metadataStoreURI:"",artifactStoreURI:""});return(0,r.useEffect)(()=>{s((0,d.a)({databackendType:m,...x}))},[x,m,s,a]),(0,t.jsx)(t.Fragment,{children:u&&i?(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.E,{value:u.databackendType,onChange:p,children:[(0,t.jsx)(n.E.Label,{className:"text-base font-semibold leading-6 text-gray-900"}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4",children:[{id:"deployDatabase",title:"Deploy a database",description:"We can deploy a database for you, and you can start using it right away.",users:"Deploy database",disabled:!1,active:!0},{id:"haveDatabase",title:"Connect existing database",description:"If you have a database, select this option and add the uri below.",users:"Host existing data",disabled:!1,active:!1}].map(e=>(0,t.jsx)(n.E.Option,{disabled:e.disabled,value:e.id,className:e=>{let{checked:s,active:a}=e;return N(s?"border-transparent":"border-gray-300",a?"border-indigo-600 ring-2 ring-indigo-600":"","relative flex cursor-pointer rounded-lg border bg-white p-4 shadow-sm focus:outline-none")},children:s=>{let{checked:a,active:r}=s;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex flex-1",children:(0,t.jsxs)("span",{className:"flex flex-col",children:[(0,t.jsx)(n.E.Label,{as:"span",className:"block text-sm font-medium text-gray-900",children:e.title}),(0,t.jsx)(n.E.Description,{as:"span",className:"mt-1 flex items-center text-sm text-gray-500",children:e.description}),(0,t.jsx)(n.E.Description,{as:"span",className:"mt-6 text-sm font-medium text-gray-900",children:e.users})]})}),(0,t.jsx)(l.Z,{className:N(a?"":"invisible","h-5 w-5 text-indigo-600"),"aria-hidden":"true"}),(0,t.jsx)("span",{className:N(r?"border":"border-2",a?"border-indigo-600":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"),"aria-hidden":"true"})]})}},e.id))})]}),(0,t.jsx)("br",{}),"deployDatabase"===m&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)("label",{htmlFor:"database-type",className:"block text-sm font-medium leading-6 text-gray-900",children:"Select Database"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("select",{id:"database-type",name:"databaseType",autoComplete:"database-type",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",value:x.databaseType,onChange:e=>{let{name:s,value:a}=e.target;h(e=>({...e,[s]:a}))},children:[(0,t.jsx)("option",{value:"",children:"Select Database"}),(null==a?void 0:a.items)&&(null==a?void 0:a.items.filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)==="databases"}).map(e=>e.name).map(e=>(0,t.jsx)("option",{value:e,children:e.toLowerCase()},e)))]})}),a&&"mongodb"==x.databaseType&&(null==a?void 0:null===(e=a.items)||void 0===e?void 0:e.map((e,s)=>(0,t.jsx)(t.Fragment,{children:"mongodb"==e.name&&(0,t.jsx)(j,{data:e},s)})))]})}),"haveDatabase"===m&&(0,t.jsx)(b.Z,{})]}):(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(o.Z,{})})})}},73042:function(e,s,a){a.d(s,{Z:function(){return m}});var t=a(27573),r=a(7653),n=a(80923),l=a(34611),i=a(65454);let o=e=>s=>s({type:i.s,payload:e});var d=a(412),c=a(94432),u=a(74859),m=e=>{let{data:s}=e,a=(0,d.I0)(),i=(0,d.v9)(e=>e.chartsgroups.chartsLoadedValues),m=(0,d.v9)(e=>e.nodegroups.nodeUniqueLabels),p=(0,d.v9)(e=>{var s;return null==e?void 0:null===(s=e.userEnv)||void 0===s?void 0:s.userEnvLoadedValues});return(0,r.useEffect)(()=>{u.env.NEXT_PUBLIC_SUPERDUPER_IMAGE&&(e=>{try{let{name:s,tag:t}=(0,c.Z)(e),r=i.items.map(e=>{for(let a of Object.keys(e.spec))a.endsWith("Params")&&e.spec[a].image&&(e.spec[a].image.name=s,e.spec[a].image.tag=t);return e});console.log("Updated items:",r),a((0,l.Gi)({items:r}))}catch(e){console.error("Update failed:",e)}})(u.env.NEXT_PUBLIC_SUPERDUPER_IMAGE)},[]),(0,r.useEffect)(()=>{a(o({...p,image:u.env.NEXT_PUBLIC_SUPERDUPER_IMAGE}))},[]),(0,t.jsx)("div",{children:m&&(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(n.Z,{label:"Update Default Image",popoverheader:"Update Default Image",popovercontent:(0,t.jsx)("p",{children:"Please select the default Docker image for all services. All our services use the same Docker image."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"imageandtag",value:p.image,onChange:e=>{a(o({...p,image:e.target.value}))},className:"block w-3/4 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:p.image||"Enter image and tag"})})]})})})}},15055:function(e,s,a){a.d(s,{Z:function(){return T}});var t=a(27573),r=a(7653),n=a(13908),l=a(88146),i=a(56511),o=a(28251),d=a(93296),c=a(412),u=a(64520),m=a(81695),p=a(72513),x=a(85688),h=a(98348),v=a(73042),g=a(35463),f=a(7682),y=a(46346),j=a(58991),b=a(34611),N=a(60855),C=a(72090);function w(e){try{if(console.log("Processing payload:",e),!e||!Array.isArray(e.items))return[];return e.items.filter(e=>e.status&&!0===e.status.isEmpty).map(e=>e.name)}catch(e){return console.error("Error processing payload:",e),[]}}var P=a(5772),I=a(45246),E=a(7109),_=a(36531),A=a(19434),S=a(45696),Z=a.n(S),L=a(94432),U=a(74859);function k(e){return Array.isArray(e)&&e.length>0?Array.isArray(e[0])?e[0]:e:[]}function T(){let e=(0,c.I0)(),s=(0,c.v9)(e=>e.environment.environmentLoadedValues),a=(0,c.v9)(e=>{var s;return null==e?void 0:null===(s=e.userEnv)||void 0===s?void 0:s.userEnvLoadedValues}),S=(0,c.v9)(e=>e.extraEnvVars),T=(0,c.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),R=(0,c.v9)(e=>e.secrets),D=(0,m.useRouter)(),B=(0,c.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),X=(0,c.v9)(e=>e.chartsgroups.chartsLoadedValues),F=(0,c.v9)(e=>e.nodegroups.nodeLoadedValues),V=(0,c.v9)(e=>e.deployment.deploymentLoadedValues),z=(0,c.v9)(e=>e.extraEnvVars),[O,W]=(0,r.useState)("Something went wrong while creating the deployment. Please try again later."),[q,G]=(0,r.useState)(!1),[M,K]=(0,r.useState)(!1),[Y,$]=(0,r.useState)(!1),[H,J]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)(!0),[es,ea]=(0,r.useState)([]),et=s=>{try{let{name:a,tag:t}=(0,L.Z)(s);if(!a||!t){console.error("Invalid image or tag:",a,t),d.ZP.error("Invalid image or tag. Please try again.");return}let r=X.items.map(e=>{for(let s of Object.keys(e.spec))s.endsWith("Params")&&e.spec[s].image&&(e.spec[s].image.name=a,e.spec[s].image.tag=t);return e});console.log("Updated items:",r),e((0,b.Gi)({items:r}))}catch(e){console.error("Update failed:",e)}};(0,r.useEffect)(()=>{(async function(){ee(!0);try{function a(s){let a=[...S],t=s.filter(e=>!a.some(s=>s.name===e));t.length>0&&(t.forEach(e=>{a.push({name:e,value:""})}),e((0,A.I)(Z()(a))))}let t=e=>(console.error("Error occurred:",e),console.log("Using fallback logic. Returning an empty array."),a([]),[]),r=async()=>{try{let e="".concat(U.env.NEXT_PUBLIC_API,"/secrets?deployment=").concat(B),t=await n.Z.get(e,{headers:{Accept:"application/json",Authorization:(0,E.Z)(T),superduper_reverse_proxy:U.env.NEXT_PUBLIC_API||s.NEXT_PUBLIC_API}});console.log("Secrets retrieved successfully:",t.data);let r=function(e){try{if(e&&Array.isArray(e.items))return e.items.map(e=>e.name)}catch(e){console.error("Error processing payload:",e)}return[]}(t.data);return ea(w(t.data)),console.log("Empty Secrets",w(t.data)),a(r),r}catch(e){return t(e)}},l=await r();console.log("Final secrets array:",l)}catch(e){console.error("Error fetching secrets:",e)}finally{ee(!1)}})()},[]),(0,r.useEffect)(()=>{let a=async()=>{try{let a=await n.Z.get("".concat("".concat(U.env.NEXT_PUBLIC_API,"/charts?deployment=").concat(B)),{headers:{Accept:"application/json",Authorization:(0,E.Z)(T),superduper_reverse_proxy:U.env.NEXT_PUBLIC_API||s.NEXT_PUBLIC_API}});console.log("Charts API data:",a.data),e((0,b.Gi)(a.data))}catch(e){console.error("Error fetching Services API data")}};X||a()},[]),(0,r.useEffect)(()=>{let a=async()=>{try{let a=await n.Z.get("".concat("".concat(U.env.NEXT_PUBLIC_API,"/nodegroups?deployment=").concat(B)),{headers:{Accept:"application/json",Authorization:(0,E.Z)(T),superduper_reverse_proxy:U.env.NEXT_PUBLIC_API||s.NEXT_PUBLIC_API}});console.log("Nodegroups API data:",a.data);let t=a.data.items.map(e=>e.spec.extraComputeClass&&e.spec.extraComputeClass.length>0?e:{...e,spec:{...e.spec,extraComputeClass:[...new Set([...e.spec.extraComputeClass||[],"base"].filter(Boolean))]},status:{...e.status,reservation:{...e.status.reservation,state:"Idle"}}});console.log("Updated Nodegroups API data:",t),e((0,N.NB)({items:t})),e((0,N.Bw)({items:t}))}catch(e){console.error("Error fetching API data:",e),d.ZP.error("Error fetching Node Groups data")}};F||a()},[]);let er=()=>{if(X&&X.items){let s=function e(s){if(Array.isArray(s))return s.map(s=>e(s));if("object"!=typeof s||null===s)return s;for(let a in s)s[a]=e(s[a]),"computeClass"===a&&(s[a]="base");return s}(X.items);e((0,b.Gi)({items:s}))}else console.error("chartsgroups or chartsgroups.items is undefined")},en=async()=>{let e;try{er(),et(null==a?void 0:a.image),window.scrollTo({top:0,behavior:"smooth"});let t={name:B,spec:{fake:!!B.startsWith("fake"),dataEndpoints:{artifactStore:{backendType:"",connectionURI:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE?"filesystem:///artifacts":(null==V?void 0:V.databaseURI)?"filesystem://":""},dataStore:{backendType:"",connectionURI:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE?"snowflake://":(null==V?void 0:V.databaseURI)||""},metadataStore:{backendType:"",connectionURI:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE?"snowflake://":(null==V?void 0:V.databaseURI)||""},extraEnvVars:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE?[]:z||[]},nodeGroupList:F.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.extraComputeClass)&&e.spec.extraComputeClass.length>0}),secrets:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE&&k(R)||[],serviceList:X.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{if("true"===U.env.NEXT_PUBLIC_SNOWFLAKE){var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:e.name)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0})}};J(!0),console.log("\uD83D\uDC49 REQUEST DATA",t);let r={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:(0,E.Z)(T),superduper_reverse_proxy:U.env.NEXT_PUBLIC_API||s.NEXT_PUBLIC_API}};G(!0),e=d.ZP.loading("Deployment in progress...",{duration:1/0}),await new Promise(e=>setTimeout(e,3e3));let l=await n.Z.post("".concat("".concat(U.env.NEXT_PUBLIC_API,"/deployments")),t,r);console.log("RESULT:",l.data),await new Promise(e=>setTimeout(e,5e3)),d.ZP.dismiss(e),window.location.assign("/webui/deployment?deployment=done&query=1m"),d.ZP.success("Deployment successful!",{icon:"\uD83D\uDE80",duration:5e3})}catch(s){var t,r;e&&d.ZP.dismiss(e),s.response&&"true"===U.env.NEXT_PUBLIC_SNOWFLAKE&&200!==s.response.status&&400!==s.response.status?(console.error("Deployment Form Submission Error:",s.response.data),W((null===(t=s.response)||void 0===t?void 0:t.data)||s.message)):(console.error("Deployment Form Submission Error:",s),W((null===(r=s.response)||void 0===r?void 0:r.data)||s.message)),$(!0),d.ZP.error("Deployment failed. Please try again.",{duration:5e3})}finally{J(!1),G(!1),K(!1)}},el=async()=>{let e;try{er(),et(null==a?void 0:a.image);let t={name:B,spec:{fake:!!B.startsWith("fake"),dataEndpoints:{artifactStore:{backendType:"",connectionURI:(null==V?void 0:V.artifactStoreURI)||""},dataStore:{backendType:"",connectionURI:(null==V?void 0:V.databaseURI)||""},metadataStore:{backendType:"",connectionURI:(null==V?void 0:V.metadataStoreURI)||""},extraEnvVars:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE?[]:z||[]},nodeGroupList:F.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.extraComputeClass)&&e.spec.extraComputeClass.length>0}),secrets:"true"==U.env.NEXT_PUBLIC_SNOWFLAKE&&k(R)||[],serviceList:X.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{if("true"===U.env.NEXT_PUBLIC_SNOWFLAKE){var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:e.name)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0})}};console.log("\uD83D\uDC49 REQUEST DATA",t),G(!0),e=d.ZP.loading("Retrying deployment...",{duration:1/0}),await new Promise(e=>setTimeout(e,5e3));let r={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:(0,E.Z)(T),superduper_reverse_proxy:U.env.NEXT_PUBLIC_API||s.NEXT_PUBLIC_API}},l=await n.Z.post("".concat("".concat(U.env.NEXT_PUBLIC_API,"/deployments")),t,r);console.log("RESULT:",l.data),await new Promise(e=>setTimeout(e,5e3)),d.ZP.dismiss(e),d.ZP.success("Deployment is successful.",{duration:5e3}),D.push("/webui/deployment?deployment=done&query=1m",void 0,{shallow:!1}),K(!1)}catch(s){if(e&&d.ZP.dismiss(e),s.response&&200!==s.response.status&&400!==s.response.status)console.error("Deployment Form Submission Error:",s.response.data),D.push("/webui/deployment?deployment=done&query=1m",void 0,{shallow:!1}),d.ZP.success("Deployment successful!",{icon:"\uD83D\uDE80",duration:5e3});else{var t;console.error("Deployment Form Submission Error:",s),W((null===(t=s.response)||void 0===t?void 0:t.data)||s.message),$(!0),d.ZP.error("Deployment retry failed. Please try again.",{duration:5e3})}}finally{G(!1),K(!1)}};return q?(0,t.jsx)(j.Z,{}):Q?(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(P.Z,{times:6}),";"]}):S&&0!==S.length?es.length<0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Z,{header:"Missing Secrets",shortMessage:"Please create the following secrets: ".concat(es.join(", ")),status:"404",description:"You have to create the listed secrets first from /secrets page."}),(0,t.jsx)("div",{className:"my-4 border-t border-gray-300"}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)("a",{href:"/webui/secrets",children:(0,t.jsxs)(_.z,{className:"mt-4 mx-auto w-full max-w-md p-6 text-lg rounded-lg flex items-center justify-center space-x-2 bg-blue-600 text-white hover:bg-blue-700",children:[(0,t.jsx)(C.Z,{className:"w-6 h-6"})," ",(0,t.jsx)("span",{children:"Create Secrets"})]})})})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"space-y-2",children:["true"!==U.env.NEXT_PUBLIC_SNOWFLAKE&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Add Databackend"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"At first you have to add a database to your deployment. You can update the parameters below. We will deploy and handle the rest."}),(0,t.jsx)("br",{}),"true"!==U.env.NEXT_PUBLIC_SNOWFLAKE?(0,t.jsx)(i.Z,{}):(0,t.jsx)(o.Z,{})]}),(0,t.jsx)("br",{})]}),(0,t.jsxs)("div",{className:"pb-4",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Define Image"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Update the image you want to install on your deployment."}),(0,t.jsxs)("div",{style:{marginLeft:"-1.5rem!important"},children:[(0,t.jsx)(v.Z,{}),"true"==U.env.NEXT_PUBLIC_SNOWFLAKE?(0,t.jsx)("div",{className:"hidden",children:(0,t.jsx)(f.Z,{})}):(0,t.jsx)("div",{className:"hidden",children:(0,t.jsx)(g.Z,{})})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,t.jsx)(l.default,{href:"/webui",children:(0,t.jsx)("button",{type:"button",className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"})}),(0,t.jsxs)(u.aR,{children:[(0,t.jsx)(u.vW,{className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Start Deployment"}),(0,t.jsxs)(u._T,{children:[(0,t.jsxs)(u.fY,{children:[(0,t.jsx)(u.f$,{children:"Start creating deployment now..."}),(0,t.jsx)(u.yT,{children:"This will create a deployment and it will take some time to finish. Please be patient. Do you want to continue?"})]}),(0,t.jsxs)(u.xo,{children:[(0,t.jsx)(u.le,{children:"Cancel"}),(0,t.jsx)(u.OL,{onClick:()=>{K(!0),en()},children:"Continue"})]})]})]})]}),(0,t.jsx)(u.aR,{open:M,children:(0,t.jsx)(u._T,{children:(0,t.jsxs)(u.fY,{children:[(0,t.jsx)(u.f$,{children:"Started deployment process..."}),(0,t.jsx)(u.yT,{children:"This initiates a deployment process that may take some time. Please wait patiently. You'll be redirected to the dashboard once it's complete."}),(0,t.jsx)("br",{}),(0,t.jsx)(h.O,{})]})})}),(0,t.jsx)(u.aR,{open:Y,children:(0,t.jsxs)(u._T,{children:[(0,t.jsxs)(u.fY,{children:[(0,t.jsx)(u.f$,{children:"Deployment Failed"}),(0,t.jsx)(u.yT,{children:(0,t.jsxs)(p.bZ,{variant:"destructive",children:[(0,t.jsx)(x.LPM,{className:"h-4 w-4"}),(0,t.jsx)(p.Cd,{children:"Error"}),(0,t.jsx)(y.x,{className:"scrollbar-visible h-[200px] w-full mt-2 pr-4",children:(0,t.jsx)(p.X,{children:O})})]})})]}),(0,t.jsxs)(u.xo,{children:[(0,t.jsx)(u.le,{onClick:()=>{$(!1),K(!1)},children:"Cancel"}),(0,t.jsx)(u.OL,{onClick:()=>{K(!0),$(!1),el()},children:"Retry Now"})]})]})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Z,{header:"No secrets added",shortMessage:"Please create secrets at first before proceeding.",status:"404",description:"You have to add a secret first from /secrets page."}),(0,t.jsx)("div",{className:"my-4 border-t border-gray-300"}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)("a",{href:"/webui/secrets",children:(0,t.jsxs)(_.z,{className:"mt-4 mx-auto w-full max-w-md p-6 text-lg rounded-lg flex items-center justify-center space-x-2 bg-blue-600 text-white hover:bg-blue-700",children:[(0,t.jsx)(C.Z,{className:"w-6 h-6"})," ",(0,t.jsx)("span",{children:"Create Secrets"})]})})})]})}},43210:function(e,s,a){a.d(s,{Z:function(){return el}});var t=a(27573),r=a(7653),n=a(13908),l=a(88146),i=a(5772),o=a(93296),d=a(61284),c=a(63130),u=a(36531),m=a(412),p=a(60855);function x(e){let{data:s}=e,a=(0,m.I0)(),n=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels)||[],[l,i]=(0,r.useState)(""),d=async()=>{if(!l){o.ZP.error("Please type a ComputeClass before adding.",{id:"no-input-toast"});return}if(n.includes(l)){o.ZP.error("This ComputeClass is already added! Add a new ComputeClass!");return}try{a((0,p.Lj)([...n,l])),i(""),o.ZP.success("Successfully added!")}catch(e){o.ZP.error("An error occurred. Please reload and try again!")}};return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Add ComputeClass"}),(0,t.jsx)("input",{type:"text",className:"mt-2 w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:l,onChange:e=>{i(e.target.value)},placeholder:"Type ComputeClass here..."}),(0,t.jsx)(u.z,{type:"button",className:"mt-2",onClick:d,children:"Add Now"})]})}var h=a(85688),v=a(4482),g=a(42502),f=a(64303),y=a(4216),j=a(80500),b=a(95042),N=a(12900),C=a(7109),w=a(74859);let P=(e,s)=>[...e].sort((e,a)=>{for(let[t,r]of Object.entries(s)){let s=parseFloat(e.status.capacity[t]),n=parseFloat(a.status.capacity[t]);if(s!==n)return s<n?"asc"===r?-1:1:"asc"===r?1:-1}return 0});function I(e){let{nodegroupsStatus:s}=e,a=(0,m.v9)(e=>e.environment.environmentLoadedValues),l=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),I=(0,m.I0)(),_=(0,m.v9)(e=>e.nodegroups.nodeLoadedValues),A=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),S=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels)||[];(0,r.useEffect)(()=>{let e=async()=>{try{let e=(await n.Z.get("".concat("".concat(w.env.NEXT_PUBLIC_API,"/nodegroups?deployment=").concat(A)),{headers:{Accept:"application/json",Authorization:(0,C.Z)(l),superduper_reverse_proxy:w.env.NEXT_PUBLIC_API||a.NEXT_PUBLIC_API}})).data.items.map(e=>e.spec.extraComputeClass&&e.spec.extraComputeClass.length>0?e:{...e,spec:{...e.spec,extraComputeClass:[...new Set([...e.spec.extraComputeClass||[],"base"].filter(Boolean))]},status:{...e.status,reservation:{...e.status.reservation,state:"Idle"}}});I((0,p.NB)({items:e})),I((0,p.Bw)({items:e}))}catch(e){console.error("Error fetching API data:",e),o.ZP.error("Error fetching Node Groups data")}};_||e()},[]);let[Z,L]=(0,r.useState)({numCPUs:"asc",numGPUs:"asc",memoryMB:"asc",ephemeralStorageMB:"asc"}),U=(e,s)=>{L(a=>({...a,[e]:s}))},[,k]=(0,r.useState)(),T=()=>k({}),[R,D]=(0,r.useState)(()=>S.length?S[S.length-1]:"base"),[B,X]=(0,r.useState)(0);(0,r.useEffect)(()=>{S.length&&(0===B?(D("base"),X(e=>e+1)):(D(S[S.length-1]),X(e=>e+1)))},[S]),(0,r.useEffect)(()=>{if(console.log("Sorting nodegroups with sortOrder:",Z),null==_?void 0:_.items){let e=P(_.items,Z);console.log("Sorted items:",e),I((0,p.NB)({items:e})),T()}},[Z]);let F=async(e,s)=>{var a,t;(null==e?void 0:e.spec)||(e.spec={}),(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.extraComputeClass)||(e.spec.extraComputeClass=[]);let r=(null==e?void 0:null===(t=e.spec)||void 0===t?void 0:t.extraComputeClass)||[];if(r.includes(s)){try{for(let a=e.spec.extraComputeClass.length-1;a>=0;a--)e.spec.extraComputeClass[a]===s&&e.spec.extraComputeClass.splice(a,1);e.spec.exclusiveReservation=null,e.status.reservation.state="Idle";let a=_.items.map(s=>s.name===e.name?e:s);I((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is removed from ").concat(e.name,"!"),{icon:"❎",id:"updated-toast"}),T()}catch(e){o.ZP.error("An error occurred",{id:"updated-toast"})}return}try{e.spec.extraComputeClass=[...r,s],e.status.reservation.state="Shared";let a=_.items.map(s=>s.name===e.name?e:s);I((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is added to ").concat(e.name,"!"),{icon:"✅",id:"updated-toast"}),T()}catch(e){o.ZP.error("An error occurred. Please reload and try again!")}},V=async(e,s)=>{var a,t,r;if((null==e?void 0:e.spec)||(e.spec={}),(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.extraComputeClass)||(e.spec.extraComputeClass=[]),(null==e?void 0:null===(t=e.spec)||void 0===t?void 0:t.exclusiveReservation)||(e.spec.exclusiveReservation=null),((null==e?void 0:null===(r=e.spec)||void 0===r?void 0:r.exclusiveReservation)||null)===s){try{e.spec.exclusiveReservation=null,e.status.reservation.state="Shared";let a=_.items.map(s=>s.name===e.name?e:s);I((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is removed from ").concat(e.name,"!"),{icon:"❎",id:"updated-toast"}),T()}catch(e){o.ZP.error("An error occurred",{id:"updated-toast"})}return}try{e.spec.exclusiveReservation=s,e.spec.extraComputeClass=[s],e.status.reservation.state="Exclusive";let a=_.items.map(s=>s.name===e.name?e:s);I((0,p.NB)({items:a})),(0,o.ZP)("".concat(s," is exclusively added to ").concat(e.name,"! It will remove the reserved status from all other nodes."),{icon:"✅",id:"updated-toast"}),T()}catch(e){o.ZP.error("An error occurred. Please reload and try again!")}},z=e=>{try{var s;return"string"==typeof(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.exclusiveReservation)&&""!==e.spec.exclusiveReservation.trim()}catch(e){return console.error("Error in reserveDefineDisableOrNot:",e),!1}},O=(e,s)=>{try{var a,t,r,n,l,i,o,d,c,u;if(null==e?void 0:null===(r=e.spec)||void 0===r?void 0:null===(t=r.extraComputeClass)||void 0===t?void 0:t.includes(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.exclusiveReservation)){if((null==e?void 0:null===(u=e.spec)||void 0===u?void 0:u.exclusiveReservation)===s)return!1;return!0}if((null==e?void 0:null===(n=e.spec)||void 0===n?void 0:n.exclusiveReservation)||!(null==e?void 0:null===(i=e.spec)||void 0===i?void 0:null===(l=i.extraComputeClass)||void 0===l?void 0:l.length))return!0;null==e||null===(c=e.spec)||void 0===c||null===(d=c.extraComputeClass)||void 0===d||d.includes(null==e?void 0:null===(o=e.spec)||void 0===o?void 0:o.exclusiveReservation)}catch(e){}return!1},W=(e,s)=>{try{if(1===S.length){o.ZP.error("At least one ComputeClass is required!",{id:"removed-toast"});return}let a=e.items.map(e=>{let a=JSON.parse(JSON.stringify(e));if(a.spec.exclusiveReservation===s&&(a.spec.exclusiveReservation=null),Array.isArray(a.spec.extraComputeClass)){let e=a.spec.extraComputeClass.indexOf(s);-1!==e&&a.spec.extraComputeClass.splice(e,1)}return a});I((0,p.NB)({items:a})),I((0,p.Lj)([...S.filter(e=>e!==s)])),D(S[S.length-1]),T(),(0,o.ZP)("Successfully removed!",{id:"removed-toast"})}catch(e){console.error("Error in handleRemoveComputeClassAndReservation:",e)}},[q,G]=(0,r.useState)("all"),M=e=>{G(e)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:_?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"-ml-4 mt-4 mb-2 bg-white px-4 py-2 sm:px-4",children:(0,t.jsxs)(f.mQ,{defaultValue:R,value:R,onValueChange:e=>D(e),className:"w-full",children:[(0,t.jsx)(f.dr,{children:(0,t.jsxs)("div",{className:"flex",children:[S.map(e=>(0,t.jsxs)(f.SP,{value:e,children:[e," ",(0,t.jsx)(c.Z,{onClick:()=>{W(_,e)},className:"-mr-1 h-4 w-4","aria-hidden":"true"})]},e)),(0,t.jsxs)(b.J2,{children:[(0,t.jsx)(b.xo,{asChild:!0,children:(0,t.jsx)(u.z,{className:"rounded-full",variant:"primary",children:(0,t.jsx)(E,{className:"h-5 w-5"})})}),(0,t.jsxs)(b.yk,{className:"w-80",children:[(0,t.jsx)(d.xp,{asChild:!0,children:(0,t.jsx)(c.Z,{className:"ml-auto -mb-2 h-5 w-5 flex text-gray-400 cursor-pointer hover:text-gray-500","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium leading-none",children:"Add ComputeClass"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can select the compute class for the node later."})]}),(0,t.jsx)("div",{className:"grid gap-2",children:(0,t.jsx)(x,{data:_})})]})]})]})]})}),S.map(e=>(0,t.jsx)(f.nU,{value:e,children:(0,t.jsx)("div",{className:"container mx-auto px-0 py-2 w-full",children:(0,t.jsx)("div",{className:"border rounded-lg overflow-x-auto w-full",children:(0,t.jsxs)(j.iA,{children:[(0,t.jsx)(j.xD,{children:(0,t.jsxs)(j.SC,{children:[(0,t.jsx)(j.ss,{className:"text-center px-1",children:(0,t.jsx)(N.C,{variant:"outline",children:"Reserve"})}),(0,t.jsx)(j.ss,{className:"text-center px-1",children:(0,t.jsx)(N.C,{variant:"outline",children:"Exclusive"})}),(0,t.jsx)(j.ss,{children:(0,t.jsx)(N.C,{variant:"outline",children:"Node Name"})}),(0,t.jsx)(j.ss,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"ghost",size:"sm",className:"px-0",children:["CPU",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:Z.numCPUs,onValueChange:e=>U("numCPUs",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(j.ss,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"ghost",size:"sm",className:"px-0",children:["GPU",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:Z.numGPUs,onValueChange:e=>U("numGPUs",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(j.ss,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"ghost",className:"px-0",size:"sm",children:["RAM",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:Z.memoryMB,onValueChange:e=>U("memoryMB",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(j.ss,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{className:"px-0",variant:"ghost",size:"sm",children:["Storage",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:Z.ephemeralStorageMB,onValueChange:e=>U("ephemeralStorageMB",e),children:[(0,t.jsx)(g.qB,{value:"asc",children:"Ascending"}),(0,t.jsx)(g.qB,{value:"desc",children:"Descending"})]})})]})}),(0,t.jsx)(j.ss,{className:"text-center",children:(0,t.jsxs)(g.h_,{children:[(0,t.jsx)(g.$F,{asChild:!0,children:(0,t.jsxs)(u.z,{className:"px-0",variant:"ghost",size:"sm",children:["State",(0,t.jsx)(h.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(g.AW,{align:"end",className:"w-[200px]",children:(0,t.jsxs)(g._x,{value:q,onValueChange:e=>M(e),children:[(0,t.jsx)(g.qB,{value:"all",children:"Show All"}),(0,t.jsx)(g.qB,{value:"IDLE",children:"IDLE"}),(0,t.jsx)(g.qB,{value:"SHARED",children:"SHARED"}),(0,t.jsx)(g.qB,{value:"EXCLUSIVE",children:"EXCLUSIVE"})]})})]})})]})}),(0,t.jsx)(j.RM,{children:null==_?void 0:_.items.filter(e=>{let s=q.toLowerCase();return"all"===s||!["exclusive","idle","shared"].includes(s)||e.status.reservation.state.toLowerCase()===s}).map((s,a)=>{var r,n,l,i,o,d,c,u,m,p,x,h,g,f,b,N,C;return(0,t.jsxs)(j.SC,{children:[(0,t.jsx)(j.pj,{className:"text-center",children:(0,t.jsx)(y.X,{id:e,onCheckedChange:()=>{F(s,e)},checked:null==s?void 0:null===(n=s.spec)||void 0===n?void 0:null===(r=n.extraComputeClass)||void 0===r?void 0:r.includes(e),defaultChecked:null==s?void 0:null===(i=s.spec)||void 0===i?void 0:null===(l=i.extraComputeClass)||void 0===l?void 0:l.includes(e),disabled:z(s)})}),(0,t.jsx)(j.pj,{className:"text-center",children:(0,t.jsx)(y.X,{id:e+e,onCheckedChange:()=>{V(s,e)},checked:(null==s?void 0:null===(o=s.spec)||void 0===o?void 0:o.exclusiveReservation)===e,defaultChecked:(null==s?void 0:null===(d=s.spec)||void 0===d?void 0:d.exclusiveReservation)===e,disabled:O(s,e)})}),(0,t.jsx)(j.pj,{children:null==s?void 0:s.name.replace(/\.compute\.internal/g,"")}),(0,t.jsx)(j.pj,{className:"text-center",children:null==s?void 0:null===(u=s.status)||void 0===u?void 0:null===(c=u.capacity)||void 0===c?void 0:c.numCPUs}),(0,t.jsx)(j.pj,{className:"text-center",children:null==s?void 0:null===(p=s.status)||void 0===p?void 0:null===(m=p.capacity)||void 0===m?void 0:m.numGPUs}),(0,t.jsxs)(j.pj,{className:"text-center",children:[null==s?void 0:null===(h=s.status)||void 0===h?void 0:null===(x=h.capacity)||void 0===x?void 0:x.memoryMB,"MB"]}),(0,t.jsxs)(j.pj,{className:"text-center",children:[(parseInt(String(null==s?void 0:null===(f=s.status)||void 0===f?void 0:null===(g=f.capacity)||void 0===g?void 0:g.ephemeralStorageMB),10)/1024).toFixed(2),"GB"]}),(0,t.jsx)(j.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("span",{className:"",children:(null==s?void 0:null===(b=s.spec)||void 0===b?void 0:b.exclusiveReservation)?(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-black px-2 py-1 text-xs font-medium text-white ring-1 ring-inset ring-black/20",children:[(0,t.jsx)(v.pn,{children:(0,t.jsxs)(v.u,{children:[(0,t.jsx)(v.aJ,{children:"EXCLUSIVE"}),(0,t.jsx)(v._v,{children:(0,t.jsx)("p",{children:"The whole node is dedicated to a single computeclass."})})]})}),(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-white dark:text-white flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"})})})})]}):(null==s?void 0:null===(C=s.spec)||void 0===C?void 0:null===(N=C.extraComputeClass)||void 0===N?void 0:N.length)?(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20",children:[(0,t.jsx)(v.pn,{children:(0,t.jsxs)(v.u,{children:[(0,t.jsx)(v.aJ,{children:"SHARED"}),(0,t.jsx)(v._v,{children:(0,t.jsx)("p",{children:"The node has been allocated to one or more computeclasses."})})]})}),(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsx)("div",{role:"status",children:(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-yellow-500 dark:text-yellow-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})})})})]}):(0,t.jsxs)("dd",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:[(0,t.jsx)(v.pn,{children:(0,t.jsxs)(v.u,{children:[(0,t.jsx)(v.aJ,{children:"IDLE"}),(0,t.jsx)(v._v,{children:(0,t.jsx)("p",{children:"The node is not allocated to any jobs and is available for use."})})]})}),(0,t.jsx)("div",{className:"offline flex-none rounded-full p-1",children:(0,t.jsxs)("div",{role:"status",children:[(0,t.jsx)("svg",{className:"w-4 h-4 me-0 text-green-500 dark:text-green-400 flex-shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}),(0,t.jsx)("span",{className:"sr-only",children:"..."})]})})]})})})})]},a)})})]})})})},e))]})})}):(0,t.jsx)("div",{className:"mt-2 ml-4",children:(0,t.jsx)(i.Z,{})})})})}function E(e){return(0,t.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M5 12h14"}),(0,t.jsx)("path",{d:"M12 5v14"})]})}var _=a(87420),A=a(34611),S=a(75355),Z=a.n(S),L=a(80923),U=a(34209),k=a(23611),T=a(2187),R=e=>{let{workerdata:s}=e,a=(0,m.I0)(),n=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),[l,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)({groupName:s.groupName||"",computeClass:s.computeClass||"",replicaCount:s.replicaCount||0}),u=(0,r.useRef)(d);(0,r.useEffect)(()=>{Z()(d,u.current)||(h(),u.current=d)},[d,l,s]);let p=n.items.find(e=>"ray"===e.name),x=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),h=()=>{console.log("submittedData RAY:",d);try{if(""===d.groupName&&""===d.computeClass&&0===d.replicaCount){o.ZP.error("Please update the Ray Worker parameters to save changes!");return}if(""!==d.groupName){let e={...p,spec:{...p.spec,rayParams:{...p.spec.rayParams,workers:p.spec.rayParams.workers.map(e=>e.groupName===s.groupName||""===e.groupName?{groupName:d.groupName,computeClass:d.computeClass,replicaCount:d.replicaCount}:e)}}},t=n.items.map(s=>"ray"===s.name?e:s);console.log("Updated data:",t),a((0,A.Gi)({items:[...t]}))}o.ZP.success("Ray Worker Params Updated!",{id:"unique-toast-id"})}catch(e){o.ZP.error("Something is wrong! Please try again.",{id:"rayWorkerParams"})}},v=e=>{let{name:s,value:a}=e.target;c(e=>({...e,[s]:a}))},g=e=>{let s=parseInt(d.replicaCount,10)||0;c(a=>({...a,[e]:Math.max(s-1,1)}))},f=e=>{let s=parseInt(d.replicaCount,10)||0;c(a=>({...a,[e]:s+1}))};return(0,t.jsx)(t.Fragment,{children:l&&(0,t.jsxs)("div",{className:"mt-4 pt-4 rounded-2xl border-4 border-dashed border-gray-900/25 px-6 py-10",children:[(0,t.jsx)("div",{className:"space-y-12",children:(0,t.jsx)("div",{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Worker Group"}),(0,t.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,t.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 outline ring-2 ring-indigo-500",onClick:()=>{try{if(""===s.groupName&&""===s.computeClass&&0===s.replicaCount){let e={...p,spec:{...p.spec,rayParams:{...p.spec.rayParams,workers:p.spec.rayParams.workers.slice(0,-1)}}},s=n.items.map(s=>"ray"===s.name?e:s);a((0,A.Gi)({items:s})),i(!1),o.ZP.success("Removed the worker!",{id:"rayWorkerParams"})}else if(1===p.spec.rayParams.workers.length)o.ZP.error("You cannot delete the last worker!",{id:"rayWorkerParams"});else if(""!==s.groupName){let e=p.spec.rayParams.workers.filter(e=>e.groupName!==s.groupName),t={...p,spec:{...p.spec,rayParams:{...p.spec.rayParams,workers:[...e]}}},r=n.items.map(e=>"ray"===e.name?t:e);a((0,A.Gi)({items:r})),i(!1),o.ZP.success("".concat(s.groupName," removed!"),{id:"rayWorkerParams"})}}catch(e){o.ZP.error("Something is wrong! Please reload and try again.",{id:"rayWorkerParams"})}},children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)(U.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]})})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(L.Z,{label:"Group Name",popoverheader:"Name of the Group",popovercontent:(0,t.jsx)("p",{children:"Please provide the name of your Ray worker group. It is the specific group name you want to add."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{name:"groupName",value:d.groupName,onChange:v,type:"text",placeholder:"Type your group name",autoComplete:"groupName",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(L.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run in a particular node! If you want a custom label first add labels in a node!"})}),(0,t.jsx)("div",{className:"mt-2",children:x&&(0,t.jsx)("select",{name:"computeClass",value:d.computeClass,onChange:v,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[...x].reverse().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(L.Z,{label:"Number of workers",popoverheader:"Number of workers",popovercontent:(0,t.jsx)("p",{children:"Please provide the number of workers. It represents the number of replicas for your database."})}),(0,t.jsxs)("div",{className:"flex items-center justify-left mt-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>g("replicaCount"),className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mr-4",children:(0,t.jsx)(k.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,t.jsx)("input",{disabled:!0,name:"replicaCount",value:d.replicaCount,onChange:v,className:"w-16 text-center block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("button",{type:"button",onClick:()=>f("replicaCount"),className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ml-4",children:(0,t.jsx)(T.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})]})})]})})},D=e=>{var s,a,n,l,i,d,c,u,p,x,h,v,g;let{data:f}=e,y=(0,m.I0)(),j=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),b=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),[N,C]=(0,r.useState)({computeClass:(null==f?void 0:null===(n=f.spec)||void 0===n?void 0:null===(a=n.rayParams)||void 0===a?void 0:null===(s=a.head)||void 0===s?void 0:s.computeClass)||"",name:(null==f?void 0:null===(d=f.spec)||void 0===d?void 0:null===(i=d.rayParams)||void 0===i?void 0:null===(l=i.image)||void 0===l?void 0:l.name)||"",tag:(null==f?void 0:null===(p=f.spec)||void 0===p?void 0:null===(u=p.rayParams)||void 0===u?void 0:null===(c=u.image)||void 0===c?void 0:c.tag)||""}),w=(0,r.useRef)(N);(0,r.useEffect)(()=>{Z()(N,w.current)||(P(),w.current=N)},[N]);let P=()=>{let{name:e,tag:s,computeClass:a}=N;f.spec||(f.spec={}),f.spec.rayParams||(f.spec.rayParams={}),f.spec.rayParams.head||(f.spec.rayParams.head={}),f.spec.rayParams.image.name=e,f.spec.rayParams.image.tag=s,f.spec.rayParams.head.computeClass=a;let t=j.items.map(e=>e.name===f.name?f:e);y((0,A.Gi)({items:t})),o.ZP.success("Ray Parameters Updated!",{id:"rayParams"})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mt-4 pt-4 rounded-2xl border-4 border-dashed border-gray-900/25 px-6 py-10",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Ray Head"}),b&&(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(L.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run in a specific node! For custom labels, add them to a node first."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("select",{name:"computeClass",value:N.computeClass,onChange:e=>{let{name:s,value:a}=e.target;C(e=>({...e,[s]:a}))},className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[...b].reverse().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})})]}),(null==f?void 0:null===(h=f.spec)||void 0===h?void 0:null===(x=h.rayParams)||void 0===x?void 0:x.workers)&&(null==f?void 0:null===(g=f.spec)||void 0===g?void 0:null===(v=g.rayParams)||void 0===v?void 0:v.workers.map((e,s)=>(0,t.jsx)(R,{workerdata:e},s))),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"mt-6 flex items-center justify-center gap-x-6",children:(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("button",{type:"button",onClick:()=>{f.spec||(f.spec={}),f.spec.rayParams||(f.spec.rayParams={}),f.spec.rayParams.workers||(f.spec.rayParams.workers=[]),f.spec.rayParams.workers.push({groupName:"workergroup_".concat(f.spec.rayParams.workers.length+1),computeClass:b.length>0?b[b.length-1]:"",replicaCount:1});let e=j.items.map(e=>e.name===f.name?f:e);y((0,A.Gi)({items:e}))},className:"rounded-full bg-indigo-600 p-2 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:(0,t.jsx)(T.Z,{className:"h-5 w-5","aria-hidden":"true"})})})})}),(0,t.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,t.jsx)("div",{className:"mt-0 ml-8 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsx)("div",{className:"sm:col-span-5",children:(0,t.jsx)(L.Z,{label:"Add Ray Workers",popoverheader:"Add Ray Workers",popovercontent:(0,t.jsx)("p",{children:"Please click on the plus button to add ray workers. You can add multiple ray workers."})})})})})]})},B=e=>{var s,a;let{data:n,paramsName:l}=e;if(n.name.includes("ray"))return(0,t.jsx)(D,{data:n});let i=(0,m.I0)(),d=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),c=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),[u,p]=(0,r.useState)({computeClass:(null==n?void 0:null===(a=n.spec)||void 0===a?void 0:null===(s=a[l])||void 0===s?void 0:s.computeClass)||""}),x=(0,r.useRef)(u);(0,r.useEffect)(()=>{Z()(u,x.current)||(h(),x.current=u)},[u]);let h=()=>{try{let{computeClass:e}=u;n.spec||(n.spec={}),n.spec[l]||(n.spec[l]={}),n.spec[l].computeClass=e;let s=c.items.map(e=>e.name===n.name?n:e);i((0,A.Gi)({items:s})),o.ZP.success("Parameters Updated!",{id:"paramsName"})}catch(e){o.ZP.error("Something went wrong! Please try again.",{id:"paramsName"})}};return d?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-5",children:[(0,t.jsx)(L.Z,{label:"Select ComputeClass",popoverheader:"Select ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the labels for this service. This means the service will run on a specific node! For custom labels, add them to a node first."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("select",{name:"computeClass",value:u.computeClass,onChange:e=>{let{name:s,value:a}=e.target;p(e=>({...e,[s]:a}))},className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[...d].reverse().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})})}):null},X=e=>{let{deployment:s,icon:a,description:r,children:n}=e;return(0,t.jsxs)("li",{className:"relative flex items-center space-x-4 py-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,t.jsx)(a,{className:"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600","aria-hidden":"true"}),(0,t.jsx)("h2",{className:"min-w-0 text-sm font-semibold leading-6 text-gray-900",children:(0,t.jsx)("a",{href:"#",className:"flex gap-x-2",children:(0,t.jsxs)("span",{className:"whitespace-nowrap text-gray-900",children:[s.name,(0,t.jsx)("span",{className:"text-base text-rose-500",children:"*️"})]})})})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400",children:[(0,t.jsx)("p",{className:"whitespace-nowrap truncate",children:r}),(0,t.jsx)("br",{})]})]}),n]},s.name)},F=a(70694),V=a(96764),z=e=>{let{deployment:s,children:a}=e;return(0,t.jsxs)(F.yo,{children:[(0,t.jsx)(F.aM,{asChild:!0,children:(0,t.jsxs)(u.z,{variant:"outline",children:["Edit Params"," ",(0,t.jsx)(V.Z,{className:"ml-2 -mr-0.5 h-5 w-5 flex-none text-gray-400","aria-hidden":"true"})]})}),(0,t.jsxs)(F.ue,{className:"overflow-auto",children:[(0,t.jsxs)(F.Tu,{children:[(0,t.jsxs)(F.bC,{children:["Edit ",s.name," values"]}),(0,t.jsx)(F.Ei,{children:"You can update these values and click update. These are current default values. If there is no value to update then it will be empty."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4 overflow-visible",children:a})]})]})},O=a(74859);let W=e=>e.items.filter(e=>{if("true"===O.env.NEXT_PUBLIC_SNOWFLAKE){var s,a;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:null===(a=e.spec)||void 0===a?void 0:a.category)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0}).sort((e,s)=>e.name<s.name?-1:e.name>s.name?1:0).map(e=>(0,t.jsx)(X,{deployment:e,icon:(null==e?void 0:e.icon)||_.Z,description:(null==e?void 0:e.description)||"".concat(e.name," is a service of superduper required to run the application."),children:(0,t.jsx)(z,{deployment:e,children:(0,t.jsx)(B,{data:e,paramsName:"".concat(e.name,"Params")})})},e.id));var q=()=>{let e=(0,m.v9)(e=>e.environment.environmentLoadedValues),s=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),a=(0,m.I0)(),l=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),o=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),d=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name);return((0,r.useEffect)(()=>{let t=async()=>{try{let t=await n.Z.get("".concat("".concat(O.env.NEXT_PUBLIC_API,"/charts?deployment=").concat(d)),{headers:{Accept:"application/json",Authorization:(0,C.Z)(s),superduper_reverse_proxy:O.env.NEXT_PUBLIC_API||e.NEXT_PUBLIC_API}});console.log("Charts API data:",t.data),a((0,A.Gi)(t.data))}catch(e){console.error("Error fetching Services API data")}};o||t()},[o,a]),o||l)?(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"bg-white px-2 py-5 sm:px-2",children:(0,t.jsxs)("ul",{role:"list",className:"divide-y divide-red/5",children:[o&&W(o)," "]})})}):(0,t.jsxs)("div",{className:"mt-2 ml-4",children:[(0,t.jsx)(i.Z,{})," "]})},G=a(56511),M=a(28251),K=a(64520),Y=a(81695),$=a(72513),H=a(98348),J=e=>{var s,a;let{data:n}=e,l=(0,m.I0)(),i=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),o=(0,m.v9)(e=>e.nodegroups.nodeUniqueLabels),[d,c]=(0,r.useState)({computeClass:(null==n?void 0:null===(a=n.spec)||void 0===a?void 0:null===(s=a.monitoringParams)||void 0===s?void 0:s.computeClass)||""}),u=(0,r.useRef)(d);(0,r.useEffect)(()=>{Z()(d,u.current)||(p(),u.current=d)},[d]),(0,m.v9)(e=>e.nodegroups.nodeLoadedValues);let p=()=>{if(i&&i.items){var e,s;let a=(e=i.items,s=d.computeClass,function e(a){if(Array.isArray(a))return a.map(s=>e(s));if("object"!=typeof a||null===a)return a;for(let t in a)a[t]=e(a[t]),"computeClass"===t&&(a[t]=s);return a}(e));l((0,A.Gi)({items:a}))}else console.error("chartsgroups or chartsgroups.items is undefined")};return(0,t.jsx)("div",{children:o&&(0,t.jsx)("div",{className:"mt-1 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)(L.Z,{label:"Select Default ComputeClass for services",popoverheader:"Select Default ComputeClass",popovercontent:(0,t.jsx)("p",{children:"Please select the default compute class for all of the services and databases. If you have workloads that have unique hardware requirements, such as performing machine learning or AI tasks, needing specific CPU platforms and architecture, or needing performance isolation among users, Superduper offers compute classes. These compute classes are a curated subset of the infrastructure machine types. You can assign a compute class to a workload to ensure that it runs on the right type of machine."})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("select",{name:"computeClass",value:d.computeClass,onChange:e=>{let{name:s,value:a}=e.target;c(e=>({...e,[s]:a}))},className:"block w-2/3 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,t.jsx)("option",{value:"",children:"Select Default ComputeClass for services"},"defaults"),o&&o.length>0?[...o].map(e=>e&&(0,t.jsx)("option",{value:e,children:e},e)):[(0,t.jsx)("option",{value:"default",children:"default"},"default")]]})})]})})})},Q=a(73042),ee=a(35463),es=a(7682),ea=a(46346),et=a(58991),er=a(94432),en=a(74859);function el(){let e=(0,m.v9)(e=>e.environment.environmentLoadedValues),s=(0,m.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),a=(0,m.v9)(e=>e.secrets),i=(0,Y.useRouter)(),d=(0,m.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),c=(0,m.v9)(e=>e.chartsgroups.chartsLoadedValues),u=(0,m.v9)(e=>e.nodegroups.nodeLoadedValues),p=(0,m.v9)(e=>e.deployment.deploymentLoadedValues),x=(0,m.v9)(e=>e.extraEnvVars),[v,g]=(0,r.useState)("Something went wrong while creating the deployment. Please try again later."),[f,y]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),_=e=>{try{let{name:s,tag:a}=(0,er.Z)(e);if(!s||!a){console.error("Invalid image or tag:",s,a),o.ZP.error("Invalid image or tag. Please try again.");return}let t=c.items.map(e=>{for(let t of Object.keys(e.spec))t.endsWith("Params")&&e.spec[t].image&&(e.spec[t].image.name=s,e.spec[t].image.tag=a);return e});console.log("Updated items:",t),dispatch(chartsLoadedValues({items:t}))}catch(e){console.error("Update failed:",e)}},A=async()=>{var t,r,l;let i;try{if("true"==en.env.NEXT_PUBLIC_SNOWFLAKE&&(null==p?void 0:p.databaseURI)===""){o.ZP.error("Database URI is missing.",{duration:5e3});return}_(null===(t=userEnv)||void 0===t?void 0:t.image),window.scrollTo({top:0,behavior:"smooth"});let r={name:d,spec:{fake:!!d.startsWith("fake"),dataEndpoints:{artifactStore:{backendType:"",connectionURI:(null==p?void 0:p.artifactStoreURI)||""},dataStore:{backendType:"",connectionURI:(null==p?void 0:p.databaseURI)||""},metadataStore:{backendType:"",connectionURI:(null==p?void 0:p.metadataStoreURI)||""},extraEnvVars:"true"==en.env.NEXT_PUBLIC_SNOWFLAKE?[]:x||[]},nodeGroupList:u.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.extraComputeClass)&&e.spec.extraComputeClass.length>0}),secrets:"true"==en.env.NEXT_PUBLIC_SNOWFLAKE&&a||[],serviceList:c.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{if("true"===en.env.NEXT_PUBLIC_SNOWFLAKE){var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:e.name)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0}).filter(e=>{let{name:s}=e;return!("mongodb"===s&&((null==p?void 0:p.artifactStoreURI)||(null==p?void 0:p.databaseURI)||(null==p?void 0:p.metadataStoreURI)))})}};E(!0),console.log("\uD83D\uDC49 REQUEST DATA",r);let l={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:(0,C.Z)(s),superduper_reverse_proxy:en.env.NEXT_PUBLIC_API||e.NEXT_PUBLIC_API}};y(!0),i=o.ZP.loading("Deployment in progress...",{duration:1/0}),await new Promise(e=>setTimeout(e,3e3));let m=await n.Z.post("".concat("".concat(en.env.NEXT_PUBLIC_API,"/deployments")),r,l);console.log("RESULT:",m.data),await new Promise(e=>setTimeout(e,5e3)),o.ZP.dismiss(i),window.location.assign("/webui?deployment=done&query=1m"),o.ZP.success("Deployment successful!",{icon:"\uD83D\uDE80",duration:5e3})}catch(e){i&&o.ZP.dismiss(i),e.response&&"true"===en.env.NEXT_PUBLIC_SNOWFLAKE&&200!==e.response.status&&400!==e.response.status?(console.error("Deployment Form Submission Error:",e.response.data),g((null===(r=e.response)||void 0===r?void 0:r.data)||e.message)):(console.error("Deployment Form Submission Error:",e),g((null===(l=e.response)||void 0===l?void 0:l.data)||e.message)),w(!0),o.ZP.error("Deployment failed. Please try again.",{duration:5e3})}finally{E(!1),y(!1),b(!1)}},S=async()=>{var t,r;let l;try{if("true"==en.env.NEXT_PUBLIC_SNOWFLAKE&&(null==p?void 0:p.databaseURI)===""){o.ZP.error("Database URI is missing.",{duration:5e3});return}_(null===(t=userEnv)||void 0===t?void 0:t.image);let r={name:d,spec:{fake:!!d.startsWith("fake"),dataEndpoints:{artifactStore:{backendType:"",connectionURI:(null==p?void 0:p.artifactStoreURI)||""},dataStore:{backendType:"",connectionURI:(null==p?void 0:p.databaseURI)||""},metadataStore:{backendType:"",connectionURI:(null==p?void 0:p.metadataStoreURI)||""},extraEnvVars:"true"==en.env.NEXT_PUBLIC_SNOWFLAKE?[]:x||[]},nodeGroupList:u.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.extraComputeClass)&&e.spec.extraComputeClass.length>0}),secrets:"true"==en.env.NEXT_PUBLIC_SNOWFLAKE&&a||[],serviceList:c.items.map(e=>{let{status:s,...a}=e;return a}).filter(e=>{if("true"===en.env.NEXT_PUBLIC_SNOWFLAKE){var s;return(null==e?void 0:null===(s=e.spec)||void 0===s?void 0:s.category)!=="databases"&&(null==e?void 0:e.name)!=="mongodb"&&(null==e?void 0:e.name)!=="monitoring"}return!0}).filter(e=>{let{name:s}=e;return!("mongodb"===s&&((null==p?void 0:p.artifactStoreURI)||(null==p?void 0:p.databaseURI)||(null==p?void 0:p.metadataStoreURI)))})}};console.log("\uD83D\uDC49 REQUEST DATA",r),y(!0),l=o.ZP.loading("Retrying deployment...",{duration:1/0}),await new Promise(e=>setTimeout(e,5e3));let m={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:(0,C.Z)(s),superduper_reverse_proxy:en.env.NEXT_PUBLIC_API||e.NEXT_PUBLIC_API}},h=await n.Z.post("".concat("".concat(en.env.NEXT_PUBLIC_API,"/deployments")),r,m);console.log("RESULT:",h.data),await new Promise(e=>setTimeout(e,5e3)),o.ZP.dismiss(l),o.ZP.success("Deployment is successful.",{duration:5e3}),i.push("/webui?deployment=done&query=1m",void 0,{shallow:!1}),b(!1)}catch(e){l&&o.ZP.dismiss(l),e.response&&200!==e.response.status&&400!==e.response.status?(console.error("Deployment Form Submission Error:",e.response.data),i.push("/webui?deployment=done&query=1m",void 0,{shallow:!1}),o.ZP.success("Deployment successful!",{icon:"\uD83D\uDE80",duration:5e3})):(console.error("Deployment Form Submission Error:",e),g((null===(r=e.response)||void 0===r?void 0:r.data)||e.message),w(!0),o.ZP.error("Deployment retry failed. Please try again.",{duration:5e3}))}finally{y(!1),b(!1)}};return f?(0,t.jsx)(et.Z,{}):(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"pb-2",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Step 1: Set Compute Classes"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"ComputeClass enables users to influence the scheduling of Services on nodes based on specific criteria such as hardware capabilities, geographic location, or other custom requirements."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(I,{}),(0,t.jsx)(J,{}),(0,t.jsx)("br",{})]}),(0,t.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Step 2: Add Databackend"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"At first you have to add a database to your deployment. You can update the parameters below. We will deploy and handle the rest."}),(0,t.jsx)("br",{}),"true"!==en.env.NEXT_PUBLIC_SNOWFLAKE?(0,t.jsx)(G.Z,{}):(0,t.jsx)(M.Z,{})]}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"pb-4",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Step 3: Define Parameters"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Update the services you want to install on your deployment. You can click on the service to edit the configuration."}),(0,t.jsxs)("div",{style:{marginLeft:"-1.5rem!important"},children:[(0,t.jsx)(Q.Z,{}),"true"==en.env.NEXT_PUBLIC_SNOWFLAKE?(0,t.jsx)(es.Z,{}):(0,t.jsx)(ee.Z,{}),(0,t.jsx)(q,{})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,t.jsx)(l.default,{href:"/webui",children:(0,t.jsx)("button",{type:"button",className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"})}),(0,t.jsxs)(K.aR,{children:[(0,t.jsx)(K.vW,{className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Start Deployment"}),(0,t.jsxs)(K._T,{children:[(0,t.jsxs)(K.fY,{children:[(0,t.jsx)(K.f$,{children:"Start creating deployment now..."}),(0,t.jsx)(K.yT,{children:"This will create a deployment and it will take some time to finish. Please be patient. Do you want to continue?"})]}),(0,t.jsxs)(K.xo,{children:[(0,t.jsx)(K.le,{children:"Cancel"}),(0,t.jsx)(K.OL,{onClick:()=>{b(!0),A()},children:"Continue"})]})]})]})]}),(0,t.jsx)(K.aR,{open:j,children:(0,t.jsx)(K._T,{children:(0,t.jsxs)(K.fY,{children:[(0,t.jsx)(K.f$,{children:"Started deployment process..."}),(0,t.jsx)(K.yT,{children:"This initiates a deployment process that may take some time. Please wait patiently. You'll be redirected to the dashboard once it's complete."}),(0,t.jsx)("br",{}),(0,t.jsx)(H.O,{})]})})}),(0,t.jsx)(K.aR,{open:N,children:(0,t.jsxs)(K._T,{children:[(0,t.jsxs)(K.fY,{children:[(0,t.jsx)(K.f$,{children:"Deployment Failed"}),(0,t.jsx)(K.yT,{children:(0,t.jsxs)($.bZ,{variant:"destructive",children:[(0,t.jsx)(h.LPM,{className:"h-4 w-4"}),(0,t.jsx)($.Cd,{children:"Error"}),(0,t.jsx)(ea.x,{className:"scrollbar-visible h-[200px] w-full mt-2 pr-4",children:(0,t.jsx)($.X,{children:v})})]})})]}),(0,t.jsxs)(K.xo,{children:[(0,t.jsx)(K.le,{onClick:()=>{w(!1),b(!1)},children:"Cancel"}),(0,t.jsx)(K.OL,{onClick:()=>{b(!0),w(!1),S()},children:"Retry Now"})]})]})})]})]})}},72513:function(e,s,a){a.d(s,{Cd:function(){return d},X:function(){return c},bZ:function(){return o}});var t=a(27573),r=a(7653),n=a(85145),l=a(18580);let i=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,...n}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(i({variant:r}),a),...n})});o.displayName="Alert";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});d.displayName="AlertTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...r})});c.displayName="AlertDescription"},4216:function(e,s,a){a.d(s,{X:function(){return o}});var t=a(27573),r=a(7653),n=a(92999),l=a(85688),i=a(18580);let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(l.nQG,{className:"h-4 w-4"})})})});o.displayName=n.fC.displayName},42502:function(e,s,a){a.d(s,{$F:function(){return d},AW:function(){return u},Xi:function(){return m},_x:function(){return c},h_:function(){return o},qB:function(){return p}});var t=a(27573),r=a(7653),n=a(49002),l=a(85688),i=a(18580);let o=n.fC,d=n.xz;n.ZA,n.Uv,n.Tr;let c=n.Ee;r.forwardRef((e,s)=>{let{className:a,inset:r,children:o,...d}=e;return(0,t.jsxs)(n.fF,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...d,children:[o,(0,t.jsx)(l.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=n.tu.displayName;let u=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,t.jsx)(n.Uv,{children:(0,t.jsx)(n.VY,{ref:s,sideOffset:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});u.displayName=n.VY.displayName;let m=r.forwardRef((e,s)=>{let{className:a,inset:r,...l}=e;return(0,t.jsx)(n.ck,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...l})});m.displayName=n.ck.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:o,...d}=e;return(0,t.jsxs)(n.oC,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(l.nQG,{className:"h-4 w-4"})})}),r]})}).displayName=n.oC.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...o}=e;return(0,t.jsxs)(n.Rk,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(l.jXb,{className:"h-4 w-4 fill-current"})})}),r]})});p.displayName=n.Rk.displayName,r.forwardRef((e,s)=>{let{className:a,inset:r,...l}=e;return(0,t.jsx)(n.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...l})}).displayName=n.__.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.Z0.displayName},80500:function(e,s,a){a.d(s,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var t=a(27573),r=a(7653),n=a(18580);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",a),...r})})});l.displayName="Table";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...r})});o.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});c.displayName="TableHead";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});u.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},4482:function(e,s,a){a.d(s,{_v:function(){return c},aJ:function(){return d},pn:function(){return i},u:function(){return o}});var t=a(27573),r=a(7653),n=a(23098),l=a(18580);let i=n.zt,o=n.fC,d=n.xz,c=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,t.jsx)(n.VY,{ref:s,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})});c.displayName=n.VY.displayName},58991:function(e,s,a){a.d(s,{Z:function(){return f}});var t=a(27573),r=a(7653),n=a(12198),l=a(34527),i=a(82440),o=a(66465),d=a(53896),c=a(86288),u=a(13908),m=a(81695),p=a(7109),x=a(412),h=a(70790),v=a(74859);let g=[{key:"initializing",icon:n.Z,label:"Initializing",duration:3e3},{key:"building",icon:l.Z,label:"Building",duration:3e3},{key:"deploying",icon:i.Z,label:"Deploying",duration:3e3},{key:"success",icon:o.Z,label:"Success",duration:3e3}];function f(){let[e,s]=(0,r.useState)("initializing"),[a,n]=(0,r.useState)(0),l=(0,x.v9)(e=>e.environment.environmentLoadedValues),i=(0,x.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),o=(0,m.useRouter)(),f=(0,x.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),y=async e=>(await u.Z.get(e,{headers:{Accept:"application/json",Authorization:(0,p.Z)(i),superduper_reverse_proxy:v.env.NEXT_PUBLIC_API||l.NEXT_PUBLIC_API}})).data,{data:j,error:b}=(0,h.ZP)("".concat("".concat(v.env.NEXT_PUBLIC_API,"/deployments/").concat(f)),"".concat("".concat(v.env.NEXT_PUBLIC_API,"/deployments/").concat(f,"/")),y,{refreshInterval:0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});(0,r.useEffect)(()=>{j&&o.push("/webui?deployment=done&query=1m",void 0,{shallow:!0})},[j]),(0,r.useEffect)(()=>{N()},[]);let N=()=>{s("initializing"),n(0)};return(0,r.useEffect)(()=>{if("success"===e)return;let a=g.find(s=>s.key===e),t=g.findIndex(s=>s.key===e);n(0);let r=setInterval(()=>{n(e=>{let s=e+100/(a.duration/100);return s>=100?100:s})},100),l=setTimeout(()=>{t<g.length-1?s(g[t+1].key):s("success")},a.duration);return()=>{clearInterval(r),clearTimeout(l)}},[e]),(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen w-full bg-background",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/10 to-transparent h-96 pointer-events-none"}),(0,t.jsxs)(c.Zb,{className:"w-full max-w-6xl shadow-lg relative -mt-20",children:[(0,t.jsxs)(c.Ol,{className:"text-center space-y-2",children:[(0,t.jsx)(c.ll,{className:"text-4xl font-extrabold tracking-tight",children:"Deployment Status"}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Tracking progress of your deployment"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"w-full md:w-1/3 md:border-r md:pr-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Deployment Stages"}),(0,t.jsx)("ul",{className:"space-y-6",children:g.map(s=>{let a=s.icon,r=s.key===e,n=g.findIndex(s=>s.key===e)>g.findIndex(e=>e.key===s.key);return(0,t.jsxs)("li",{className:"flex items-center space-x-3 ".concat(r?"text-primary font-medium":n?"text-green-600":"text-muted-foreground"),children:[(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:s.label}),n&&(0,t.jsx)(d.Z,{className:"w-4 h-4 text-green-600"})]},s.key)})})]}),(0,t.jsxs)("div",{className:"w-full md:w-2/3 md:pl-8 flex flex-col items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Progress"}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center mb-8",children:["success"===e?(0,t.jsx)(d.Z,{className:"text-green-500 w-24 h-24 mb-4"}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("svg",{className:"w-24 h-24",viewBox:"0 0 100 100",children:[(0,t.jsx)("circle",{className:"text-gray-200",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:"42",cx:"50",cy:"50"}),(0,t.jsx)("circle",{className:"text-primary",strokeWidth:"8",strokeDasharray:264,strokeDashoffset:264-a/100*264,strokeLinecap:"round",stroke:"url(#gradient)",fill:"transparent",r:"42",cx:"50",cy:"50"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"hsl(var(--primary))"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"hsl(var(--primary))"})]})})]}),(0,t.jsxs)("span",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl font-semibold",children:[Math.round(a),"%"]})]}),(0,t.jsx)("p",{className:"text-center text-lg font-medium mt-4",children:(()=>{switch(e){case"initializing":return"Deployment ongoing, initializing...";case"building":return"Deployment ongoing, building files...";case"deploying":return"Deployment ongoing, finalizing production setup...";case"success":return"Deployment ongoing, almost live!";default:return"Deployment ongoing, wrapping up..."}})()})]})]})]})})]})]})}},7682:function(e,s,a){a.d(s,{Z:function(){return A}});var t=a(27573),r=a(7653),n=a(412),l=a(36531),i=a(80500),o=a(86288),d=a(3172),c=a(47686),u=a(6315),m=a(10997),p=a(19434),x=a(11952);let h=e=>s=>s({type:x.e,payload:e});var v=a(45696),g=a.n(v),f=a(93296),y=a(13908),j=a(7109),b=a(24776),N=a(1930),C=a(18580);let w=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,C.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});w.displayName="Textarea";var P=a(97747);function I(e){let{open:s,onOpenChange:a,onSubmit:n,initialData:i,mode:o}=e,[d,c]=(0,r.useState)((null==i?void 0:i.name)||""),[u,m]=(0,r.useState)((null==i?void 0:i.value)||"");return(0,r.useEffect)(()=>{i?(c(i.name),m(i.value)):(c(""),m(""))},[i]),(0,t.jsx)(b.Vq,{open:s,onOpenChange:a,children:(0,t.jsx)(b.cZ,{className:"sm:max-w-[600px]",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(d,u),c(""),m(""),a(!1)},children:[(0,t.jsxs)(b.fK,{children:[(0,t.jsx)(b.$N,{children:"add"===o?"Add secret":"Edit secret"}),(0,t.jsx)(b.Be,{children:"add"===o?"Add a new secret to your environment.":"Edit secret on your existing environment"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(P._,{htmlFor:"name",children:"Name"}),(0,t.jsx)(N.I,{id:"name",placeholder:"YOUR_SECRET_NAME",value:d,onChange:e=>c(e.target.value),disabled:"edit"===o})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(P._,{htmlFor:"value",children:"Value"}),(0,t.jsx)(w,{id:"value",placeholder:"Secret value",value:u,onChange:e=>m(e.target.value),className:"min-h-[100px]"})]})]}),(0,t.jsxs)(b.cN,{children:[(0,t.jsx)(l.z,{type:"button",variant:"secondary",onClick:()=>a(!1),children:"Cancel"}),(0,t.jsx)(l.z,{type:"submit",children:"add"===o?"Add secret":"Save changes"})]})]})})})}var E=a(5772),_=a(74859);function A(e){let{data:s}=e,a=(0,n.I0)(),[x,v]=(0,r.useState)([]),[b,N]=(0,r.useState)(!1),[C,w]=(0,r.useState)(null),P=(0,r.useRef)(null),A=(0,n.v9)(e=>e.deploymentName.deploymentNameLoadedValues.name),Z=(0,n.v9)(e=>{var s;return null==e?void 0:null===(s=e.userInfo)||void 0===s?void 0:s.userInfoLoadedValues}),[L,U]=(0,r.useState)([]),[k,T]=(0,r.useState)(!1),R=(0,n.v9)(e=>e.environment.environmentLoadedValues),D=(0,n.v9)(e=>e.extraEnvVars),B=(0,n.v9)(e=>e.secrets),X=async(e,s)=>{try{let t={headers:{Accept:"application/json",Authorization:(0,j.Z)(Z),superduper_reverse_proxy:_.env.NEXT_PUBLIC_API||R.NEXT_PUBLIC_API}},r="".concat(_.env.NEXT_PUBLIC_API,"/secrets?deployment=").concat(A),n=await y.Z.post(r,{name:e,spec:{stringData:{[e]:s},type:"Opaque"}},t),l=S(n.data);a(h([...B[0],...l])),a((0,p.I)(g()([...D,{name:e,value:s}]))),U([...L,e]),f.ZP.success("Secret added successfully!")}catch(e){console.error("Error adding secret:",e),f.ZP.error("Failed to add secret")}},F=async(e,s)=>{try{let t={headers:{Accept:"application/json",Authorization:(0,j.Z)(Z),superduper_reverse_proxy:_.env.NEXT_PUBLIC_API||R.NEXT_PUBLIC_API}},r="".concat(_.env.NEXT_PUBLIC_API,"/secrets/").concat(e,"?deployment=").concat(A),n=await y.Z.put(r,{name:e,spec:{stringData:{[e]:s},type:"Opaque"}},t),l=S(n.data);a(h([...B[0],...l]));let i=D.map(a=>a.name===e?{...a,value:s}:a);a((0,p.I)(g()(i))),f.ZP.success("Secret updated successfully!")}catch(e){console.error("Error updating secret:",e),f.ZP.error("Failed to update secret")}},V=async e=>{try{let s={headers:{Accept:"application/json",Authorization:(0,j.Z)(Z),superduper_reverse_proxy:_.env.NEXT_PUBLIC_API||R.NEXT_PUBLIC_API}},t=D[e];if(t){let e="".concat(_.env.NEXT_PUBLIC_API,"/secrets/").concat(t.name,"?deployment=").concat(A);try{await y.Z.delete(e,s),f.ZP.success("Secret ".concat(t.name," removed successfully"))}catch(e){console.error("Failed to delete secret ".concat(t.name,":"),e),f.ZP.error("Error removing secret: ".concat(t.name));return}}let r=D.filter((s,a)=>a!==e);a((0,p.I)(g()(r))),v(x.filter((s,a)=>a!==e))}catch(e){console.error("Unexpected error in removing secrets:",e),f.ZP.error("An unexpected error occurred. Please try again.")}};return((0,r.useEffect)(()=>{let e=e=>(console.error("Error occurred:",e),console.log("Using fallback logic. Returning an empty array."),[]),s=async()=>{try{T(!0);let e="".concat(_.env.NEXT_PUBLIC_API,"/secrets?deployment=").concat(A),s=await y.Z.get(e,{headers:{Accept:"application/json",Authorization:(0,j.Z)(Z),superduper_reverse_proxy:_.env.NEXT_PUBLIC_API||R.NEXT_PUBLIC_API}});console.log("Secrets retrieved successfully:",s.data);let t=function(e){try{if(e&&Array.isArray(e.items))return e.items.map(e=>e.name)}catch(e){console.error("Error processing payload:",e)}return[]}(s.data),r=S(s.data);return a(h([r])),U(t),function(e){let s=[...D],t=e.filter(e=>!s.some(s=>s.name===e));t.length>0&&(t.forEach(e=>{s.push({name:e,value:""})}),a((0,p.I)(g()(s))))}(t),t}catch(s){return console.log("Error Propagation",s),e(s)}finally{T(!1)}};(async()=>{console.log("Final secrets array:",await s())})()},[]),k)?(0,t.jsx)(E.Z,{}):D&&Array.isArray(D)?(0,t.jsxs)(o.Zb,{className:"w-full",children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{className:"text-xl font-semibold",children:"Environment secrets"}),(0,t.jsx)(o.SZ,{children:"Secrets are encrypted environment variables. They are accessible only by deployment actions in the context of this environment."})]}),(0,t.jsx)(o.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[0===D.length?(0,t.jsxs)("div",{className:"rounded-lg border border-dashed p-12 text-center",children:[(0,t.jsx)("div",{className:"text-muted-foreground mb-4",children:"This environment has no secrets."}),(0,t.jsxs)(l.z,{onClick:()=>N(!0),variant:"default",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Add environment secret"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("div",{className:"space-x-2",children:(0,t.jsxs)(l.z,{onClick:()=>N(!0),variant:"default",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Add secret"]})})}),(0,t.jsxs)(i.iA,{children:[(0,t.jsx)(i.xD,{children:(0,t.jsxs)(i.SC,{children:[(0,t.jsx)(i.ss,{className:"w-[90%]",children:"Name"}),(0,t.jsx)(i.ss,{className:"w-[10%]"})]})}),(0,t.jsx)(i.RM,{children:D.map((e,s)=>(0,t.jsxs)(i.SC,{children:[(0,t.jsx)(i.pj,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e.name})]})}),(0,t.jsx)(i.pj,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",onClick:()=>{w(e),N(!0)},children:(0,t.jsx)(u.Z,{className:"h-4 w-4"})}),(0,t.jsx)(l.z,{variant:"ghost",size:"icon",onClick:()=>V(s),className:"hover:text-red-500",children:(0,t.jsx)(m.Z,{className:"h-4 w-4"})})]})})]},s))})]})]}),(0,t.jsx)("input",{ref:P,type:"file",onChange:e=>{let s=e.target.files[0];try{if(s){let e=new FileReader;e.onload=e=>{let s=e.target.result.split("\n").map(e=>{let[s,a]=e.split("=").map(e=>e.trim());return{name:s,value:a}}).filter(e=>e.name&&e.value);a((0,p.I)(g()([...D,...s]))),v(e=>[...e,...Array(s.length).fill(!1)])},e.readAsText(s)}}catch(e){console.error(e),f.ZP.error("Failed to parse the file. Please try again with .env or .txt format.")}},className:"hidden",accept:".env,.txt"})]})}),(0,t.jsx)(I,{open:b,onOpenChange:e=>{N(e),e||w(null)},onSubmit:C?F:X,initialData:C,mode:C?"edit":"add"})]}):null}function S(e){try{if(e&&Array.isArray(e.items))return e.items.map(e=>e.status.uid);if(e&&(null==e?void 0:e.status)&&(null==e?void 0:e.status.uid))return[e.status.uid]}catch(e){console.error("Error processing payload:",e)}return[]}},35463:function(e,s,a){var t=a(27573),r=a(7653),n=a(412),l=a(36531),i=a(9551),o=a(72940),d=a(13333),c=a(95417),u=a(37727),m=a(80923),p=a(19434),x=a(45696),h=a.n(x),v=a(93296);s.Z=e=>{let{data:s}=e,a=(0,n.I0)(),[x,g]=(0,r.useState)([]),f=(0,r.useRef)(null),y=(0,n.v9)(e=>e.extraEnvVars),j=(e,s,t)=>{let r=[...y];r[e][s]=t.target.value,a((0,p.I)(h()(r)))};(0,r.useEffect)(()=>{let e=[...y],s=(console.error("NEXT_PUBLIC_API_DEFAULT_ENV is not defined or empty."),[]).filter(s=>!e.some(e=>e.name===s));s.length>0&&(s.forEach(s=>{e.push({name:s,value:""})}),a((0,p.I)(h()(e))))},[a,y]);let b=e=>{let s=y.filter((s,a)=>a!==e),t=h()(s);a((0,p.I)(t)),g(x.filter((s,a)=>a!==e))},N=e=>{g(s=>{let a=[...s];return a[e]=!a[e],a})};return y&&Array.isArray(y)?(0,t.jsxs)("div",{children:[y.map((e,s)=>(0,t.jsx)("div",{className:"relative mt-5 grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-8",children:(0,t.jsxs)("div",{className:"sm:col-span-1 grid grid-cols-2 gap-x-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{label:"Key",popoverheader:"Key",popovercontent:(0,t.jsx)("p",{children:"Enter the key for the environment variable."})}),(0,t.jsx)("input",{name:"name-".concat(s),value:e.name,onChange:e=>j(s,"name",e),className:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter key"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{label:"Value",popoverheader:"Value",popovercontent:(0,t.jsx)("p",{children:"Enter the value for the environment variable."})}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-4 w-3xl max-w-md",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{name:"value-".concat(s),value:e.value,type:x[s]?"text":"password",onChange:e=>j(s,"value",e),placeholder:"Enter value",className:"block w-3xl rounded-md border-0 py-1.5 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>N(s),children:x[s]?(0,t.jsx)(i.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,t.jsx)(o.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),(0,t.jsx)(l.z,{variant:"ghost",onClick:()=>b(s),className:"bg-black text-white hover:bg-red-500 hover:text-white dark:hover:bg-red-900 px-2",children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})]})]})]})},s)),(0,t.jsxs)("div",{className:"flex space-x-4 mt-4",children:[(0,t.jsxs)(l.z,{onClick:()=>{a((0,p.I)(h()([...y,{name:"",value:""}]))),g([...x,!1])},children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Add Secret"]}),(0,t.jsxs)(l.z,{onClick:()=>f.current.click(),children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Upload Secret File"]}),(0,t.jsx)("input",{ref:f,type:"file",onChange:e=>{let s=e.target.files[0];try{if(s){let e=new FileReader;e.onload=e=>{let s=e.target.result.split("\n").map(e=>{let[s,a]=e.split("=").map(e=>e.trim());return{name:s,value:a}}).filter(e=>e.name&&e.value);a((0,p.I)(h()([...y,...s]))),g(e=>[...e,...Array(s.length).fill(!1)])},e.readAsText(s)}}catch(e){console.error(e),v.ZP.error("Failed to parse the file. Please try again with .env or .txt format.")}},style:{display:"none"}})]})]}):null}},94432:function(e,s,a){a.d(s,{Z:function(){return t}});function t(e){let s=e.indexOf(":");return -1===s?{name:e,tag:"latest"}:{name:e.substring(0,s),tag:e.substring(s+1)}}},34611:function(e,s,a){a.d(s,{Gi:function(){return r}});var t=a(58108);let r=e=>s=>s({type:t.a6,payload:e})},4429:function(e,s,a){a.d(s,{a:function(){return r}});var t=a(49904);let r=e=>s=>s({type:t.s,payload:e})},19434:function(e,s,a){a.d(s,{I:function(){return r}});var t=a(82869);let r=e=>s=>s({type:t.I,payload:e})},60855:function(e,s,a){a.d(s,{Bw:function(){return n},Lj:function(){return l},NB:function(){return r}});var t=a(59625);let r=e=>s=>s({type:t.qJ,payload:e}),n=e=>s=>{let a=new Set;(null==e?void 0:e.items)&&Array.isArray(e.items)&&e.items.forEach(e=>{var s,t,r;(null==e?void 0:null===(t=e.status)||void 0===t?void 0:null===(s=t.reservation)||void 0===s?void 0:s.computeClassList)&&Array.isArray(e.status.reservation.computeClassList)&&e.status.reservation.computeClassList.forEach(e=>{a.add(e)});let n=(null==e?void 0:null===(r=e.spec)||void 0===r?void 0:r.extraComputeClass)||[];Array.isArray(n)&&n.forEach(e=>{a.add(e)})});let r=Array.from(a);return r.includes("base")&&(r=["base",...Array.from(a).filter(e=>"base"!==e)]),s({type:t.Ou,payload:r})},l=e=>s=>{let a=e;return e.includes("base")&&(a=["base",...e.filter(e=>"base"!==e)]),s({type:t.Ou,payload:a})}}}]);