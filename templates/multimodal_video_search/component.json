{
  "identifier": "multimodal_video_search",
  "upstream": null,
  "cache": true,
  "status": null,
  "build_variables": null,
  "build_template": null,
  "template": {
    "identifier": "video-search",
    "upstream": null,
    "cache": true,
    "status": "ready",
    "build_variables": null,
    "build_template": null,
    "components": [
      "?Listener:chunker",
      "?VectorIndex:my-vector-index"
    ],
    "link": null,
    "_path": "superduper.components.application.Application",
    "version": 0,
    "_builds": {
      "Table:<var:table_name>": {
        "upstream": null,
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "fields": {
          "x": "file"
        },
        "primary_id": "id",
        "data": null,
        "path": null,
        "component": false,
        "_path": "superduper.components.table.Table",
        "version": 0
      },
      "ObjectModel:chunker": {
        "upstream": null,
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "datatype": "image=superduper_pillow.pil_image|current_timestamp=int",
        "model_update_kwargs": {},
        "predict_kwargs": {},
        "compute_kwargs": {},
        "validation": null,
        "metric_values": {},
        "num_workers": 0,
        "serve": false,
        "trainer": null,
        "object": "&:blob:41c0027e7f65171a3f3b7d915a4d1e9391e96f279ab55ddc1ccd958651d82c3a",
        "method": null,
        "_path": "superduper.components.model.ObjectModel",
        "version": 0
      },
      "Listener:chunker": {
        "upstream": [
          "?Table:<var:table_name>"
        ],
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "cdc_table": "<var:table_name>",
        "key": "x",
        "model": "?ObjectModel:chunker",
        "predict_kwargs": {},
        "select": {
          "_path": "superduper.base.query.parse_query",
          "documents": [],
          "query": "<var:table_name>"
        },
        "flatten": true,
        "_path": "superduper.components.listener.Listener",
        "version": 0
      },
      "ImageModel:image": {
        "upstream": null,
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "datatype": "vector[float:512]",
        "model_update_kwargs": {},
        "predict_kwargs": {},
        "compute_kwargs": {},
        "validation": null,
        "metric_values": {},
        "num_workers": 0,
        "serve": false,
        "trainer": null,
        "model": "Vit-B/32",
        "device": "cpu",
        "batch_size": 10,
        "_path": "__main__.ImageModel",
        "version": 0
      },
      "Listener:text-listener": {
        "upstream": null,
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "cdc_table": "<var:output_prefix>chunker__?(Listener:chunker.uuid)",
        "key": "<var:output_prefix>chunker__?(Listener:chunker.uuid).image",
        "model": "?ImageModel:image",
        "predict_kwargs": {},
        "select": {
          "_path": "superduper.base.query.parse_query",
          "documents": [],
          "query": "<var:output_prefix>chunker__?(Listener:chunker.uuid).select()"
        },
        "flatten": false,
        "_path": "superduper.components.listener.Listener",
        "version": 1
      },
      "TextModel:text": {
        "upstream": null,
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "datatype": "vector[float:512]",
        "model_update_kwargs": {},
        "predict_kwargs": {},
        "compute_kwargs": {},
        "validation": null,
        "metric_values": {},
        "num_workers": 0,
        "serve": false,
        "trainer": null,
        "model": "Vit-B/32",
        "device": "cpu",
        "_path": "__main__.TextModel",
        "version": 0
      },
      "Listener:compatible-listener": {
        "upstream": null,
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "cdc_table": "",
        "key": "text",
        "model": "?TextModel:text",
        "predict_kwargs": {},
        "select": null,
        "flatten": false,
        "_path": "superduper.components.listener.Listener",
        "version": 1
      },
      "VectorIndex:my-vector-index": {
        "upstream": [
          "?Listener:chunker"
        ],
        "cache": true,
        "status": "ready",
        "build_variables": null,
        "build_template": null,
        "cdc_table": "<var:output_prefix>text-listener__?(Listener:text-listener.uuid)",
        "indexing_listener": "?Listener:text-listener",
        "compatible_listener": "?Listener:compatible-listener",
        "measure": "cosine",
        "metric_values": {},
        "_path": "superduper.components.vector_index.VectorIndex",
        "version": 1
      }
    }
  },
  "template_variables": [
    "output_prefix",
    "table_name"
  ],
  "types": {
    "table_name": {
      "type": "str",
      "default": "sample_multimodal_video_search"
    }
  },
  "schema": null,
  "blobs": "&:blob:b17910296073ce6d4fa5254f6d512c4739ac48d62a1434258075e78583c90fcc",
  "files": {},
  "requirements": null,
  "default_tables": [
    "?Table:sample_multimodal_video_search"
  ],
  "_path": "superduper.components.template.Template",
  "version": null,
  "_builds": {
    "RemoteData:sample_videos": {
      "upstream": null,
      "cache": true,
      "status": null,
      "build_variables": null,
      "build_template": null,
      "getter": "&:blob:4444f2bc90fba21a4f1417583435ba37638da19618ae1fe21e6054b8e17f5ecd",
      "_path": "superduper.components.dataset.RemoteData",
      "version": null
    },
    "Table:sample_multimodal_video_search": {
      "upstream": null,
      "cache": true,
      "status": null,
      "build_variables": null,
      "build_template": null,
      "fields": {
        "x": "file"
      },
      "primary_id": "id",
      "data": "?RemoteData:sample_videos",
      "path": null,
      "component": false,
      "_path": "superduper.components.table.Table",
      "version": null
    }
  },
  "_files": {}
}